import{j as e}from"./vendor-query-4MbTBVa_.js";import{r as s}from"./vendor-react-BPpqjFzU.js";import{u as a,H as t,J as r,I as l,B as o,C as n,b as d,W as i,d as c,a as m}from"./admin-D-5katVs.js";import{q as x,p as u,e as h,m as g,v as f}from"./vendor-ui-DhEHJaaJ.js";const p=()=>{const[p,b]=s.useState([]),[j,w]=s.useState([]),[y,N]=s.useState(!0),[v,k]=s.useState(""),[C,L]=s.useState("All"),[I,S]=s.useState([]),{toast:E}=a();s.useEffect(()=>{F()},[]),s.useEffect(()=>{D()},[v,C,p]);const F=async()=>{try{const e=await fetch("https://api.galloways.co.ke/static/downloads",{method:"GET"});if(!e.ok)throw new Error("Failed to load downloadable files");const s=await e.json();if(!s.success)throw new Error(s.message||"Failed to load files");b(s.data),w(s.data)}catch(e){E({title:"Error",description:"Failed to load downloadable files. Please try again later.",variant:"destructive"})}finally{N(!1)}},D=()=>{let e=p;v&&(e=e.filter(e=>e.displayName.toLowerCase().includes(v.toLowerCase())||e.description.toLowerCase().includes(v.toLowerCase())||e.category.toLowerCase().includes(v.toLowerCase()))),"All"!==C&&(e=e.filter(e=>e.category===C)),w(e)};return y?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(t,{}),e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading downloadable forms..."})]})}),e.jsx(r,{})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(t,{}),e.jsx("div",{className:"bg-primary text-primary-foreground py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Insurance Forms & Documents"}),e.jsx("p",{className:"text-xl opacity-90 max-w-3xl mx-auto",children:"Download the forms and documents you need for your insurance claims, applications, and policy management. All forms are current and ready to use."})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(x,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(l,{placeholder:"Search forms by name, description, or category...",value:v,onChange:e=>k(e.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-muted-foreground mt-2 mr-2"}),["All",...[...new Set(p.map(e=>e.category))].sort()].map(s=>e.jsxs(o,{variant:C===s?"default":"outline",size:"sm",onClick:()=>L(s),className:"text-xs",children:[s,"All"!==s&&e.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["(",p.filter(e=>e.category===s).length,")"]})]},s))]})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",j.length," of ",p.length," forms"]})]}),0===j.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No forms found"}),e.jsx("p",{className:"text-muted-foreground",children:v||"All"!==C?"Try adjusting your search or filter criteria":"No forms available at the moment"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>{return e.jsxs(n,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(h,{className:"h-8 w-8 text-primary flex-shrink-0"}),e.jsx(i,{className:(a=s.category,{"Motor Insurance":"bg-blue-100 text-blue-800","General Insurance":"bg-green-100 text-green-800","Commercial Insurance":"bg-purple-100 text-purple-800","Livestock Insurance":"bg-yellow-100 text-yellow-800","Medical Insurance":"bg-red-100 text-red-800","Personal Insurance":"bg-pink-100 text-pink-800","Liability Insurance":"bg-orange-100 text-orange-800","Workers Compensation":"bg-indigo-100 text-indigo-800",Documentation:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"),children:s.category})]}),e.jsx(c,{className:"text-lg leading-tight",children:s.displayName})]}),e.jsxs(m,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 leading-relaxed",children:s.description}),e.jsx(o,{onClick:()=>(async(e,s)=>{try{S(s=>[...s,e]);const a=await fetch(`https://api.galloways.co.ke/static/downloads/${e}`,{method:"GET"});if(!a.ok)throw new Error("Failed to download file");const t=await a.blob(),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download=e,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l),E({title:"Success",description:`${s} downloaded successfully!`})}catch(a){E({title:"Download Error",description:`Failed to download ${s}. Please try again.`,variant:"destructive"})}finally{S(s=>s.filter(s=>s!==e))}})(s.filename,s.displayName),disabled:I.includes(s.filename),className:"w-full",size:"sm",children:I.includes(s.filename)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Download PDF"]})})]})]},s.filename);var a})}),e.jsx("div",{className:"mt-16 bg-muted rounded-lg p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx(f,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Important Information"}),e.jsxs("div",{className:"text-left space-y-4",children:[e.jsxs("div",{className:"bg-background p-4 rounded border",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ðŸ“‹ Form Completion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please ensure all forms are completely filled out with accurate information. Incomplete forms may delay processing."})]}),e.jsxs("div",{className:"bg-background p-4 rounded border",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ðŸ“Ž Required Documents"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Some forms may require additional supporting documents. Please refer to the documentation guide for complete requirements."})]}),e.jsxs("div",{className:"bg-background p-4 rounded border",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ðŸ“§ Submission"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed forms can be submitted via email, our online portal, or delivered to any of our branch offices."})]})]})]})})]}),e.jsx(r,{})]})};export{p as default};
