var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,R as a,a as n,v as r,b as i,g as o,c as l,L as c,u as d}from"./vendor-react-B1NQUE71.js";import{j as u}from"./vendor-query-6aI7gcTg.js";import{X as h,M as m,T as p,F as f,I as g,L as x,a as v,P as y,b,C as w,c as j,d as N,e as _,f as S,D as k,U as C,g as T,h as E,S as R,i as D,B as P,j as I,k as A,G as O,l as M,m as $,R as L,n as U,o as F,p as q,q as z,r as B,E as W,s as H,t as K,u as G,v as V,w as J,x as Y,y as Q,z as X,A as Z,H as ee,J as te,K as se,N as ae,O as ne,Q as re,V as ie,W as oe,Y as le,Z as ce,_ as de,$ as ue,a0 as he,a1 as me,a2 as pe,a3 as fe,a4 as ge,a5 as xe,a6 as ve,a7 as ye,a8 as be,a9 as we,aa as je}from"./vendor-ui-9s9J6YOV.js";const Ne={},_e=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Ne)return;Ne[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,s&&n.setAttribute("nonce",s),document.head.appendChild(n),t?new Promise((t,s)=>{n.addEventListener("load",t),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};let Se=0;const ke=new Map,Ce=e=>{if(ke.has(e))return;const t=setTimeout(()=>{ke.delete(e),De({type:"REMOVE_TOAST",toastId:e})},1e6);ke.set(e,t)},Te=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?Ce(s):e.toasts.forEach(e=>{Ce(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Ee=[];let Re={toasts:[]};function De(e){Re=Te(Re,e),Ee.forEach(e=>{e(Re)})}function Pe({...e}){const t=(Se=(Se+1)%Number.MAX_SAFE_INTEGER,Se.toString()),s=()=>De({type:"DISMISS_TOAST",toastId:t});return De({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>De({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Ie(){const[e,t]=s.useState(Re);return s.useEffect(()=>(Ee.push(t),()=>{const e=Ee.indexOf(t);e>-1&&Ee.splice(e,1)}),[e]),{...e,toast:Pe,dismiss:e=>De({type:"DISMISS_TOAST",toastId:e})}}function Ae(e,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(null==e||e(a),!1===s||!a.defaultPrevented)return null==t?void 0:t(a)}}function Oe(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Me(...e){return t=>{let s=!1;const a=e.map(e=>{const a=Oe(e,t);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let t=0;t<a.length;t++){const s=a[t];"function"==typeof s?s():Oe(e[t],null)}}}}function $e(...e){return s.useCallback(Me(...e),e)}function Le(e,t=[]){let a=[];const n=()=>{const t=a.map(e=>s.createContext(e));return function(a){const n=(null==a?void 0:a[e])||t;return s.useMemo(()=>({[`__scope${e}`]:{...a,[e]:n}}),[a,n])}};return n.scopeName=e,[function(t,n){const r=s.createContext(n),i=a.length;a=[...a,n];const o=t=>{var a;const{scope:n,children:o,...l}=t,c=(null==(a=null==n?void 0:n[e])?void 0:a[i])||r,d=s.useMemo(()=>l,Object.values(l));return u.jsx(c.Provider,{value:d,children:o})};return o.displayName=t+"Provider",[o,function(a,o){var l;const c=(null==(l=null==o?void 0:o[e])?void 0:l[i])||r,d=s.useContext(c);if(d)return d;if(void 0!==n)return n;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},Ue(n,...t)]}function Ue(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=a.reduce((t,{useScope:s,scopeName:a})=>({...t,...s(e)[`__scope${a}`]}),{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return a.scopeName=t.scopeName,a}function Fe(e){const t=ze(e),a=s.forwardRef((e,a)=>{const{children:n,...r}=e,i=s.Children.toArray(n),o=i.find(He);if(o){const e=o.props.children,n=i.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return u.jsx(t,{...r,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null})}return u.jsx(t,{...r,ref:a,children:n})});return a.displayName=`${e}.Slot`,a}var qe=Fe("Slot");function ze(e){const t=s.forwardRef((e,t)=>{const{children:a,...n}=e;if(s.isValidElement(a)){const e=function(e){var t,s;let a=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a),r=function(e,t){const s={...t};for(const a in t){const n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=(...e)=>{const t=r(...e);return n(...e),t}:n&&(s[a]=n):"style"===a?s[a]={...n,...r}:"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return{...e,...s}}(n,a.props);return a.type!==s.Fragment&&(r.ref=t?Me(t,e):e),s.cloneElement(a,r)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Be=Symbol("radix.slottable");function We(e){const t=({children:e})=>u.jsx(u.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=Be,t}function He(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Be}function Ke(e){const t=e+"CollectionProvider",[s,n]=Le(t),[r,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:s}=e,n=a.useRef(null),i=a.useRef(new Map).current;return u.jsx(r,{scope:t,itemMap:i,collectionRef:n,children:s})};o.displayName=t;const l=e+"CollectionSlot",c=Fe(l),d=a.forwardRef((e,t)=>{const{scope:s,children:a}=e,n=$e(t,i(l,s).collectionRef);return u.jsx(c,{ref:n,children:a})});d.displayName=l;const h=e+"CollectionItemSlot",m="data-radix-collection-item",p=Fe(h),f=a.forwardRef((e,t)=>{const{scope:s,children:n,...r}=e,o=a.useRef(null),l=$e(t,o),c=i(h,s);return a.useEffect(()=>(c.itemMap.set(o,{ref:o,...r}),()=>{c.itemMap.delete(o)})),u.jsx(p,{[m]:"",ref:l,children:n})});return f.displayName=h,[{Provider:o,Slot:d,ItemSlot:f},function(t){const s=i(e+"CollectionConsumer",t);return a.useCallback(()=>{const e=s.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(s.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[s.collectionRef,s.itemMap])},n]}var Ge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const a=Fe(`Primitive.${t}`),n=s.forwardRef((e,s)=>{const{asChild:n,...r}=e,i=n?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),u.jsx(i,{...r,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Ve(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}function Je(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>{var s;return null==(s=t.current)?void 0:s.call(t,...e)},[])}var Ye,Qe="dismissableLayer.update",Xe="dismissableLayer.pointerDownOutside",Ze="dismissableLayer.focusOutside",et=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tt=s.forwardRef((e,t)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=s.useContext(et),[h,m]=s.useState(null),p=(null==h?void 0:h.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,f]=s.useState({}),g=$e(t,e=>m(e)),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),b=h?x.indexOf(h):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,N=function(e,t=(null==globalThis?void 0:globalThis.document)){const a=Je(e),n=s.useRef(!1),r=s.useRef(()=>{});return s.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let s=function(){nt(Xe,a,n,{discrete:!0})};const n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=s,t.addEventListener("click",r.current,{once:!0})):s()}else t.removeEventListener("click",r.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}},[t,a]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,s=[...d.branches].some(e=>e.contains(t));j&&!s&&(null==r||r(e),null==o||o(e),e.defaultPrevented||null==l||l())},p),_=function(e,t=(null==globalThis?void 0:globalThis.document)){const a=Je(e),n=s.useRef(!1);return s.useEffect(()=>{const e=e=>{if(e.target&&!n.current){nt(Ze,a,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,a]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(null==i||i(e),null==o||o(e),e.defaultPrevented||null==l||l())},p);return function(e,t=(null==globalThis?void 0:globalThis.document)){const a=Je(e);s.useEffect(()=>{const e=e=>{"Escape"===e.key&&a(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[a,t])}(e=>{b===d.layers.size-1&&(null==n||n(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},p),s.useEffect(()=>{if(h)return a&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(Ye=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),at(),()=>{a&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=Ye)}},[h,p,a,d]),s.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),at())},[h,d]),s.useEffect(()=>{const e=()=>f({});return document.addEventListener(Qe,e),()=>document.removeEventListener(Qe,e)},[]),u.jsx(Ge.div,{...c,ref:g,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:Ae(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Ae(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Ae(e.onPointerDownCapture,N.onPointerDownCapture)})});tt.displayName="DismissableLayer";var st=s.forwardRef((e,t)=>{const a=s.useContext(et),n=s.useRef(null),r=$e(t,n);return s.useEffect(()=>{const e=n.current;if(e)return a.branches.add(e),()=>{a.branches.delete(e)}},[a.branches]),u.jsx(Ge.div,{...e,ref:r})});function at(){const e=new CustomEvent(Qe);document.dispatchEvent(e)}function nt(e,t,s,{discrete:a}){const n=s.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&n.addEventListener(e,t,{once:!0}),a?Ve(n,r):n.dispatchEvent(r)}st.displayName="DismissableLayerBranch";var rt=tt,it=st,ot=(null==globalThis?void 0:globalThis.document)?s.useLayoutEffect:()=>{},lt=s.forwardRef((e,t)=>{var a;const{container:n,...i}=e,[o,l]=s.useState(!1);ot(()=>l(!0),[]);const c=n||o&&(null==(a=null==globalThis?void 0:globalThis.document)?void 0:a.body);return c?r.createPortal(u.jsx(Ge.div,{...i,ref:t}),c):null});lt.displayName="Portal";var ct=e=>{const{present:t,children:a}=e,n=function(e){const[t,a]=s.useState(),n=s.useRef(null),r=s.useRef(e),i=s.useRef("none"),o=e?"mounted":"unmounted",[l,c]=function(e,t){return s.useReducer((e,s)=>t[e][s]??e,e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const e=dt(n.current);i.current="mounted"===l?e:"none"},[l]),ot(()=>{const t=n.current,s=r.current;if(s!==e){const a=i.current,n=dt(t);if(e)c("MOUNT");else if("none"===n||"none"===(null==t?void 0:t.display))c("UNMOUNT");else{c(s&&a!==n?"ANIMATION_OUT":"UNMOUNT")}r.current=e}},[e,c]),ot(()=>{if(t){let e;const s=t.ownerDocument.defaultView??window,a=a=>{const i=dt(n.current).includes(a.animationName);if(a.target===t&&i&&(c("ANIMATION_END"),!r.current)){const a=t.style.animationFillMode;t.style.animationFillMode="forwards",e=s.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=a)})}},o=e=>{e.target===t&&(i.current=dt(n.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{s.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:s.useCallback(e=>{n.current=e?getComputedStyle(e):null,a(e)},[])}}(t),r="function"==typeof a?a({present:n.isPresent}):s.Children.only(a),i=$e(n.ref,function(e){var t,s;let a=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;if(n)return e.ref;if(a=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(r));return"function"==typeof a||n.isPresent?s.cloneElement(r,{ref:i}):null};function dt(e){return(null==e?void 0:e.animationName)||"none"}ct.displayName="Presence";var ut=i[" useInsertionEffect ".trim().toString()]||ot;function ht({prop:e,defaultProp:t,onChange:a=()=>{},caller:n}){const[r,i,o]=function({defaultProp:e,onChange:t}){const[a,n]=s.useState(e),r=s.useRef(a),i=s.useRef(t);return ut(()=>{i.current=t},[t]),s.useEffect(()=>{var e;r.current!==a&&(null==(e=i.current)||e.call(i,a),r.current=a)},[a,r]),[a,n,i]}({defaultProp:t,onChange:a}),l=void 0!==e,c=l?e:r;{const t=s.useRef(void 0!==e);s.useEffect(()=>{const e=t.current;if(e!==l){}t.current=l},[l,n])}const d=s.useCallback(t=>{var s;if(l){const a=function(e){return"function"==typeof e}(t)?t(e):t;a!==e&&(null==(s=o.current)||s.call(o,a))}else i(t)},[l,e,i,o]);return[c,d]}var mt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pt=s.forwardRef((e,t)=>u.jsx(Ge.span,{...e,ref:t,style:{...mt,...e.style}}));pt.displayName="VisuallyHidden";var ft=pt;function gt(e){var t,s,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=gt(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function xt(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=gt(e))&&(a&&(a+=" "),a+=t);return a}const vt=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,yt=xt,bt=(e,t)=>s=>{var a;if(null==(null==t?void 0:t.variants))return yt(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:n,defaultVariants:r}=t,i=Object.keys(n).map(e=>{const t=null==s?void 0:s[e],a=null==r?void 0:r[e];if(null===t)return null;const i=vt(t)||vt(a);return n[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{}),l=null==t||null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:s,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...r,...o}[t]):{...r,...o}[t]===s})?[...e,s,a]:e},[]);return yt(e,i,l,null==s?void 0:s.class,null==s?void 0:s.className)},wt=e=>{const t=St(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),jt(s,t)||_t(e)},getConflictingClassGroupIds:(e,t)=>{const n=s[e]||[];return t&&a[e]?[...n,...a[e]]:n}}},jt=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const a=e[0],n=t.nextPart.get(a),r=n?jt(e.slice(1),n):void 0;if(r)return r;if(0===t.validators.length)return;const i=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(i)))?void 0:s.classGroupId},Nt=/^\[(.+)\]$/,_t=e=>{if(Nt.test(e)){const t=Nt.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},St=e=>{const{theme:t,prefix:s}=e,a={nextPart:new Map,validators:[]};return Et(Object.entries(e.classGroups),s).forEach(([e,s])=>{kt(s,a,e,t)}),a},kt=(e,t,s,a)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Ct(t,e)).classGroupId=s)}if("function"==typeof e)return Tt(e)?void kt(e(a),t,s,a):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,n])=>{kt(n,Ct(t,e),s,a)})})},Ct=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},Tt=e=>e.isThemeGetter,Et=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,Rt=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,a=new Map;const n=(n,r)=>{s.set(n,r),t++,t>e&&(t=0,a=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(n(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):n(e,t)}}},Dt=e=>{const{separator:t,experimentalParseClassName:s}=e,a=1===t.length,n=t[0],r=t.length,i=e=>{const s=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===n&&(a||e.slice(u,u+r)===t)){s.push(e.slice(l,u)),l=u+r;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===s.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:s,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return s?e=>s({className:e,parseClassName:i}):i},Pt=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},It=/\s+/;function At(){let e,t,s=0,a="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Ot(e))&&(a&&(a+=" "),a+=t);return a}const Ot=e=>{if("string"==typeof e)return e;let t,s="";for(let a=0;a<e.length;a++)e[a]&&(t=Ot(e[a]))&&(s&&(s+=" "),s+=t);return s};function Mt(e,...t){let s,a,n,r=function(o){const l=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:Rt(e.cacheSize),parseClassName:Dt(e),...wt(e)}))(l),a=s.cache.get,n=s.cache.set,r=i,i(o)};function i(e){const t=a(e);if(t)return t;const r=((e,t)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:n}=t,r=[],i=e.trim().split(It);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=s(e);let h=Boolean(u),m=a(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=a(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=Pt(t).join(":"),f=c?p+"!":p,g=f+m;if(r.includes(g))continue;r.push(g);const x=n(m,h);for(let s=0;s<x.length;++s){const e=x[s];r.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return n(e,r),r}return function(){return r(At.apply(null,arguments))}}const $t=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Lt=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ut=/^\d+\/\d+$/,Ft=new Set(["px","full","screen"]),qt=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zt=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bt=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Wt=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ht=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kt=e=>Vt(e)||Ft.has(e)||Ut.test(e),Gt=e=>os(e,"length",ls),Vt=e=>Boolean(e)&&!Number.isNaN(Number(e)),Jt=e=>os(e,"number",Vt),Yt=e=>Boolean(e)&&Number.isInteger(Number(e)),Qt=e=>e.endsWith("%")&&Vt(e.slice(0,-1)),Xt=e=>Lt.test(e),Zt=e=>qt.test(e),es=new Set(["length","size","percentage"]),ts=e=>os(e,es,cs),ss=e=>os(e,"position",cs),as=new Set(["image","url"]),ns=e=>os(e,as,us),rs=e=>os(e,"",ds),is=()=>!0,os=(e,t,s)=>{const a=Lt.exec(e);return!!a&&(a[1]?"string"==typeof t?a[1]===t:t.has(a[1]):s(a[2]))},ls=e=>zt.test(e)&&!Bt.test(e),cs=()=>!1,ds=e=>Wt.test(e),us=e=>Ht.test(e),hs=Mt(()=>{const e=$t("colors"),t=$t("spacing"),s=$t("blur"),a=$t("brightness"),n=$t("borderColor"),r=$t("borderRadius"),i=$t("borderSpacing"),o=$t("borderWidth"),l=$t("contrast"),c=$t("grayscale"),d=$t("hueRotate"),u=$t("invert"),h=$t("gap"),m=$t("gradientColorStops"),p=$t("gradientColorStopPositions"),f=$t("inset"),g=$t("margin"),x=$t("opacity"),v=$t("padding"),y=$t("saturate"),b=$t("scale"),w=$t("sepia"),j=$t("skew"),N=$t("space"),_=$t("translate"),S=()=>["auto",Xt,t],k=()=>[Xt,t],C=()=>["",Kt,Gt],T=()=>["auto",Vt,Xt],E=()=>["","0",Xt],R=()=>[Vt,Xt];return{cacheSize:500,separator:":",theme:{colors:[is],spacing:[Kt,Gt],blur:["none","",Zt,Xt],brightness:R(),borderColor:[e],borderRadius:["none","","full",Zt,Xt],borderSpacing:k(),borderWidth:C(),contrast:R(),grayscale:E(),hueRotate:R(),invert:E(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Qt,Gt],inset:S(),margin:S(),opacity:R(),padding:k(),saturate:R(),scale:R(),sepia:E(),skew:R(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Xt]}],container:["container"],columns:[{columns:[Zt]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Xt]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yt,Xt]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xt]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",Yt,Xt]}],"grid-cols":[{"grid-cols":[is]}],"col-start-end":[{col:["auto",{span:["full",Yt,Xt]},Xt]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[is]}],"row-start-end":[{row:["auto",{span:[Yt,Xt]},Xt]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xt,t]}],"min-w":[{"min-w":[Xt,t,"min","max","fit"]}],"max-w":[{"max-w":[Xt,t,"none","full","min","max","fit","prose",{screen:[Zt]},Zt]}],h:[{h:[Xt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Zt,Gt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Jt]}],"font-family":[{font:[is]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xt]}],"line-clamp":[{"line-clamp":["none",Vt,Jt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kt,Xt]}],"list-image":[{"list-image":["none",Xt]}],"list-style-type":[{list:["none","disc","decimal",Xt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kt,Gt]}],"underline-offset":[{"underline-offset":["auto",Kt,Xt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ss]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ts]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ns]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Kt,Xt]}],"outline-w":[{outline:[Kt,Gt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Kt,Gt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Zt,rs]}],"shadow-color":[{shadow:[is]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[a]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Zt,Xt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xt]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",Xt]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Yt,Xt]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Kt,Gt,Jt]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function ms(...e){return hs(xt(e))}var ps=Array(12).fill(0),fs=({visible:e,className:t})=>a.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},a.createElement("div",{className:"sonner-spinner"},ps.map((e,t)=>a.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),gs=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),xs=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vs=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ys=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),bs=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},a.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ws=1,js=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...a}=e,n="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:ws++,r=this.toasts.find(e=>e.id===n),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),r?this.toasts=this.toasts.map(t=>t.id===n?(this.publish({...t,...e,id:n,title:s}),{...t,...e,id:n,dismissible:i,title:s}):t):this.addToast({title:s,...a,dismissible:i,id:n}),n},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let n,r=e instanceof Promise?e:e(),i=void 0!==s,o=r.then(async e=>{if(n=["resolve",e],a.isValidElement(e))i=!1,this.create({id:s,type:"default",message:e});else if(Ns(e)&&!e.ok){i=!1;let a="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,n="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:s,type:"error",message:a,description:n})}else if(void 0!==t.success){i=!1;let a="function"==typeof t.success?await t.success(e):t.success,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"success",message:a,description:n})}}).catch(async e=>{if(n=["reject",e],void 0!==t.error){i=!1;let a="function"==typeof t.error?await t.error(e):t.error,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"error",message:a,description:n})}}).finally(()=>{var e;i&&(this.dismiss(s),s=void 0),null==(e=t.finally)||e.call(t)}),l=()=>new Promise((e,t)=>o.then(()=>"reject"===n[0]?t(n[1]):e(n[1])).catch(t));return"string"!=typeof s&&"number"!=typeof s?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,t)=>{let s=(null==t?void 0:t.id)||ws++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ns=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,_s=(e,t)=>{let s=(null==t?void 0:t.id)||ws++;return js.addToast({title:e,...t,id:s}),s},Ss=Object.assign(_s,{success:js.success,info:js.info,warning:js.warning,error:js.error,custom:js.custom,message:js.message,promise:js.promise,dismiss:js.dismiss,loading:js.loading},{getHistory:()=>js.toasts,getToasts:()=>js.getActiveToasts()});function ks(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Cs=3,Ts=14;function Es(...e){return e.filter(Boolean).join(" ")}var Rs=e=>{var t,n,r,i,o,l,c,d,u,h,m;let{invert:p,toast:f,unstyled:g,interacting:x,setHeights:v,visibleToasts:y,heights:b,index:w,toasts:j,expanded:N,removeToast:_,defaultRichColors:S,closeButton:k,style:C,cancelButtonStyle:T,actionButtonStyle:E,className:R="",descriptionClassName:D="",duration:P,position:I,gap:A,loadingIcon:O,expandByDefault:M,classNames:$,icons:L,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:F}=e,[q,z]=a.useState(null),[B,W]=a.useState(null),[H,K]=a.useState(!1),[G,V]=a.useState(!1),[J,Y]=a.useState(!1),[Q,X]=a.useState(!1),[Z,ee]=a.useState(!1),[te,se]=a.useState(0),[ae,ne]=a.useState(0),re=a.useRef(f.duration||P||4e3),ie=a.useRef(null),oe=a.useRef(null),le=0===w,ce=w+1<=y,de=f.type,ue=!1!==f.dismissible,he=f.className||"",me=f.descriptionClassName||"",pe=a.useMemo(()=>b.findIndex(e=>e.toastId===f.id)||0,[b,f.id]),fe=a.useMemo(()=>{var e;return null!=(e=f.closeButton)?e:k},[f.closeButton,k]),ge=a.useMemo(()=>f.duration||P||4e3,[f.duration,P]),xe=a.useRef(0),ve=a.useRef(0),ye=a.useRef(0),be=a.useRef(null),[we,je]=I.split("-"),Ne=a.useMemo(()=>b.reduce((e,t,s)=>s>=pe?e:e+t.height,0),[b,pe]),_e=(()=>{let[e,t]=a.useState(document.hidden);return a.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Se=f.invert||p,ke="loading"===de;ve.current=a.useMemo(()=>pe*A+Ne,[pe,Ne]),a.useEffect(()=>{re.current=ge},[ge]),a.useEffect(()=>{K(!0)},[]),a.useEffect(()=>{let e=oe.current;if(e){let t=e.getBoundingClientRect().height;return ne(t),v(e=>[{toastId:f.id,height:t,position:f.position},...e]),()=>v(e=>e.filter(e=>e.toastId!==f.id))}},[v,f.id]),a.useLayoutEffect(()=>{if(!H)return;let e=oe.current,t=e.style.height;e.style.height="auto";let s=e.getBoundingClientRect().height;e.style.height=t,ne(s),v(e=>e.find(e=>e.toastId===f.id)?e.map(e=>e.toastId===f.id?{...e,height:s}:e):[{toastId:f.id,height:s,position:f.position},...e])},[H,f.title,f.description,v,f.id]);let Ce=a.useCallback(()=>{V(!0),se(ve.current),v(e=>e.filter(e=>e.toastId!==f.id)),setTimeout(()=>{_(f)},200)},[f,_,v,ve]);return a.useEffect(()=>{if(f.promise&&"loading"===de||f.duration===1/0||"loading"===f.type)return;let e;return N||x||F&&_e?(()=>{if(ye.current<xe.current){let e=(new Date).getTime()-xe.current;re.current=re.current-e}ye.current=(new Date).getTime()})():re.current!==1/0&&(xe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=f.onAutoClose)||e.call(f,f),Ce()},re.current)),()=>clearTimeout(e)},[N,x,f,de,F,_e,Ce]),a.useEffect(()=>{f.delete&&Ce()},[Ce,f.delete]),a.createElement("li",{tabIndex:0,ref:oe,className:Es(R,he,null==$?void 0:$.toast,null==(t=null==f?void 0:f.classNames)?void 0:t.toast,null==$?void 0:$.default,null==$?void 0:$[de],null==(n=null==f?void 0:f.classNames)?void 0:n[de]),"data-sonner-toast":"","data-rich-colors":null!=(r=f.richColors)?r:S,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":H,"data-promise":!!f.promise,"data-swiped":Z,"data-removed":G,"data-visible":ce,"data-y-position":we,"data-x-position":je,"data-index":w,"data-front":le,"data-swiping":J,"data-dismissible":ue,"data-type":de,"data-invert":Se,"data-swipe-out":Q,"data-swipe-direction":B,"data-expanded":!!(N||M&&H),style:{"--index":w,"--toasts-before":w,"--z-index":j.length-w,"--offset":`${G?te:ve.current}px`,"--initial-height":M?"auto":`${ae}px`,...C,...f.style},onDragEnd:()=>{Y(!1),z(null),be.current=null},onPointerDown:e=>{ke||!ue||(ie.current=new Date,se(ve.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Y(!0),be.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s,a;if(Q||!ue)return;be.current=null;let n=Number((null==(e=oe.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),r=Number((null==(t=oe.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(s=ie.current)?void 0:s.getTime()),o="x"===q?n:r,l=Math.abs(o)/i;if(Math.abs(o)>=20||l>.11)return se(ve.current),null==(a=f.onDismiss)||a.call(f,f),W("x"===q?n>0?"right":"left":r>0?"down":"up"),Ce(),X(!0),void ee(!1);Y(!1),z(null)},onPointerMove:t=>{var s,a,n,r;if(!be.current||!ue||(null==(s=window.getSelection())?void 0:s.toString().length)>0)return;let i=t.clientY-be.current.y,o=t.clientX-be.current.x,l=null!=(a=e.swipeDirections)?a:function(e){let[t,s]=e.split("-"),a=[];return t&&a.push(t),s&&a.push(s),a}(I);!q&&(Math.abs(o)>1||Math.abs(i)>1)&&z(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};"y"===q?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&i<0||l.includes("bottom")&&i>0)&&(c.y=i):"x"===q&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&ee(!0),null==(n=oe.current)||n.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(r=oe.current)||r.style.setProperty("--swipe-amount-y",`${c.y}px`)}},fe&&!f.jsx?a.createElement("button",{"aria-label":U,"data-disabled":ke,"data-close-button":!0,onClick:ke||!ue?()=>{}:()=>{var e;Ce(),null==(e=f.onDismiss)||e.call(f,f)},className:Es(null==$?void 0:$.closeButton,null==(i=null==f?void 0:f.classNames)?void 0:i.closeButton)},null!=(o=null==L?void 0:L.close)?o:bs):null,f.jsx||s.isValidElement(f.title)?f.jsx?f.jsx:"function"==typeof f.title?f.title():f.title:a.createElement(a.Fragment,null,de||f.icon||f.promise?a.createElement("div",{"data-icon":"",className:Es(null==$?void 0:$.icon,null==(l=null==f?void 0:f.classNames)?void 0:l.icon)},f.promise||"loading"===f.type&&!f.icon?f.icon||(null!=L&&L.loading?a.createElement("div",{className:Es(null==$?void 0:$.loader,null==(Te=null==f?void 0:f.classNames)?void 0:Te.loader,"sonner-loader"),"data-visible":"loading"===de},L.loading):O?a.createElement("div",{className:Es(null==$?void 0:$.loader,null==(Ee=null==f?void 0:f.classNames)?void 0:Ee.loader,"sonner-loader"),"data-visible":"loading"===de},O):a.createElement(fs,{className:Es(null==$?void 0:$.loader,null==(Re=null==f?void 0:f.classNames)?void 0:Re.loader),visible:"loading"===de})):null,"loading"!==f.type?f.icon||(null==L?void 0:L[de])||(e=>{switch(e){case"success":return gs;case"info":return vs;case"warning":return xs;case"error":return ys;default:return null}})(de):null):null,a.createElement("div",{"data-content":"",className:Es(null==$?void 0:$.content,null==(c=null==f?void 0:f.classNames)?void 0:c.content)},a.createElement("div",{"data-title":"",className:Es(null==$?void 0:$.title,null==(d=null==f?void 0:f.classNames)?void 0:d.title)},"function"==typeof f.title?f.title():f.title),f.description?a.createElement("div",{"data-description":"",className:Es(D,me,null==$?void 0:$.description,null==(u=null==f?void 0:f.classNames)?void 0:u.description)},"function"==typeof f.description?f.description():f.description):null),s.isValidElement(f.cancel)?f.cancel:f.cancel&&ks(f.cancel)?a.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||T,onClick:e=>{var t,s;ks(f.cancel)&&ue&&(null==(s=(t=f.cancel).onClick)||s.call(t,e),Ce())},className:Es(null==$?void 0:$.cancelButton,null==(h=null==f?void 0:f.classNames)?void 0:h.cancelButton)},f.cancel.label):null,s.isValidElement(f.action)?f.action:f.action&&ks(f.action)?a.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||E,onClick:e=>{var t,s;ks(f.action)&&(null==(s=(t=f.action).onClick)||s.call(t,e),!e.defaultPrevented&&Ce())},className:Es(null==$?void 0:$.actionButton,null==(m=null==f?void 0:f.classNames)?void 0:m.actionButton)},f.action.label):null));var Te,Ee,Re};function Ds(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function Ps(e,t){let s={};return[e,t].forEach((e,t)=>{let a=1===t,n=a?"--mobile-offset":"--offset",r=a?"16px":"32px";function i(e){["top","right","bottom","left"].forEach(t=>{s[`${n}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?s[`${n}-${t}`]=r:s[`${n}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(r)}),s}var Is=s.forwardRef(function(e,t){let{invert:s,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:l,className:c,offset:d,mobileOffset:u,theme:h="light",richColors:m,duration:p,style:f,visibleToasts:g=Cs,toastOptions:x,dir:v=Ds(),gap:y=Ts,loadingIcon:b,icons:w,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:N}=e,[_,S]=a.useState([]),k=a.useMemo(()=>Array.from(new Set([n].concat(_.filter(e=>e.position).map(e=>e.position)))),[_,n]),[C,T]=a.useState([]),[E,R]=a.useState(!1),[D,P]=a.useState(!1),[I,A]=a.useState("system"!==h?h:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=a.useRef(null),M=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=a.useRef(null),L=a.useRef(!1),U=a.useCallback(e=>{S(t=>{var s;return null!=(s=t.find(t=>t.id===e.id))&&s.delete||js.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return a.useEffect(()=>js.subscribe(e=>{e.dismiss?S(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{r.flushSync(()=>{S(t=>{let s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),{...t[s],...e},...t.slice(s+1)]:[e,...t]})})})}),[]),a.useEffect(()=>{if("system"!==h)return void A(h);if("system"===h&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{A(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{A(e?"dark":"light")}catch(t){}})}},[h]),a.useEffect(()=>{_.length<=1&&R(!1)},[_]),a.useEffect(()=>{let e=e=>{var t,s;i.every(t=>e[t]||e.code===t)&&(R(!0),null==(t=O.current)||t.focus()),"Escape"===e.code&&(document.activeElement===O.current||null!=(s=O.current)&&s.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),a.useEffect(()=>{if(O.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,L.current=!1)}},[O.current]),a.createElement("section",{ref:t,"aria-label":`${j} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,n)=>{var r;let[i,h]=t.split("-");return _.length?a.createElement("ol",{key:t,dir:"auto"===v?Ds():v,tabIndex:-1,ref:O,className:c,"data-sonner-toaster":!0,"data-theme":I,"data-y-position":i,"data-lifted":E&&_.length>1&&!o,"data-x-position":h,style:{"--front-toast-height":`${(null==(r=C[0])?void 0:r.height)||0}px`,"--width":"356px","--gap":`${y}px`,...f,...Ps(d,u)},onBlur:e=>{L.current&&!e.currentTarget.contains(e.relatedTarget)&&(L.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||L.current||(L.current=!0,$.current=e.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{D||R(!1)},onDragEnd:()=>R(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||P(!0)},onPointerUp:()=>P(!1)},_.filter(e=>!e.position&&0===n||e.position===t).map((n,r)=>{var i,c;return a.createElement(Rs,{key:n.id,icons:w,index:r,toast:n,defaultRichColors:m,duration:null!=(i=null==x?void 0:x.duration)?i:p,className:null==x?void 0:x.className,descriptionClassName:null==x?void 0:x.descriptionClassName,invert:s,visibleToasts:g,closeButton:null!=(c=null==x?void 0:x.closeButton)?c:l,interacting:D,position:t,style:null==x?void 0:x.style,unstyled:null==x?void 0:x.unstyled,classNames:null==x?void 0:x.classNames,cancelButtonStyle:null==x?void 0:x.cancelButtonStyle,actionButtonStyle:null==x?void 0:x.actionButtonStyle,removeToast:U,toasts:_.filter(e=>e.position==n.position),heights:C.filter(e=>e.position==n.position),setHeights:T,expandByDefault:o,gap:y,loadingIcon:b,expanded:E,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))}),As=i[" useId ".trim().toString()]||(()=>{}),Os=0;function Ms(e){const[t,a]=s.useState(As());return ot(()=>{a(e=>e??String(Os++))},[e]),t?`radix-${t}`:""}const $s=["top","right","bottom","left"],Ls=Math.min,Us=Math.max,Fs=Math.round,qs=Math.floor,zs=e=>({x:e,y:e}),Bs={left:"right",right:"left",bottom:"top",top:"bottom"},Ws={start:"end",end:"start"};function Hs(e,t,s){return Us(e,Ls(t,s))}function Ks(e,t){return"function"==typeof e?e(t):e}function Gs(e){return e.split("-")[0]}function Vs(e){return e.split("-")[1]}function Js(e){return"x"===e?"y":"x"}function Ys(e){return"y"===e?"height":"width"}const Qs=new Set(["top","bottom"]);function Xs(e){return Qs.has(Gs(e))?"y":"x"}function Zs(e){return Js(Xs(e))}function ea(e){return e.replace(/start|end/g,e=>Ws[e])}const ta=["left","right"],sa=["right","left"],aa=["top","bottom"],na=["bottom","top"];function ra(e,t,s,a){const n=Vs(e);let r=function(e,t,s){switch(e){case"top":case"bottom":return s?t?sa:ta:t?ta:sa;case"left":case"right":return t?aa:na;default:return[]}}(Gs(e),"start"===s,a);return n&&(r=r.map(e=>e+"-"+n),t&&(r=r.concat(r.map(ea)))),r}function ia(e){return e.replace(/left|right|bottom|top/g,e=>Bs[e])}function oa(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function la(e){const{x:t,y:s,width:a,height:n}=e;return{width:a,height:n,top:s,left:t,right:t+a,bottom:s+n,x:t,y:s}}function ca(e,t,s){let{reference:a,floating:n}=e;const r=Xs(t),i=Zs(t),o=Ys(i),l=Gs(t),c="y"===r,d=a.x+a.width/2-n.width/2,u=a.y+a.height/2-n.height/2,h=a[o]/2-n[o]/2;let m;switch(l){case"top":m={x:d,y:a.y-n.height};break;case"bottom":m={x:d,y:a.y+a.height};break;case"right":m={x:a.x+a.width,y:u};break;case"left":m={x:a.x-n.width,y:u};break;default:m={x:a.x,y:a.y}}switch(Vs(t)){case"start":m[i]-=h*(s&&c?-1:1);break;case"end":m[i]+=h*(s&&c?-1:1)}return m}async function da(e,t){var s;void 0===t&&(t={});const{x:a,y:n,platform:r,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=Ks(t,e),p=oa(m),f=o[h?"floating"===u?"reference":"floating":u],g=la(await r.getClippingRect({element:null==(s=await(null==r.isElement?void 0:r.isElement(f)))||s?f:f.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:a,y:n,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(o.floating)),y=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},b=la(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-b.top+p.top)/y.y,bottom:(b.bottom-g.bottom+p.bottom)/y.y,left:(g.left-b.left+p.left)/y.x,right:(b.right-g.right+p.right)/y.x}}function ua(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ha(e){return $s.some(t=>e[t]>=0)}const ma=new Set(["left","top"]);function pa(){return"undefined"!=typeof window}function fa(e){return va(e)?(e.nodeName||"").toLowerCase():"#document"}function ga(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function xa(e){var t;return null==(t=(va(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function va(e){return!!pa()&&(e instanceof Node||e instanceof ga(e).Node)}function ya(e){return!!pa()&&(e instanceof Element||e instanceof ga(e).Element)}function ba(e){return!!pa()&&(e instanceof HTMLElement||e instanceof ga(e).HTMLElement)}function wa(e){return!(!pa()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ga(e).ShadowRoot)}const ja=new Set(["inline","contents"]);function Na(e){const{overflow:t,overflowX:s,overflowY:a,display:n}=Oa(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+s)&&!ja.has(n)}const _a=new Set(["table","td","th"]);function Sa(e){return _a.has(fa(e))}const ka=[":popover-open",":modal"];function Ca(e){return ka.some(t=>{try{return e.matches(t)}catch(s){return!1}})}const Ta=["transform","translate","scale","rotate","perspective"],Ea=["transform","translate","scale","rotate","perspective","filter"],Ra=["paint","layout","strict","content"];function Da(e){const t=Pa(),s=ya(e)?Oa(e):e;return Ta.some(e=>!!s[e]&&"none"!==s[e])||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||Ea.some(e=>(s.willChange||"").includes(e))||Ra.some(e=>(s.contain||"").includes(e))}function Pa(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Ia=new Set(["html","body","#document"]);function Aa(e){return Ia.has(fa(e))}function Oa(e){return ga(e).getComputedStyle(e)}function Ma(e){return ya(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $a(e){if("html"===fa(e))return e;const t=e.assignedSlot||e.parentNode||wa(e)&&e.host||xa(e);return wa(t)?t.host:t}function La(e){const t=$a(e);return Aa(t)?e.ownerDocument?e.ownerDocument.body:e.body:ba(t)&&Na(t)?t:La(t)}function Ua(e,t,s){var a;void 0===t&&(t=[]),void 0===s&&(s=!0);const n=La(e),r=n===(null==(a=e.ownerDocument)?void 0:a.body),i=ga(n);if(r){const e=Fa(i);return t.concat(i,i.visualViewport||[],Na(n)?n:[],e&&s?Ua(e):[])}return t.concat(n,Ua(n,[],s))}function Fa(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qa(e){const t=Oa(e);let s=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const n=ba(e),r=n?e.offsetWidth:s,i=n?e.offsetHeight:a,o=Fs(s)!==r||Fs(a)!==i;return o&&(s=r,a=i),{width:s,height:a,$:o}}function za(e){return ya(e)?e:e.contextElement}function Ba(e){const t=za(e);if(!ba(t))return zs(1);const s=t.getBoundingClientRect(),{width:a,height:n,$:r}=qa(t);let i=(r?Fs(s.width):s.width)/a,o=(r?Fs(s.height):s.height)/n;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const Wa=zs(0);function Ha(e){const t=ga(e);return Pa()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Wa}function Ka(e,t,s,a){void 0===t&&(t=!1),void 0===s&&(s=!1);const n=e.getBoundingClientRect(),r=za(e);let i=zs(1);t&&(a?ya(a)&&(i=Ba(a)):i=Ba(e));const o=function(e,t,s){return void 0===t&&(t=!1),!(!s||t&&s!==ga(e))&&t}(r,s,a)?Ha(r):zs(0);let l=(n.left+o.x)/i.x,c=(n.top+o.y)/i.y,d=n.width/i.x,u=n.height/i.y;if(r){const e=ga(r),t=a&&ya(a)?ga(a):a;let s=e,n=Fa(s);for(;n&&a&&t!==s;){const e=Ba(n),t=n.getBoundingClientRect(),a=Oa(n),r=t.left+(n.clientLeft+parseFloat(a.paddingLeft))*e.x,i=t.top+(n.clientTop+parseFloat(a.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=r,c+=i,s=ga(n),n=Fa(s)}}return la({width:d,height:u,x:l,y:c})}function Ga(e,t){const s=Ma(e).scrollLeft;return t?t.left+s:Ka(xa(e)).left+s}function Va(e,t,s){void 0===s&&(s=!1);const a=e.getBoundingClientRect();return{x:a.left+t.scrollLeft-(s?0:Ga(e,a)),y:a.top+t.scrollTop}}const Ja=new Set(["absolute","fixed"]);function Ya(e,t,s){let a;if("viewport"===t)a=function(e,t){const s=ga(e),a=xa(e),n=s.visualViewport;let r=a.clientWidth,i=a.clientHeight,o=0,l=0;if(n){r=n.width,i=n.height;const e=Pa();(!e||e&&"fixed"===t)&&(o=n.offsetLeft,l=n.offsetTop)}return{width:r,height:i,x:o,y:l}}(e,s);else if("document"===t)a=function(e){const t=xa(e),s=Ma(e),a=e.ownerDocument.body,n=Us(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),r=Us(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let i=-s.scrollLeft+Ga(e);const o=-s.scrollTop;return"rtl"===Oa(a).direction&&(i+=Us(t.clientWidth,a.clientWidth)-n),{width:n,height:r,x:i,y:o}}(xa(e));else if(ya(t))a=function(e,t){const s=Ka(e,!0,"fixed"===t),a=s.top+e.clientTop,n=s.left+e.clientLeft,r=ba(e)?Ba(e):zs(1);return{width:e.clientWidth*r.x,height:e.clientHeight*r.y,x:n*r.x,y:a*r.y}}(t,s);else{const s=Ha(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return la(a)}function Qa(e,t){const s=$a(e);return!(s===t||!ya(s)||Aa(s))&&("fixed"===Oa(s).position||Qa(s,t))}function Xa(e,t,s){const a=ba(t),n=xa(t),r="fixed"===s,i=Ka(e,!0,r,t);let o={scrollLeft:0,scrollTop:0};const l=zs(0);function c(){l.x=Ga(n)}if(a||!a&&!r)if(("body"!==fa(t)||Na(n))&&(o=Ma(t)),a){const e=Ka(t,!0,r,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&c();r&&!a&&n&&c();const d=!n||a||r?zs(0):Va(n,o);return{x:i.left+o.scrollLeft-l.x-d.x,y:i.top+o.scrollTop-l.y-d.y,width:i.width,height:i.height}}function Za(e){return"static"===Oa(e).position}function en(e,t){if(!ba(e)||"fixed"===Oa(e).position)return null;if(t)return t(e);let s=e.offsetParent;return xa(e)===s&&(s=s.ownerDocument.body),s}function tn(e,t){const s=ga(e);if(Ca(e))return s;if(!ba(e)){let t=$a(e);for(;t&&!Aa(t);){if(ya(t)&&!Za(t))return t;t=$a(t)}return s}let a=en(e,t);for(;a&&Sa(a)&&Za(a);)a=en(a,t);return a&&Aa(a)&&Za(a)&&!Da(a)?s:a||function(e){let t=$a(e);for(;ba(t)&&!Aa(t);){if(Da(t))return t;if(Ca(t))return null;t=$a(t)}return null}(e)||s}const sn={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:a,strategy:n}=e;const r="fixed"===n,i=xa(a),o=!!t&&Ca(t.floating);if(a===i||o&&r)return s;let l={scrollLeft:0,scrollTop:0},c=zs(1);const d=zs(0),u=ba(a);if((u||!u&&!r)&&(("body"!==fa(a)||Na(i))&&(l=Ma(a)),ba(a))){const e=Ka(a);c=Ba(a),d.x=e.x+a.clientLeft,d.y=e.y+a.clientTop}const h=!i||u||r?zs(0):Va(i,l,!0);return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:s.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:xa,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:a,strategy:n}=e;const r=[..."clippingAncestors"===s?Ca(t)?[]:function(e,t){const s=t.get(e);if(s)return s;let a=Ua(e,[],!1).filter(e=>ya(e)&&"body"!==fa(e)),n=null;const r="fixed"===Oa(e).position;let i=r?$a(e):e;for(;ya(i)&&!Aa(i);){const t=Oa(i),s=Da(i);s||"fixed"!==t.position||(n=null),(r?!s&&!n:!s&&"static"===t.position&&n&&Ja.has(n.position)||Na(i)&&!s&&Qa(e,i))?a=a.filter(e=>e!==i):n=t,i=$a(i)}return t.set(e,a),a}(t,this._c):[].concat(s),a],i=r[0],o=r.reduce((e,s)=>{const a=Ya(t,s,n);return e.top=Us(a.top,e.top),e.right=Ls(a.right,e.right),e.bottom=Ls(a.bottom,e.bottom),e.left=Us(a.left,e.left),e},Ya(t,i,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:tn,getElementRects:async function(e){const t=this.getOffsetParent||tn,s=this.getDimensions,a=await s(e.floating);return{reference:Xa(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:s}=qa(e);return{width:t,height:s}},getScale:Ba,isElement:ya,isRTL:function(e){return"rtl"===Oa(e).direction}};function an(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function nn(e,t,s,a){void 0===a&&(a={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=a,c=za(e),d=n||r?[...c?Ua(c):[],...Ua(t)]:[];d.forEach(e=>{n&&e.addEventListener("scroll",s,{passive:!0}),r&&e.addEventListener("resize",s)});const u=c&&o?function(e,t){let s,a=null;const n=xa(e);function r(){var e;clearTimeout(s),null==(e=a)||e.disconnect(),a=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),r();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:m}=c;if(o||t(),!h||!m)return;const p={rootMargin:-qs(u)+"px "+-qs(n.clientWidth-(d+h))+"px "+-qs(n.clientHeight-(u+m))+"px "+-qs(d)+"px",threshold:Us(0,Ls(1,l))||1};let f=!0;function g(t){const a=t[0].intersectionRatio;if(a!==l){if(!f)return i();a?i(!1,a):s=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==a||an(c,e.getBoundingClientRect())||i(),f=!1}try{a=new IntersectionObserver(g,{...p,root:n.ownerDocument})}catch(x){a=new IntersectionObserver(g,p)}a.observe(e)}(!0),r}(c,s):null;let h,m=-1,p=null;i&&(p=new ResizeObserver(e=>{let[a]=e;a&&a.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),s()}),c&&!l&&p.observe(c),p.observe(t));let f=l?Ka(e):null;return l&&function t(){const a=Ka(e);f&&!an(f,a)&&s();f=a,h=requestAnimationFrame(t)}(),s(),()=>{var e;d.forEach(e=>{n&&e.removeEventListener("scroll",s),r&&e.removeEventListener("resize",s)}),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const rn=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,a;const{x:n,y:r,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:s,platform:a,elements:n}=e,r=await(null==a.isRTL?void 0:a.isRTL(n.floating)),i=Gs(s),o=Vs(s),l="y"===Xs(s),c=ma.has(i)?-1:1,d=r&&l?-1:1,u=Ks(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(m="end"===o?-1*p:p),l?{x:m*d,y:h*c}:{x:h*c,y:m*d}}(t,e);return i===(null==(s=o.offset)?void 0:s.placement)&&null!=(a=o.arrow)&&a.alignmentOffset?{}:{x:n+l.x,y:r+l.y,data:{...l,placement:i}}}}},on=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:a,placement:n}=t,{mainAxis:r=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}},...l}=Ks(e,t),c={x:s,y:a},d=await da(t,l),u=Xs(Gs(n)),h=Js(u);let m=c[h],p=c[u];if(r){const e="y"===h?"bottom":"right";m=Hs(m+d["y"===h?"top":"left"],m,m-d[e])}if(i){const e="y"===u?"bottom":"right";p=Hs(p+d["y"===u?"top":"left"],p,p-d[e])}const f=o.fn({...t,[h]:m,[u]:p});return{...f,data:{x:f.x-s,y:f.y-a,enabled:{[h]:r,[u]:i}}}}}},ln=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,a;const{placement:n,middlewareData:r,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...g}=Ks(e,t);if(null!=(s=r.arrow)&&s.alignmentOffset)return{};const x=Gs(n),v=Xs(o),y=Gs(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!f?[ia(o)]:function(e){const t=ia(e);return[ea(e),t,ea(t)]}(o)),j="none"!==p;!h&&j&&w.push(...ra(o,f,p,b));const N=[o,...w],_=await da(t,g),S=[];let k=(null==(a=r.flip)?void 0:a.overflows)||[];if(d&&S.push(_[x]),u){const e=function(e,t,s){void 0===s&&(s=!1);const a=Vs(e),n=Zs(e),r=Ys(n);let i="x"===n?a===(s?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=ia(i)),[i,ia(i)]}(n,i,b);S.push(_[e[0]],_[e[1]])}if(k=[...k,{placement:n,overflows:S}],!S.every(e=>e<=0)){var C,T;const e=((null==(C=r.flip)?void 0:C.index)||0)+1,t=N[e];if(t){if(!("alignment"===u&&v!==Xs(t))||k.every(e=>e.overflows[0]>0&&Xs(e.placement)===v))return{data:{index:e,overflows:k},reset:{placement:t}}}let s=null==(T=k.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:T.placement;if(!s)switch(m){case"bestFit":{var E;const e=null==(E=k.filter(e=>{if(j){const t=Xs(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:E[0];e&&(s=e);break}case"initialPlacement":s=o}if(n!==s)return{reset:{placement:s}}}return{}}}},cn=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var s,a;const{placement:n,rects:r,platform:i,elements:o}=t,{apply:l=()=>{},...c}=Ks(e,t),d=await da(t,c),u=Gs(n),h=Vs(n),m="y"===Xs(n),{width:p,height:f}=r.floating;let g,x;"top"===u||"bottom"===u?(g=u,x=h===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(x=u,g="end"===h?"top":"bottom");const v=f-d.top-d.bottom,y=p-d.left-d.right,b=Ls(f-d[g],v),w=Ls(p-d[x],y),j=!t.middlewareData.shift;let N=b,_=w;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(_=y),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(N=v),j&&!h){const e=Us(d.left,0),t=Us(d.right,0),s=Us(d.top,0),a=Us(d.bottom,0);m?_=p-2*(0!==e||0!==t?e+t:Us(d.left,d.right)):N=f-2*(0!==s||0!==a?s+a:Us(d.top,d.bottom))}await l({...t,availableWidth:_,availableHeight:N});const S=await i.getDimensions(o.floating);return p!==S.width||f!==S.height?{reset:{rects:!0}}:{}}}},dn=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:a="referenceHidden",...n}=Ks(e,t);switch(a){case"referenceHidden":{const e=ua(await da(t,{...n,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:ha(e)}}}case"escaped":{const e=ua(await da(t,{...n,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:ha(e)}}}default:return{}}}}},un=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:a,placement:n,rects:r,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=Ks(e,t)||{};if(null==c)return{};const u=oa(d),h={x:s,y:a},m=Zs(n),p=Ys(m),f=await i.getDimensions(c),g="y"===m,x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=r.reference[p]+r.reference[m]-h[m]-r.floating[p],w=h[m]-r.reference[m],j=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let N=j?j[y]:0;N&&await(null==i.isElement?void 0:i.isElement(j))||(N=o.floating[y]||r.floating[p]);const _=b/2-w/2,S=N/2-f[p]/2-1,k=Ls(u[x],S),C=Ls(u[v],S),T=k,E=N-f[p]-C,R=N/2-f[p]/2+_,D=Hs(T,R,E),P=!l.arrow&&null!=Vs(n)&&R!==D&&r.reference[p]/2-(R<T?k:C)-f[p]/2<0,I=P?R<T?R-T:R-E:0;return{[m]:h[m]+I,data:{[m]:D,centerOffset:R-D-I,...P&&{alignmentOffset:I}},reset:P}}}),hn=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:s,y:a,placement:n,rects:r,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Ks(e,t),d={x:s,y:a},u=Xs(n),h=Js(u);let m=d[h],p=d[u];const f=Ks(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const e="y"===h?"height":"width",t=r.reference[h]-r.floating[e]+g.mainAxis,s=r.reference[h]+r.reference[e]-g.mainAxis;m<t?m=t:m>s&&(m=s)}if(c){var x,v;const e="y"===h?"width":"height",t=ma.has(Gs(n)),s=r.reference[u]-r.floating[e]+(t&&(null==(x=i.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),a=r.reference[u]+r.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);p<s?p=s:p>a&&(p=a)}return{[h]:m,[u]:p}}}},mn=(e,t,s)=>{const a=new Map,n={platform:sn,...s},r={...n.platform,_c:a};return(async(e,t,s)=>{const{placement:a="bottom",strategy:n="absolute",middleware:r=[],platform:i}=s,o=r.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:d,y:u}=ca(c,a,l),h=a,m={},p=0;for(let f=0;f<o.length;f++){const{name:s,fn:r}=o[f],{x:g,y:x,data:v,reset:y}=await r({x:d,y:u,initialPlacement:a,placement:h,strategy:n,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,m={...m,[s]:{...m[s],...v}},y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:n}):y.rects),({x:d,y:u}=ca(c,h,l))),f=-1)}return{x:d,y:u,placement:h,strategy:n,middlewareData:m}})(e,t,{...n,platform:r})};var pn="undefined"!=typeof document?s.useLayoutEffect:function(){};function fn(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let s,a,n;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(a=s;0!==a--;)if(!fn(e[a],t[a]))return!1;return!0}if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(a=s;0!==a--;)if(!{}.hasOwnProperty.call(t,n[a]))return!1;for(a=s;0!==a--;){const s=n[a];if(("_owner"!==s||!e.$$typeof)&&!fn(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function gn(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xn(e,t){const s=gn(e);return Math.round(t*s)/s}function vn(e){const t=s.useRef(e);return pn(()=>{t.current=e}),t}const yn=e=>({name:"arrow",options:e,fn(t){const{element:s,padding:a}="function"==typeof e?e(t):e;return s&&(n=s,{}.hasOwnProperty.call(n,"current"))?null!=s.current?un({element:s.current,padding:a}).fn(t):{}:s?un({element:s,padding:a}).fn(t):{};var n}}),bn=(e,t)=>({...rn(e),options:[e,t]}),wn=(e,t)=>({...on(e),options:[e,t]}),jn=(e,t)=>({...hn(e),options:[e,t]}),Nn=(e,t)=>({...ln(e),options:[e,t]}),_n=(e,t)=>({...cn(e),options:[e,t]}),Sn=(e,t)=>({...dn(e),options:[e,t]}),kn=(e,t)=>({...yn(e),options:[e,t]});var Cn=s.forwardRef((e,t)=>{const{children:s,width:a=10,height:n=5,...r}=e;return u.jsx(Ge.svg,{...r,ref:t,width:a,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});Cn.displayName="Arrow";var Tn=Cn;function En(e){const[t,a]=s.useState(void 0);return ot(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const s=t[0];let n,r;if("borderBoxSize"in s){const e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,r=t.blockSize}else n=e.offsetWidth,r=e.offsetHeight;a({width:n,height:r})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),t}var Rn="Popper",[Dn,Pn]=Le(Rn),[In,An]=Dn(Rn),On=e=>{const{__scopePopper:t,children:a}=e,[n,r]=s.useState(null);return u.jsx(In,{scope:t,anchor:n,onAnchorChange:r,children:a})};On.displayName=Rn;var Mn="PopperAnchor",$n=s.forwardRef((e,t)=>{const{__scopePopper:a,virtualRef:n,...r}=e,i=An(Mn,a),o=s.useRef(null),l=$e(t,o);return s.useEffect(()=>{i.onAnchorChange((null==n?void 0:n.current)||o.current)}),n?null:u.jsx(Ge.div,{...r,ref:l})});$n.displayName=Mn;var Ln="PopperContent",[Un,Fn]=Dn(Ln),qn=s.forwardRef((e,t)=>{var a,r,i,o,l,c;const{__scopePopper:d,side:h="bottom",sideOffset:m=0,align:p="center",alignOffset:f=0,arrowPadding:g=0,avoidCollisions:x=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:b="partial",hideWhenDetached:w=!1,updatePositionStrategy:j="optimized",onPlaced:N,..._}=e,S=An(Ln,d),[k,C]=s.useState(null),T=$e(t,e=>C(e)),[E,R]=s.useState(null),D=En(E),P=(null==D?void 0:D.width)??0,I=(null==D?void 0:D.height)??0,A=h+("center"!==p?"-"+p:""),O="number"==typeof y?y:{top:0,right:0,bottom:0,left:0,...y},M=Array.isArray(v)?v:[v],$=M.length>0,L={padding:O,boundary:M.filter(Hn),altBoundary:$},{refs:U,floatingStyles:F,placement:q,isPositioned:z,middlewareData:B}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:u}=e,[h,m]=s.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=s.useState(r);fn(p,r)||f(r);const[g,x]=s.useState(null),[v,y]=s.useState(null),b=s.useCallback(e=>{e!==_.current&&(_.current=e,x(e))},[]),w=s.useCallback(e=>{e!==S.current&&(S.current=e,y(e))},[]),j=o||g,N=l||v,_=s.useRef(null),S=s.useRef(null),k=s.useRef(h),C=null!=d,T=vn(d),E=vn(i),R=vn(u),D=s.useCallback(()=>{if(!_.current||!S.current)return;const e={placement:t,strategy:a,middleware:p};E.current&&(e.platform=E.current),mn(_.current,S.current,e).then(e=>{const t={...e,isPositioned:!1!==R.current};P.current&&!fn(k.current,t)&&(k.current=t,n.flushSync(()=>{m(t)}))})},[p,t,a,E,R]);pn(()=>{!1===u&&k.current.isPositioned&&(k.current.isPositioned=!1,m(e=>({...e,isPositioned:!1})))},[u]);const P=s.useRef(!1);pn(()=>(P.current=!0,()=>{P.current=!1}),[]),pn(()=>{if(j&&(_.current=j),N&&(S.current=N),j&&N){if(T.current)return T.current(j,N,D);D()}},[j,N,D,T,C]);const I=s.useMemo(()=>({reference:_,floating:S,setReference:b,setFloating:w}),[b,w]),A=s.useMemo(()=>({reference:j,floating:N}),[j,N]),O=s.useMemo(()=>{const e={position:a,left:0,top:0};if(!A.floating)return e;const t=xn(A.floating,h.x),s=xn(A.floating,h.y);return c?{...e,transform:"translate("+t+"px, "+s+"px)",...gn(A.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:t,top:s}},[a,c,A.floating,h.x,h.y]);return s.useMemo(()=>({...h,update:D,refs:I,elements:A,floatingStyles:O}),[h,D,I,A,O])}({strategy:"fixed",placement:A,whileElementsMounted:(...e)=>nn(...e,{animationFrame:"always"===j}),elements:{reference:S.anchor},middleware:[bn({mainAxis:m+I,alignmentAxis:f}),x&&wn({mainAxis:!0,crossAxis:!1,limiter:"partial"===b?jn():void 0,...L}),x&&Nn({...L}),_n({...L,apply:({elements:e,rects:t,availableWidth:s,availableHeight:a})=>{const{width:n,height:r}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${s}px`),i.setProperty("--radix-popper-available-height",`${a}px`),i.setProperty("--radix-popper-anchor-width",`${n}px`),i.setProperty("--radix-popper-anchor-height",`${r}px`)}}),E&&kn({element:E,padding:g}),Kn({arrowWidth:P,arrowHeight:I}),w&&Sn({strategy:"referenceHidden",...L})]}),[W,H]=Gn(q),K=Je(N);ot(()=>{z&&(null==K||K())},[z,K]);const G=null==(a=B.arrow)?void 0:a.x,V=null==(r=B.arrow)?void 0:r.y,J=0!==(null==(i=B.arrow)?void 0:i.centerOffset),[Y,Q]=s.useState();return ot(()=>{k&&Q(window.getComputedStyle(k).zIndex)},[k]),u.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:z?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[null==(o=B.transformOrigin)?void 0:o.x,null==(l=B.transformOrigin)?void 0:l.y].join(" "),...(null==(c=B.hide)?void 0:c.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:u.jsx(Un,{scope:d,placedSide:W,onArrowChange:R,arrowX:G,arrowY:V,shouldHideArrow:J,children:u.jsx(Ge.div,{"data-side":W,"data-align":H,..._,ref:T,style:{..._.style,animation:z?void 0:"none"}})})})});qn.displayName=Ln;var zn="PopperArrow",Bn={top:"bottom",right:"left",bottom:"top",left:"right"},Wn=s.forwardRef(function(e,t){const{__scopePopper:s,...a}=e,n=Fn(zn,s),r=Bn[n.placedSide];return u.jsx("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:u.jsx(Tn,{...a,ref:t,style:{...a.style,display:"block"}})})});function Hn(e){return null!==e}Wn.displayName=zn;var Kn=e=>({name:"transformOrigin",options:e,fn(t){var s,a,n;const{placement:r,rects:i,middlewareData:o}=t,l=0!==(null==(s=o.arrow)?void 0:s.centerOffset),c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[u,h]=Gn(r),m={start:"0%",center:"50%",end:"100%"}[h],p=((null==(a=o.arrow)?void 0:a.x)??0)+c/2,f=((null==(n=o.arrow)?void 0:n.y)??0)+d/2;let g="",x="";return"bottom"===u?(g=l?m:`${p}px`,x=-d+"px"):"top"===u?(g=l?m:`${p}px`,x=`${i.floating.height+d}px`):"right"===u?(g=-d+"px",x=l?m:`${f}px`):"left"===u&&(g=`${i.floating.width+d}px`,x=l?m:`${f}px`),{data:{x:g,y:x}}}});function Gn(e){const[t,s="center"]=e.split("-");return[t,s]}var Vn=On,Jn=$n,Yn=qn,Qn=Wn;class Xn extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Zn extends Xn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class er extends Xn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tr extends Xn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var sr,ar;(ar=sr||(sr={})).Any="any",ar.ApNortheast1="ap-northeast-1",ar.ApNortheast2="ap-northeast-2",ar.ApSouth1="ap-south-1",ar.ApSoutheast1="ap-southeast-1",ar.ApSoutheast2="ap-southeast-2",ar.CaCentral1="ca-central-1",ar.EuCentral1="eu-central-1",ar.EuWest1="eu-west-1",ar.EuWest2="eu-west-2",ar.EuWest3="eu-west-3",ar.SaEast1="sa-east-1",ar.UsEast1="us-east-1",ar.UsWest1="us-west-1",ar.UsWest2="us-west-2";var nr=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};class rr{constructor(e,{headers:t={},customFetch:s,region:a=sr.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>_e(async()=>{const{default:e}=await Promise.resolve().then(()=>vr);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return nr(this,void 0,void 0,function*(){try{const{headers:a,method:n,body:r}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),r&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&("undefined"!=typeof Blob&&r instanceof Blob||r instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=r):"string"==typeof r?(i["Content-Type"]="text/plain",c=r):"undefined"!=typeof FormData&&r instanceof FormData?c=r:(i["Content-Type"]="application/json",c=JSON.stringify(r)));const d=yield this.fetch(l.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),a),body:c}).catch(e=>{throw new Zn(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new er(d);if(!d.ok)throw new tr(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(a){return{data:null,error:a,response:a instanceof tr||a instanceof er?a.context:void 0}}})}}var ir={},or={},lr={},cr={},dr={},ur={},hr=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const mr=hr.fetch,pr=hr.fetch.bind(hr),fr=hr.Headers,gr=hr.Request,xr=hr.Response,vr=Object.freeze(Object.defineProperty({__proto__:null,Headers:fr,Request:gr,Response:xr,default:pr,fetch:mr},Symbol.toStringTag,{value:"Module"})),yr=o(vr);var br={};Object.defineProperty(br,"__esModule",{value:!0});let wr=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};br.default=wr;var jr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ur,"__esModule",{value:!0});const Nr=jr(yr),_r=jr(br);ur.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=Nr.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,a;let n=null,r=null,i=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(r="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const a=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");a&&c&&c.length>1&&(i=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(r)&&(r.length>1?(n={code:"PGRST116",details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,i=null,o=406,l="Not Acceptable"):r=1===r.length?r[0]:null)}else{const t=await e.text();try{n=JSON.parse(t),Array.isArray(n)&&404===e.status&&(r=[],n=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):n={message:t}}if(n&&this.isMaybeSingle&&(null===(a=null==n?void 0:n.details)||void 0===a?void 0:a.includes("0 rows"))&&(n=null,o=200,l="OK"),n&&this.shouldThrowOnError)throw new _r.default(n)}return{error:n,data:r,count:i,status:o,statusText:l}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,a;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(a=null==e?void 0:e.code)&&void 0!==a?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var Sr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dr,"__esModule",{value:!0});const kr=Sr(ur);let Cr=class extends kr.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:a,referencedTable:n=a}={}){const r=n?`${n}.order`:"order",i=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const a=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:a=s}={}){const n=void 0===a?"offset":`${a}.offset`,r=void 0===a?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:a=!1,wal:n=!1,format:r="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,a?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};dr.default=Cr;var Tr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cr,"__esModule",{value:!0});const Er=Tr(dr);let Rr=class extends Er.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:a}={}){let n="";"plain"===a?n="pl":"phrase"===a?n="ph":"websearch"===a&&(n="w");const r=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${r}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};cr.default=Rr;var Dr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lr,"__esModule",{value:!0});const Pr=Dr(cr);lr.default=class{constructor(e,{headers:t={},schema:s,fetch:a}){this.url=e,this.headers=t,this.schema=s,this.fetch=a}select(e,{head:t=!1,count:s}={}){const a=t?"HEAD":"GET";let n=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",r),s&&(this.headers.Prefer=`count=${s}`),new Pr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Pr.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:a,defaultToNull:n=!0}={}){const r=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&r.push(this.headers.Prefer),a&&r.push(`count=${a}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Pr.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Pr.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Pr.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Ir={},Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.version=void 0,Ar.version="0.0.0-automated",Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.DEFAULT_HEADERS=void 0;const Or=Ar;Ir.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Or.version}`};var Mr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(or,"__esModule",{value:!0});const $r=Mr(lr),Lr=Mr(cr),Ur=Ir;or.default=class e{constructor(e,{headers:t={},schema:s,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ur.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=a}from(e){const t=new URL(`${this.url}/${e}`);return new $r.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:a=!1,count:n}={}){let r;const i=new URL(`${this.url}/rpc/${e}`);let o;s||a?(r=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{i.searchParams.append(e,t)})):(r="POST",o=t);const l=Object.assign({},this.headers);return n&&(l.Prefer=`count=${n}`),new Lr.default({method:r,url:i,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var Fr=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.PostgrestError=ir.PostgrestBuilder=ir.PostgrestTransformBuilder=ir.PostgrestFilterBuilder=ir.PostgrestQueryBuilder=ir.PostgrestClient=void 0;const qr=Fr(or);ir.PostgrestClient=qr.default;const zr=Fr(lr);ir.PostgrestQueryBuilder=zr.default;const Br=Fr(cr);ir.PostgrestFilterBuilder=Br.default;const Wr=Fr(dr);ir.PostgrestTransformBuilder=Wr.default;const Hr=Fr(ur);ir.PostgrestBuilder=Hr.default;const Kr=Fr(br);ir.PostgrestError=Kr.default;var Gr=ir.default={PostgrestClient:qr.default,PostgrestQueryBuilder:zr.default,PostgrestFilterBuilder:Br.default,PostgrestTransformBuilder:Wr.default,PostgrestBuilder:Hr.default,PostgrestError:Kr.default};const{PostgrestClient:Vr,PostgrestQueryBuilder:Jr,PostgrestFilterBuilder:Yr,PostgrestTransformBuilder:Qr,PostgrestBuilder:Xr,PostgrestError:Zr}=Gr;class ei{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const ti=1e4;var si,ai,ni,ri,ii,oi,li,ci,di,ui,hi;(ai=si||(si={}))[ai.connecting=0]="connecting",ai[ai.open=1]="open",ai[ai.closing=2]="closing",ai[ai.closed=3]="closed",(ri=ni||(ni={})).closed="closed",ri.errored="errored",ri.joined="joined",ri.joining="joining",ri.leaving="leaving",(oi=ii||(ii={})).close="phx_close",oi.error="phx_error",oi.join="phx_join",oi.reply="phx_reply",oi.leave="phx_leave",oi.access_token="access_token",(li||(li={})).websocket="websocket",(di=ci||(ci={})).Connecting="connecting",di.Open="open",di.Closing="closing",di.Closed="closed";class mi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),n=t.getUint8(2);let r=this.HEADER_LENGTH+2;const i=s.decode(e.slice(r,r+a));r+=a;const o=s.decode(e.slice(r,r+n));r+=n;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(r,e.byteLength)))}}}class pi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(hi=ui||(ui={})).abstime="abstime",hi.bool="bool",hi.date="date",hi.daterange="daterange",hi.float4="float4",hi.float8="float8",hi.int2="int2",hi.int4="int4",hi.int4range="int4range",hi.int8="int8",hi.int8range="int8range",hi.json="json",hi.jsonb="jsonb",hi.money="money",hi.numeric="numeric",hi.oid="oid",hi.reltime="reltime",hi.text="text",hi.time="time",hi.timestamp="timestamp",hi.timestamptz="timestamptz",hi.timetz="timetz",hi.tsrange="tsrange",hi.tstzrange="tstzrange";const fi=(e,t,s={})=>{var a;const n=null!==(a=s.skipTypes)&&void 0!==a?a:[];return Object.keys(t).reduce((s,a)=>(s[a]=gi(a,e,t,n),s),{})},gi=(e,t,s,a)=>{const n=t.find(t=>t.name===e),r=null==n?void 0:n.type,i=s[e];return r&&!a.includes(r)?xi(r,i):vi(i)},xi=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return ji(t,s)}switch(e){case ui.bool:return yi(t);case ui.float4:case ui.float8:case ui.int2:case ui.int4:case ui.int8:case ui.numeric:case ui.oid:return bi(t);case ui.json:case ui.jsonb:return wi(t);case ui.timestamp:return Ni(t);case ui.abstime:case ui.date:case ui.daterange:case ui.int4range:case ui.int8range:case ui.money:case ui.reltime:case ui.text:case ui.time:case ui.timestamptz:case ui.timetz:case ui.tsrange:case ui.tstzrange:default:return vi(t)}},vi=e=>e,yi=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},bi=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},wi=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},ji=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,a=e[s];if("{"===e[0]&&"}"===a){let a;const r=e.slice(1,s);try{a=JSON.parse("["+r+"]")}catch(n){a=r?r.split(","):[]}return a.map(e=>xi(t,e))}return e},Ni=e=>"string"==typeof e?e.replace(" ","T"):e,_i=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Si{constructor(e,t,s={},a=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ki,Ci,Ti,Ei,Ri,Di,Pi,Ii;(Ci=ki||(ki={})).SYNC="sync",Ci.JOIN="join",Ci.LEAVE="leave";class Ai{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ai.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=Ai.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ai.syncDiff(this.state,e,t,s),a())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const n=this.cloneDeep(e),r=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{r[e]||(o[e]=t)}),this.map(r,(e,t)=>{const s=n[e];if(s){const a=t.map(e=>e.presence_ref),n=s.map(e=>e.presence_ref),r=t.filter(e=>n.indexOf(e.presence_ref)<0),l=s.filter(e=>a.indexOf(e.presence_ref)<0);r.length>0&&(i[e]=r),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},s,a)}static syncDiff(e,t,s,a){const{joins:n,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(n,(t,a)=>{var n;const r=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(a),r.length>0){const s=e[t].map(e=>e.presence_ref),a=r.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...a)}s(t,r,a)}),this.map(r,(t,s)=>{let n=e[t];if(!n)return;const r=s.map(e=>e.presence_ref);n=n.filter(e=>r.indexOf(e.presence_ref)<0),e[t]=n,a(t,n,s),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return t[s]="metas"in a?a.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Ei=Ti||(Ti={})).ALL="*",Ei.INSERT="INSERT",Ei.UPDATE="UPDATE",Ei.DELETE="DELETE",(Di=Ri||(Ri={})).BROADCAST="broadcast",Di.PRESENCE="presence",Di.POSTGRES_CHANGES="postgres_changes",Di.SYSTEM="system",(Ii=Pi||(Pi={})).SUBSCRIBED="SUBSCRIBED",Ii.TIMED_OUT="TIMED_OUT",Ii.CLOSED="CLOSED",Ii.CHANNEL_ERROR="CHANNEL_ERROR";class Oi{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ni.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Si(this,ii.join,this.params,this.timeout),this.rejoinTimer=new pi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ni.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ni.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=ni.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ni.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=ni.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ii.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Ai(this),this.broadcastEndpointURL=_i(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ni.closed){const{config:{broadcast:n,presence:r,private:i}}=this.params,o=null!==(a=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==a?a:[],l=!!this.bindings[Ri.PRESENCE]&&this.bindings[Ri.PRESENCE].length>0,c={},d={broadcast:n,presence:Object.assign(Object.assign({},r),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Pi.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Pi.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const a=this.bindings.postgres_changes,n=null!==(s=null==a?void 0:a.length)&&void 0!==s?s:0,r=[];for(let s=0;s<n;s++){const n=a[s],{filter:{event:i,schema:o,table:l,filter:c}}=n,d=t&&t[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=ni.errored,void(null==e||e(Pi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=r,void(e&&e(Pi.SUBSCRIBED))}null==e||e(Pi.SUBSCRIBED)}).receive("error",t=>{this.state=ni.errored,null==e||e(Pi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Pi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===ni.joined&&e===Ri.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var a,n,r;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(n=null===(a=this.params)||void 0===a?void 0:a.config)||void 0===n?void 0:n.broadcast)||void 0===r?void 0:r.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:r,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(a=e.body)||void 0===a?void 0:a.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ni.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ii.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Si(this,ii.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ni.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,n=setTimeout(()=>a.abort(),s),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(n),r}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Si(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,n;const r=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=ii;if(s&&[i,o,l,c].indexOf(r)>=0&&s!==this._joinRef())return;let d=this._onMessage(r,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(a=this.bindings.postgres_changes)||void 0===a||a.filter(e=>{var t,s,a;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(a=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase())===r}).map(e=>e.callback(d,s)):null===(n=this.bindings[r])||void 0===n||n.filter(e=>{var s,a,n,i,o,l;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return r&&(null===(a=t.ids)||void 0===a?void 0:a.includes(r))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:a,type:n,errors:r}=e,i={schema:t,table:s,commit_timestamp:a,eventType:n,new:{},old:{},errors:r};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===ni.closed}_isJoined(){return this.state===ni.joined}_isJoining(){return this.state===ni.joining}_isLeaving(){return this.state===ni.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),n={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(n):this.bindings[a]=[n],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var a;return!((null===(a=e.type)||void 0===a?void 0:a.toLocaleLowerCase())===s&&Oi.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ii.close,{},e)}_onError(e){this._on(ii.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ni.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=fi(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=fi(e.columns,e.old_record)),t}}const Mi=()=>{},$i=25e3,Li=10,Ui=100,Fi=[1e3,2e3,5e3,1e4];class qi{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ti,this.transport=null,this.heartbeatIntervalMs=$i,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Mi,this.ref=0,this.reconnectTimer=null,this.logger=Mi,this.conn=null,this.sendBuffer=[],this.serializer=new mi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>_e(async()=>{const{default:e}=await Promise.resolve().then(()=>vr);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${li.websocket}`,this.httpEndpoint=_i(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ei.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case si.connecting:return ci.Connecting;case si.open:return ci.Open;case si.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(e=>e.topic===s);if(a)return a;{const s=new Oi(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:a,ref:n}=e,r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${n})`,a),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Ui);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:a,ref:n}=e,r=n?`(${n})`:"",i=a.status||"";this.log("receive",`${i} ${t} ${s} ${r}`.trim(),a),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,a,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ii.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(ii.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new pi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Li)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,n,r,i,o,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:ti,this.heartbeatIntervalMs=null!==(a=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==a?a:$i,this.worker=null!==(n=null==e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(r=null==e?void 0:e.accessToken)&&void 0!==r?r:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>Fi[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class zi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Bi(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Wi extends zi{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hi extends zi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ki=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};const Gi=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>_e(async()=>{const{default:e}=await Promise.resolve().then(()=>vr);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Vi=e=>{if(Array.isArray(e))return e.map(e=>Vi(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const a=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=Vi(s)}),t};var Ji=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};const Yi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qi=(e,t,s)=>Ji(void 0,void 0,void 0,function*(){const a=yield Ki(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield _e(()=>Promise.resolve().then(()=>vr),void 0)).Response:Response});e instanceof a&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const a=e.status||500,n=(null==s?void 0:s.statusCode)||a+"";t(new Wi(Yi(s),a,n))}).catch(e=>{t(new Hi(Yi(e),e))}):t(new Hi(Yi(e),e))}),Xi=(e,t,s,a)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&a?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(a)?(n.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n.body=JSON.stringify(a)):n.body=a,(null==t?void 0:t.duplex)&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),s)):n};function Zi(e,t,s,a,n,r){return Ji(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,Xi(t,a,n,r)).then(e=>{if(!e.ok)throw e;return(null==a?void 0:a.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Qi(e,o,a))})})}function eo(e,t,s,a){return Ji(this,void 0,void 0,function*(){return Zi(e,"GET",t,s,a)})}function to(e,t,s,a,n){return Ji(this,void 0,void 0,function*(){return Zi(e,"POST",t,a,n,s)})}function so(e,t,s,a,n){return Ji(this,void 0,void 0,function*(){return Zi(e,"PUT",t,a,n,s)})}function ao(e,t,s,a,n){return Ji(this,void 0,void 0,function*(){return Zi(e,"DELETE",t,a,n,s)})}var no=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};const ro={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},io={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class oo{constructor(e,t={},s,a){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Gi(a)}uploadOrUpdate(e,t,s,a){return no(this,void 0,void 0,function*(){try{let n;const r=Object.assign(Object.assign({},io),a);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const o=r.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(n=new FormData,n.append("cacheControl",r.cacheControl),o&&n.append("metadata",this.encodeMetadata(o)),n.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(n=s,n.append("cacheControl",r.cacheControl),o&&n.append("metadata",this.encodeMetadata(o))):(n=s,i["cache-control"]=`max-age=${r.cacheControl}`,i["content-type"]=r.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==a?void 0:a.headers)&&(i=Object.assign(Object.assign({},i),a.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?so:to)(this.fetch,`${this.url}/object/${c}`,n,Object.assign({headers:i},(null==r?void 0:r.duplex)?{duplex:r.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(n){if(Bi(n))return{data:null,error:n};throw n}})}upload(e,t,s){return no(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return no(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),r=this._getFinalPath(n),i=new URL(this.url+`/object/upload/sign/${r}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:io.upsert},a),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,r["cache-control"]=`max-age=${t.cacheControl}`,r["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield so(this.fetch,i.toString(),e,{headers:r})).Key},error:null}}catch(o){if(Bi(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return no(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(a["x-upsert"]="true");const n=yield to(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),r=new URL(this.url+n.url),i=r.searchParams.get("token");if(!i)throw new zi("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(s){if(Bi(s))return{data:null,error:s};throw s}})}update(e,t,s){return no(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return no(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Bi(a))return{data:null,error:a};throw a}})}copy(e,t,s){return no(this,void 0,void 0,function*(){try{return{data:{path:(yield to(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Bi(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return no(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),n=yield to(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const r=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${r}`)},{data:n,error:null}}catch(a){if(Bi(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return no(this,void 0,void 0,function*(){try{const a=yield to(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:a.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${n}`):null})),error:null}}catch(a){if(Bi(a))return{data:null,error:a};throw a}})}download(e,t){return no(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),n=a?`?${a}`:"";try{const t=this._getFinalPath(e),a=yield eo(this.fetch,`${this.url}/${s}/${t}${n}`,{headers:this.headers,noResolveJson:!0});return{data:yield a.blob(),error:null}}catch(r){if(Bi(r))return{data:null,error:r};throw r}})}info(e){return no(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield eo(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Vi(e),error:null}}catch(s){if(Bi(s))return{data:null,error:s};throw s}})}exists(e){return no(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,a){return Ji(this,void 0,void 0,function*(){return Zi(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Bi(s)&&s instanceof Hi){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],n=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==n&&a.push(n);const r=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&a.push(i);let o=a.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${s}${o}`)}}}remove(e){return no(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Bi(t))return{data:null,error:t};throw t}})}list(e,t,s){return no(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},ro),t),{prefix:e||""});return{data:yield to(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(Bi(a))return{data:null,error:a};throw a}})}listV2(e,t){return no(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield to(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(Bi(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const lo={"X-Client-Info":"storage-js/2.11.0"};var co=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};class uo{constructor(e,t={},s,a){const n=new URL(e);if(null==a?void 0:a.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href,this.headers=Object.assign(Object.assign({},lo),t),this.fetch=Gi(s)}listBuckets(){return co(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Bi(e))return{data:null,error:e};throw e}})}getBucket(e){return co(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Bi(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return co(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Bi(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return co(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Bi(s))return{data:null,error:s};throw s}})}emptyBucket(e){return co(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Bi(t))return{data:null,error:t};throw t}})}deleteBucket(e){return co(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Bi(t))return{data:null,error:t};throw t}})}}class ho extends uo{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new oo(this.url,this.headers,e,this.fetch)}}let mo="";mo="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const po={headers:{"X-Client-Info":`supabase-js-${mo}/2.55.0`}},fo={schema:"public"},go={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xo={};var vo=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};const yo=(e,t,s)=>{const a=(e=>{let t;return t=e||("undefined"==typeof fetch?pr:fetch),(...e)=>t(...e)})(s),n="undefined"==typeof Headers?fr:Headers;return(s,r)=>vo(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new n(null==r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),a(s,Object.assign(Object.assign({},r),{headers:l}))})};var bo=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};const wo="2.71.1",jo=3e4,No=9e4,_o={"X-Client-Info":`gotrue-js/${wo}`},So="X-Supabase-Api-Version",ko={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Co=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class To extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Eo(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Ro extends To{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class Do extends To{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Po extends To{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Io extends Po{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ao extends Po{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oo extends Po{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mo extends Po{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $o extends Po{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lo extends Po{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Uo(e){return Eo(e)&&"AuthRetryableFetchError"===e.name}class Fo extends Po{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class qo extends Po{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bo=" \t\n\r=".split(""),Wo=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Bo.length;t+=1)e[Bo[t].charCodeAt(0)]=-2;for(let t=0;t<zo.length;t+=1)e[zo[t].charCodeAt(0)]=t;return e})();function Ho(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(zo[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(zo[e]),t.queuedBits-=6}}function Ko(e,t,s){const a=Wo[e];if(!(a>-1)){if(-2===a)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Go(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},r=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,a,s)};for(let i=0;i<e.length;i+=1)Ko(e.charCodeAt(i),n,r);return t.join("")}function Vo(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Jo(e){const t=[],s={queue:0,queuedBits:0},a=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)Ko(e.charCodeAt(n),s,a);return new Uint8Array(t)}function Yo(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let a=e.charCodeAt(s);if(a>55295&&a<=56319){const t=1024*(a-55296)&65535;a=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Vo(a,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Qo(e){const t=[],s={queue:0,queuedBits:0},a=e=>{t.push(e)};return e.forEach(e=>Ho(e,s,a)),Ho(null,s,a),t.join("")}const Xo=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Zo={tested:!1,writable:!1},el=()=>{if(!Xo())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Zo.tested)return Zo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Zo.tested=!0,Zo.writable=!0}catch(t){Zo.tested=!0,Zo.writable=!1}return Zo.writable};const tl=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>_e(async()=>{const{default:e}=await Promise.resolve().then(()=>vr);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},sl=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},al=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(a){return s}},nl=async(e,t)=>{await e.removeItem(t)};class rl{constructor(){this.promise=new rl.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function il(e){const t=e.split(".");if(3!==t.length)throw new qo("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Co.test(t[s]))throw new qo("JWT not in base64url format");return{header:JSON.parse(Go(t[0])),payload:JSON.parse(Go(t[1])),signature:Jo(t[2]),raw:{header:t[0],payload:t[1]}}}function ol(e){return("0"+e.toString(16)).substr(-2)}async function ll(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cl(e,t,s=!1){const a=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let a=0;a<56;a++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,ol).join("")}();let n=a;s&&(n+="/PASSWORD_RECOVERY"),await sl(e,`${t}-code-verifier`,n);const r=await ll(a);return[r,a===r?"plain":"s256"]}rl.promiseConstructor=Promise;const dl=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const ul=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hl(e){if(!ul.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ml(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pl(e){return JSON.parse(JSON.stringify(e))}const fl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gl=[502,503,504];async function xl(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new Lo(fl(e),0);if(gl.includes(e.status))throw new Lo(fl(e),e.status);let a,n;try{a=await e.json()}catch(i){throw new Do(fl(i),i)}const r=function(e){const t=e.headers.get(So);if(!t)return null;if(!t.match(dl))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(r&&r.getTime()>=ko.timestamp&&"object"==typeof a&&a&&"string"==typeof a.code?n=a.code:"object"==typeof a&&a&&"string"==typeof a.error_code&&(n=a.error_code),n){if("weak_password"===n)throw new Fo(fl(a),e.status,(null===(t=a.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new Io}else if("object"==typeof a&&a&&"object"==typeof a.weak_password&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Fo(fl(a),e.status,a.weak_password.reasons);throw new Ro(fl(a),e.status||500,n)}async function vl(e,t,s,a){var n;const r=Object.assign({},null==a?void 0:a.headers);r[So]||(r[So]=ko.name),(null==a?void 0:a.jwt)&&(r.Authorization=`Bearer ${a.jwt}`);const i=null!==(n=null==a?void 0:a.query)&&void 0!==n?n:{};(null==a?void 0:a.redirectTo)&&(i.redirect_to=a.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,s,a,n,r){const i=((e,t,s,a)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),s))})(t,a,n,r);let o;try{o=await e(s,Object.assign({},i))}catch(l){throw new Lo(fl(l),0)}o.ok||await xl(o);if(null==a?void 0:a.noResolveJson)return o;try{return await o.json()}catch(l){await xl(l)}}(e,t,s+o,{headers:r,noResolveJson:null==a?void 0:a.noResolveJson},{},null==a?void 0:a.body);return(null==a?void 0:a.xform)?null==a?void 0:a.xform(l):{data:Object.assign({},l),error:null}}function yl(e){var t;let s=null;var a;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(a=e.expires_in,Math.round(Date.now()/1e3)+a)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function bl(e){const t=yl(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function wl(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function jl(e){return{data:e,error:null}}function Nl(e){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:r}=e,i=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:r},user:Object.assign({},i)},error:null}}function _l(e){return e}const Sl=["global","local","others"];class kl{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=tl(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Sl[0]){if(Sl.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sl.join(", ")}`);try{return await vl(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Eo(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await vl(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:wl})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=null==s?void 0:s.newEmail,delete a.newEmail),await vl(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Nl,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Eo(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await vl(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wl})}catch(t){if(Eo(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,n,r,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await vl(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(n=null===(a=null==e?void 0:e.perPage)||void 0===a?void 0:a.toString())&&void 0!==n?n:""},xform:_l});if(c.error)throw c.error;const d=await c.json(),u=null!==(r=c.headers.get("x-total-count"))&&void 0!==r?r:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Eo(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){hl(e);try{return await vl(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wl})}catch(t){if(Eo(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){hl(e);try{return await vl(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:wl})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){hl(e);try{return await vl(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:wl})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){hl(e.userId);try{const{data:t,error:s}=await vl(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _deleteFactor(e){hl(e.userId),hl(e.id);try{return{data:await vl(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Eo(t))return{data:null,error:t};throw t}}}function Cl(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Tl=!!(globalThis&&el()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class El extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Rl extends El{}async function Dl(e,t,s){const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async a=>{if(!a){if(0===t)throw new Rl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Tl)try{await globalThis.navigator.locks.query()}catch(n){}return await s()}try{return await s()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Pl={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_o,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Il(e,t,s){return await s()}const Al={};class Ol{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ol.nextInstanceID,Ol.nextInstanceID+=1,this.instanceID>0&&Xo();const a=Object.assign(Object.assign({},Pl),e);if(this.logDebugMessages=!!a.debug,"function"==typeof a.debug&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new kl({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=tl(a.fetch),this.lock=a.lock||Il,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Xo()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Dl:this.lock=Il,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:el()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cl(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Cl(this.memoryStorage)),Xo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Al[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Al[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${wo}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(a){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Xo()&&this.detectSessionInUrl&&"none"!==s){const{data:a,error:n}=await this._getSessionFromURL(t,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return Eo(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}const{session:r,redirectType:i}=a;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Eo(t)?{error:t}:{error:new Do("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const n=await vl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.captchaToken}},xform:yl}),{data:r,error:i}=n;if(i||!r)return{data:{user:null,session:null},error:i};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Eo(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,s,a;try{let n;if("email"in e){const{email:s,password:a,options:r}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await cl(this.storage,this.storageKey)),n=await vl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==r?void 0:r.emailRedirectTo,body:{email:s,password:a,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},xform:yl})}else{if(!("phone"in e))throw new Oo("You must provide either an email or phone number and a password");{const{phone:t,password:r,options:i}=e;n=await vl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:r,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(a=null==i?void 0:i.channel)&&void 0!==a?a:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:yl})}}const{data:r,error:i}=n;if(i||!r)return{data:{user:null,session:null},error:i};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Eo(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:n}=e;t=await vl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:bl})}else{if(!("phone"in e))throw new Oo("You must provide either an email or phone number and a password");{const{phone:s,password:a,options:n}=e;t=await vl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:bl})}}const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a}):{data:{user:null,session:null},error:new Ao}}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,a,n,r,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(Xo())if("object"==typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${v.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(a=null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==a?a:(new Date).toISOString()}`,...(null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await vl(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Qo(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:yl});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new Ao}}catch(f){if(Eo(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await al(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(null!=t?t:"").split("/");try{const{data:t,error:n}=await vl(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:yl});if(await nl(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=a?a:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new Ao}}catch(n){if(Eo(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:n,nonce:r}=e,i=await vl(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:n,nonce:r,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:yl}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ao}}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,n,r;try{if("email"in e){const{email:a,options:n}=e;let r=null,i=null;"pkce"===this.flowType&&([r,i]=await cl(this.storage,this.storageKey));const{error:o}=await vl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:r,code_challenge_method:i},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=await vl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(a=null==s?void 0:s.data)&&void 0!==a?a:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(r=null==s?void 0:s.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new Oo("You must provide either an email or phone number.")}catch(i){if(Eo(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,s;try{let a,n;"options"in e&&(a=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:r,error:i}=await vl(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:a,xform:yl});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,l=r.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Eo(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let n=null,r=null;return"pkce"===this.flowType&&([n,r]=await cl(this.storage,this.storageKey)),await vl(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:r}),headers:this.headers,xform:jl})}catch(n){if(Eo(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Io;const{error:a}=await vl(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Eo(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:n}=e,{error:r}=await vl(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:s,type:a,options:n}=e,{data:r,error:i}=await vl(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null==r?void 0:r.message_id},error:i}}throw new Oo("You must provide either an email or phone number and a type")}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await al(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<No;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await al(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=ml()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,a)=>(t||"user"!==s||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,a))})}return{data:{session:e},error:null}}const{session:a,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await vl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wl}):await this._useSession(async e=>{var t,s,a;const{data:n,error:r}=e;if(r)throw r;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await vl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(a=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0,xform:wl}):{data:{user:null},error:new Io}})}catch(t){if(Eo(t))return function(e){return Eo(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await nl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:n}=s;if(n)throw n;if(!a.session)throw new Io;const r=a.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await cl(this.storage,this.storageKey));const{data:l,error:c}=await vl(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:r.access_token,xform:wl});if(c)throw c;return r.user=l.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(s){if(Eo(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Io;const t=Date.now()/1e3;let s=t,a=!0,n=null;const{payload:r}=il(e.access_token);if(r.exp&&(s=r.exp,a=s<=t),a){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:a,error:r}=await this._getUser(e.access_token);if(r)throw r;n={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(Eo(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:n}=t;if(n)throw n;e=null!==(s=a.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new Io;const{session:a,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Eo(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Xo())throw new Mo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new $o("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Mo("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $o("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const a=new URL(window.location.href);return a.searchParams.delete("code"),window.history.replaceState(window.history.state,"",a.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:n,refresh_token:r,expires_in:i,expires_at:o,token_type:l}=e;if(!(n&&i&&r&&l))throw new Mo("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const{data:h,error:m}=await this._getUser(n);if(m)throw m;const p={provider_token:s,provider_refresh_token:a,access_token:n,expires_in:d,expires_at:u,refresh_token:r,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if(Eo(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await al(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:n}=t;if(n)return{error:n};const r=null===(s=a.session)||void 0===s?void 0:s.access_token;if(r){const{error:t}=await this.admin.signOut(r,e);if(t&&(!function(e){return Eo(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await nl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:a},error:n}=t;if(n)throw n;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(n){await(null===(a=this.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;"pkce"===this.flowType&&([s,a]=await cl(this.storage,this.storageKey,!0));try{return await vl(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(Eo(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:a}=await this._useSession(async t=>{var s,a,n,r,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(a=e.options)||void 0===a?void 0:a.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await vl(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==i?i:void 0})});if(a)throw a;return Xo()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(Eo(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:n,error:r}=t;if(r)throw r;return await vl(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(a=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await vl(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yl})),a=(e,t)=>{const s=200*Math.pow(2,e);return t&&Uo(t)&&Date.now()+s-n<jo},new Promise((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await s(r);if(!a(r,null,t))return void e(t)}catch(n){if(!a(r,n))return void t(n)}})()}))}catch(n){if(this._debug(t,"error",n),Eo(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}var s,a}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Xo()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await al(this.storage,this.storageKey);if(n&&this.userStorage){let t=await al(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},await sl(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:ml()}else if(n&&!n.user&&!n.user){const e=await al(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(n.user=e.user,await nl(this.storage,this.storageKey+"-user"),await sl(this.storage,this.storageKey,n)):n.user=ml()}if(this._debug(s,"session from storage",n),!this._isValidSession(n))return this._debug(s,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<No;if(this._debug(s,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(Uo(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(n.access_token);!t&&(null==e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return void this._debug(s,"error",n)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Io;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new rl;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new Io;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const a={session:t.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(n){if(this._debug(a,"error",n),Eo(n)){const e={session:null,error:n};return Uo(n)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],n=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(n){a.push(n)}});if(await Promise.all(n),a.length>0){for(let e=0;e<a.length;e+=1);throw a[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await sl(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const a=pl(e);await sl(this.storage,this.storageKey,a)}else{const e=pl(t);await sl(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await nl(this.storage,this.storageKey),await nl(this.storage,this.storageKey+"-code-verifier"),await nl(this.storage,this.storageKey+"-user"),this.userStorage&&await nl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xo()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jo);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-t)/jo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof El))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xo()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await cl(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});a.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);a.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:n}=t;return n?{data:null,error:n}:await vl(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:n,error:r}=t;if(r)return{data:null,error:r};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await vl(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(a=null==o?void 0:o.totp)||void 0===a?void 0:a.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:n}=t;if(n)return{data:null,error:n};const{data:r,error:i}=await vl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:i})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:n}=t;return n?{data:null,error:n}:await vl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Eo(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],a=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:a,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:n}=e;if(n)return{data:null,error:n};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=il(a.access_token);let i=null;r.aal&&(i=r.aal);let o=i;(null!==(s=null===(t=a.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:r.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>a)return s;const{data:n,error:r}=await vl(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=a,s=n.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:a,payload:n,signature:r,raw:{header:i,payload:o}}=il(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(a.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:n,header:a,signature:r},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,r,Yo(`${i}.${o}`))))throw new qo("Invalid JWT signature");return{data:{claims:n,header:a,signature:r},error:null}}catch(s){if(Eo(s))return{data:null,error:s};throw s}}}Ol.nextInstanceID=0;const Ml=Ol;class $l extends Ml{constructor(e){super(e)}}var Ll=function(e,t,s,a){return new(s||(s=Promise))(function(n,r){function i(e){try{l(a.next(e))}catch(t){r(t)}}function o(e){try{l(a.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((a=a.apply(e,t||[])).next())})};class Ul{constructor(e,t,s){var a,n,r;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,a;const{db:n,auth:r,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(a=null==o?void 0:o.headers)&&void 0!==a?a:{})}),accessToken:()=>bo(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:fo,realtime:xo,auth:Object.assign(Object.assign({},go),{storageKey:c}),global:po});this.storageKey=null!==(a=d.auth.storageKey)&&void 0!==a?a:"",this.headers=null!==(n=d.global.headers)&&void 0!==n?n:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(r=d.auth)&&void 0!==r?r:{},this.headers,d.global.fetch),this.fetch=yo(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Vr(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ho(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new rr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ll(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,storageKey:n,flowType:r,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $l({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,flowType:r,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qi(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}const Fl=(e,t,s)=>new Ul(e,t,s);!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const ql=(e,t)=>{var s,a;if("undefined"!=typeof window)return t;try{return(null==(a=null==(s=import.meta)?void 0:s.env)?void 0:a[e])||t}catch{return t}},zl=ql("VITE_SUPABASE_URL","https://wctkikgmncnunntsiqdu.supabase.co"),Bl=ql("VITE_SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjdGtpa2dtbmNudW5udHNpcWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDYyMjAsImV4cCI6MjA1MDg4MjIyMH0.C3_pEe3yOI0-eMTgejBDr_R4HJH6lAXdcMmBJUgYCmw"),Wl=Fl(zl,Bl),Hl=["users","claims","consultations","quotes","payments","activities","diaspora_requests","outsourcing_requests","resources"],Kl=async()=>{try{const e=await(async()=>{var e,t;const s=[],a=[];sessionStorage.getItem("db-table-check-logged")||sessionStorage.setItem("db-table-check-logged","true");for(const i of Hl)try{const{error:n}=await Wl.from(i).select("id",{count:"exact",head:!0}).limit(0);n?(a.push(i),(null==(e=n.message)?void 0:e.includes("relation"))||(null==(t=n.message)?void 0:t.includes("does not exist"))||sessionStorage.getItem(`${i}-error-logged`)||sessionStorage.setItem(`${i}-error-logged`,"true")):(s.push(i),sessionStorage.getItem(`${i}-success-logged`)||sessionStorage.setItem(`${i}-success-logged`,"true"))}catch(r){a.push(i),sessionStorage.getItem(`${i}-exception-logged`)||sessionStorage.setItem(`${i}-exception-logged`,"true")}const n=s.length>=5;return{success:n,existingTables:s,missingTables:a,message:n?`Database ready: ${s.length}/${Hl.length} tables accessible`:`Database needs setup: ${a.length} tables missing. Run the SQL setup script.`}})();return e.success?(await(async()=>{try{sessionStorage.getItem("sample-data-logged")||sessionStorage.setItem("sample-data-logged","true");try{const{error:e}=await Wl.from("users").upsert({id:"sample-user-id",email:"admin@galloways.com",full_name:"System Admin",created_at:(new Date).toISOString()})}catch(e){}return{success:!0,message:"Sample data creation attempted"}}catch(t){return{success:!1,message:"Failed to create sample data"}}})(),{success:!0,message:`Database ready! ${e.existingTables.length} tables accessible.`}):(sessionStorage.getItem("db-setup-warning-shown")||sessionStorage.setItem("db-setup-warning-shown","true"),{success:!1,message:"Demo mode active - run SQL setup script for live data."})}catch(e){return{success:!1,message:"Demo mode - database offline"}}};"undefined"!=typeof window&&Kl().then(e=>{e.success}).catch(e=>{});let Gl=!1;(async()=>{if(!Gl){Gl=!0;try{await Kl()}catch(e){}}})();const Vl=(e,t)=>{var s,a;if("undefined"!=typeof window)return t;try{return(null==(a=null==(s=import.meta)?void 0:s.env)?void 0:a[e])||t}catch{return t}};let Jl=null;const Yl=(()=>{if(Jl)return Jl;const e=Vl("VITE_SUPABASE_URL","https://wctkikgmncnunntsiqdu.supabase.co"),t=Vl("VITE_SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjdGtpa2dtbmNudW5udHNpcWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDYyMjAsImV4cCI6MjA1MDg4MjIyMH0.C3_pEe3yOI0-eMTgejBDr_R4HJH6lAXdcMmBJUgYCmw");return Jl=Fl(e,t,{auth:{persistSession:!1,storageKey:"galloways-single-auth-v2",autoRefreshToken:!1,detectSessionInUrl:!1,storage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{}}},realtime:{params:{eventsPerSecond:2},heartbeatIntervalMs:6e4,reconnectAfterMs:()=>3e4},global:{headers:{"X-Client-Info":"galloways-admin-v2"}}}),Jl})(),Ql=async()=>{try{const{data:e,error:t}=await Yl.from("claims").select("count",{count:"exact",head:!0});t&&(t.message.includes('relation "claims" does not exist')||t.message.includes("Invalid API key"))}catch(e){}try{const e={client_name:"DIAGNOSTIC TEST",email:"diagnostic@test.com",phone:"+1234567890",claim_type:"Test",description:"Diagnostic test claim",estimated_loss:100,amount:100,status:"pending"},{data:t,error:s}=await Yl.from("claims").insert([e]).select();s||await Yl.from("claims").delete().eq("client_name","DIAGNOSTIC TEST")}catch(e){}},Xl=async(e,t="operation",s=1)=>{var a,n,r,i,o,l,c;for(let u=0;u<=s;u++)try{const t=await e();if(t.error){if("PGRST116"===t.error.code||(null==(a=t.error.message)?void 0:a.includes("relation"))||null==(n=t.error.message)||n.includes("does not exist"),(null==(r=t.error.message)?void 0:r.includes("Invalid API key"))||(null==(i=t.error.message)?void 0:i.includes("JWT")))throw new Error("Database authentication failed");if(u<s&&!(null==(o=t.error.message)?void 0:o.includes("Invalid API key"))){await new Promise(e=>setTimeout(e,2e3));continue}throw t.error}return{success:!0,data:t.data,count:t.count}}catch(d){if(u<s&&!(null==(l=d.message)?void 0:l.includes("authentication"))&&!(null==(c=d.message)?void 0:c.includes("Invalid API key"))){await new Promise(e=>setTimeout(e,2e3));continue}return{success:!1,error:d.message}}return{success:!1,error:`Failed after ${s+1} attempts`}},Zl=async e=>{var t,s;try{const{error:a}=await Yl.from("activities").insert(e);a&&!(null==(t=a.message)?void 0:t.includes("401"))&&(null==(s=a.message)||s.includes('relation "activities" does not exist'))}catch(a){}},ec=async(e,t,s)=>{const a=t.get("file"),n={};t.forEach((e,t)=>{"file"!==t&&(n[t]=e)}),a&&(n.file_url=await(async(e,t)=>{const s=e.name.split(".").pop(),a=`${t}/${Date.now()}-${Math.random().toString(36).substring(2)}.${s}`,{error:n}=await Yl.storage.from("files").upload(a,e,{cacheControl:"3600",upsert:!1});if(n)throw n;const{data:r}=Yl.storage.from("files").getPublicUrl(a);return r.publicUrl})(a,s),n.file_name=a.name,n.file_size=a.size,n.file_type=a.type);const{data:r,error:i}=await Yl.from(e).insert(n).select().single();if(i)throw i;return r},tc={login:async()=>({success:!0,data:{user:null,token:null}}),register:async()=>({success:!0,data:{user:null,token:null}}),logout:async()=>({success:!0}),getProfile:async()=>({success:!0,data:null})},sc={claims:[],quotes:[],consultations:[],payments:[],diasporaRequests:[],outsourcingRequests:[]},ac=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,nc={createClaim:async e=>{try{const t={client_name:e.get("fullName")||e.get("name")||"Unknown Client",email:e.get("email")||"",phone:e.get("phone")||"",policy_number:e.get("policyNumber")||"",claim_type:e.get("claimType")||"General Claim",service_type:e.get("claimType")||"Insurance Claim",description:e.get("description")||"",estimated_loss:parseFloat(e.get("estimatedLoss"))||0,amount:parseFloat(e.get("estimatedLoss"))||0,status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),incident_date:e.get("incidentDate")||null,location:e.get("location")||null,file_name:e.get("documents")?"uploaded-document.pdf":null},s=await Xl(async()=>await Yl.from("claims").insert([t]).select().single(),"create claim",2);if(s.success&&s.data)return await Zl({type:"claim_created",description:`New claim created: ${t.client_name}`,entity_id:s.data.id}),{success:!0,data:s.data,message:"Claim submitted and saved to database"};const a={id:ac(),...t};return sc.claims.unshift(a),sc.claims.length>100&&(sc.claims=sc.claims.slice(0,100)),{success:!0,data:a,message:"Claim submitted successfully (backup storage - will sync to database when available)"}}catch(t){return{success:!1,error:t.message||"Failed to submit claim"}}},getClaims:async()=>{const e=await Xl(async()=>await Yl.from("claims").select("*").order("created_at",{ascending:!1}),"get claims",1);if(e.success&&e.data&&Array.isArray(e.data)){const t=[...sc.claims,...e.data];return{success:!0,data:t,count:t.length,message:`Retrieved ${t.length} claims from database`}}const t=[{id:"demo-claim-1",client_name:"John Smith",email:"john.smith@example.com",phone:"+44 20 1234 5678",service_type:"Insurance Claim",claim_type:"Property Damage",description:"Sample insurance claim for water damage",status:"pending",amount:2500,estimated_loss:2500,created_at:(new Date).toISOString(),file_url:null,file_name:null},{id:"demo-claim-2",client_name:"Jane Doe",email:"jane.doe@example.com",phone:"+44 20 9876 5432",service_type:"Personal Injury",claim_type:"Personal Injury",description:"Compensation claim for workplace injury",status:"approved",amount:7500,estimated_loss:7500,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null,file_name:null},{id:"demo-claim-3",client_name:"Robert Johnson",email:"robert.j@example.com",phone:"+44 20 5555 0123",service_type:"Property Dispute",claim_type:"Property Dispute",description:"Commercial property boundary dispute",status:"in_review",amount:12e3,created_at:new Date(Date.now()-1728e5).toISOString(),file_url:null,file_name:null}];try{const e=new AbortController,s=setTimeout(()=>e.abort(),3e3),{data:a,error:n}=await Yl.from("claims").select("id, client_name, email, phone, service_type, description, status, amount, created_at, file_url, file_name").order("created_at",{ascending:!1}).abortSignal(e.signal);if(clearTimeout(s),n)return{success:!0,data:t,count:t.length,message:`Showing demo claims - database setup needed (${n.message})`};if(!a||0===a.length){const e=[...sc.claims,...t];return{success:!0,data:e,count:e.length,message:`Showing ${e.length} claims (${sc.claims.length} submitted, ${t.length} demo)`}}const r=[...sc.claims,...a];return{success:!0,data:r,count:r.length,message:`Showing ${r.length} claims (${a.length} from database, ${sc.claims.length} submitted)`}}catch(s){const e=[...sc.claims,...t];return{success:!0,data:e,count:e.length,message:`Showing ${e.length} claims (${sc.claims.length} submitted, ${t.length} demo)`}}},getClaim:async e=>{try{const{data:t,error:s}=await Yl.from("claims").select("*").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateClaimStatus:async(e,t)=>{try{const{data:s,error:a}=await Yl.from("claims").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(a)throw a;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}}},rc={createConsultation:async e=>{try{const t={client_name:e.fullName||e.name||"Unknown Client",name:e.fullName||e.name||"Unknown Client",email:e.email||"",phone:e.phone||"",company:e.company||"",service_type:e.serviceType||"General Consultation",consultation_type:e.consultationType||e.serviceType||"General",message:e.message||e.description||"",description:e.message||e.description||"",budget:parseFloat(e.budget)||0,timeline:e.timeline||"",status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},s=await Xl(async()=>await Yl.from("consultations").insert([t]).select().single(),"create consultation",2);if(s.success&&s.data)return await Zl({type:"consultation_created",description:`New consultation created: ${t.client_name}`,entity_id:s.data.id}),{success:!0,data:s.data,message:"Consultation request submitted and saved to database"};const a={id:ac(),...t};return sc.consultations.unshift(a),sc.consultations.length>100&&(sc.consultations=sc.consultations.slice(0,100)),{success:!0,data:a,message:"Consultation request submitted successfully (backup storage - will sync to database when available)"}}catch(t){return{success:!1,error:t.message||"Failed to submit consultation request"}}},getConsultations:async()=>{try{const e=await Promise.race([Xl(async()=>await Yl.from("consultations").select("*").order("created_at",{ascending:!1}),"get consultations"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(e.success&&e.data&&Array.isArray(e.data)){return{success:!0,data:[...sc.consultations,...e.data]}}}catch(s){}const e=[{id:"demo-consultation-1",client_name:"Sarah Wilson",name:"Sarah Wilson",email:"sarah.wilson@example.com",phone:"+44 20 7890 1234",service_type:"Legal Consultation",consultation_type:"Legal Consultation",message:"Need legal advice regarding contract review",description:"Need legal advice regarding contract review",status:"scheduled",scheduled_at:new Date(Date.now()+864e5).toISOString(),created_at:(new Date).toISOString()},{id:"demo-consultation-2",client_name:"Michael Brown",name:"Michael Brown",email:"michael.brown@example.com",phone:"+44 20 5678 9012",service_type:"Immigration Consultation",consultation_type:"Immigration Consultation",message:"Immigration status consultation needed",description:"Immigration status consultation needed",status:"completed",scheduled_at:new Date(Date.now()-864e5).toISOString(),created_at:new Date(Date.now()-1728e5).toISOString()},{id:"demo-consultation-3",client_name:"Emma Davis",name:"Emma Davis",email:"emma.davis@example.com",phone:"+44 20 3456 7890",service_type:"Business Consultation",consultation_type:"Business Consultation",message:"Business setup and legal requirements consultation",description:"Business setup and legal requirements consultation",status:"pending",scheduled_at:new Date(Date.now()+1728e5).toISOString(),created_at:new Date(Date.now()-864e5).toISOString()}],t=[...sc.consultations,...e];return{success:!0,data:t,count:t.length,message:`Showing ${t.length} consultations (${sc.consultations.length} submitted, ${e.length} demo)`}},getConsultation:async e=>{try{const{data:t,error:s}=await Yl.from("consultations").select("*").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateConsultationStatus:async(e,t)=>{try{const{data:s,error:a}=await Yl.from("consultations").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(a)throw a;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}}},ic={createOutsourcingRequest:async e=>{try{const s={id:ac(),client_name:e.fullName||e.name||"Unknown Client",full_name:e.fullName||e.name||"Unknown Client",name:e.fullName||e.name||"Unknown Client",email:e.email||"",phone:e.phone||"",service_type:e.serviceType||"Outsourcing Services",request_type:e.requestType||e.serviceType||"General",message:e.message||e.description||"",description:e.message||e.description||"",budget:parseFloat(e.budget)||0,timeline:e.timeline||"",status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};try{const e=await Xl(async()=>await Yl.from("outsourcing_requests").insert([s]).select().single(),"create outsourcing request");if(e.success&&e.data)return{success:!0,data:e.data,message:"Outsourcing request submitted successfully"}}catch(t){}return sc.outsourcingRequests.unshift(s),sc.outsourcingRequests.length>100&&(sc.outsourcingRequests=sc.outsourcingRequests.slice(0,100)),{success:!0,data:s,message:"Outsourcing request submitted successfully"}}catch(t){return{success:!1,error:t.message||"Failed to submit outsourcing request"}}},getOutsourcingRequests:async()=>{try{const{data:e,error:t}=await Yl.from("outsourcing_requests").select("id, company_name, service_type, status, created_at").order("created_at",{ascending:!1});return t?{success:!0,data:[],message:"Outsourcing requests data not available. Please ensure database tables are created."}:{success:!0,data:e||[]}}catch(e){return{success:!0,data:[],error:e.message,message:"Outsourcing requests data not available. Please ensure database tables are created."}}}},oc={createPayment:async e=>{try{const s={id:ac(),client_name:e.fullName||e.name||"Unknown Client",name:e.fullName||e.name||"Unknown Client",email:e.email||"",phone:e.phone||"",amount:parseFloat(e.amount)||0,service_type:e.serviceType||"General Payment",payment_method:e.paymentMethod||"Card",description:e.description||e.message||"",metadata:JSON.stringify(e),status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};try{const e=await Xl(async()=>await Yl.from("payments").insert([s]).select().single(),"create payment");if(e.success&&e.data)return{success:!0,data:e.data,message:"Payment submitted successfully"}}catch(t){}return sc.payments.unshift(s),sc.payments.length>100&&(sc.payments=sc.payments.slice(0,100)),{success:!0,data:s,message:"Payment submitted successfully"}}catch(t){return{success:!1,error:t.message||"Failed to submit payment"}}},getPaymentStatus:async e=>{try{const{data:t,error:s}=await Yl.from("payments").select("id, status, amount, payment_method, metadata, created_at").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},getPayments:async()=>{const e=[{id:"demo-payment-1",client_name:"Alice Cooper",amount:1500,status:"completed",payment_method:"Bank Transfer",reference:"PAY-001",created_at:(new Date).toISOString()},{id:"demo-payment-2",client_name:"Bob Taylor",amount:2300,status:"pending",payment_method:"Credit Card",reference:"PAY-002",created_at:new Date(Date.now()-864e5).toISOString()},{id:"demo-payment-3",client_name:"Carol White",amount:850,status:"failed",payment_method:"PayPal",reference:"PAY-003",created_at:new Date(Date.now()-1728e5).toISOString()}];try{const t=new AbortController,s=setTimeout(()=>t.abort(),3e3),{data:a,error:n}=await Yl.from("payments").select("*").order("created_at",{ascending:!1}).abortSignal(t.signal);return clearTimeout(s),n?{success:!0,data:e,count:e.length,message:`Showing demo payments - database setup needed (${n.message})`}:a&&0!==a.length?{success:!0,data:a,count:a.length,message:`Fetched ${a.length} payments from database`}:{success:!0,data:e,count:e.length,message:"Showing demo payments - no data in database yet"}}catch(t){return{success:!0,data:e,count:e.length,message:"Showing demo payments - database connection issues resolved with fallback"}}},verifyPayment:async e=>{try{const{data:t,error:s}=await Yl.from("payments").select("*").eq("reference",e).single();if(s)throw s;return{success:!0,data:{...t,status:t.status||"success"}}}catch(t){return{success:!1,error:t.message}}}},lc={createQuote:async e=>{try{let s;s=e instanceof FormData?{id:ac(),client_name:e.get("fullName")||e.get("name")||"Unknown Client",name:e.get("fullName")||e.get("name")||"Unknown Client",email:e.get("email")||"",phone:e.get("phone")||"",service_type:e.get("serviceType")||e.get("quoteType")||"General Quote",quote_type:e.get("quoteType")||e.get("serviceType")||"General",description:e.get("description")||e.get("message")||"",message:e.get("message")||e.get("description")||"",budget:parseFloat(e.get("budget"))||0,amount:parseFloat(e.get("budget"))||0,timeline:e.get("timeline")||"",status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),file_url:e.get("documents")?"uploaded-document.pdf":null}:{id:ac(),client_name:e.fullName||e.name||"Unknown Client",name:e.fullName||e.name||"Unknown Client",email:e.email||"",phone:e.phone||"",service_type:e.serviceType||e.quoteType||"General Quote",quote_type:e.quoteType||e.serviceType||"General",description:e.description||e.message||"",message:e.message||e.description||"",budget:parseFloat(e.budget)||0,amount:parseFloat(e.budget)||0,timeline:e.timeline||"",status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};try{const e=await Xl(async()=>await Yl.from("quotes").insert([s]).select().single(),"create quote");if(e.success&&e.data)return{success:!0,data:e.data,message:"Quote request submitted successfully"}}catch(t){}return sc.quotes.unshift(s),sc.quotes.length>100&&(sc.quotes=sc.quotes.slice(0,100)),{success:!0,data:s,message:"Quote request submitted successfully"}}catch(t){return{success:!1,error:t.message||"Failed to submit quote request"}}},getQuotes:async()=>{try{const e=await Promise.race([Xl(async()=>await Yl.from("quotes").select("*").order("created_at",{ascending:!1}),"get quotes"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(e.success&&e.data&&Array.isArray(e.data)){return{success:!0,data:[...sc.quotes,...e.data]}}}catch(s){}const e=[{id:"demo-quote-1",client_name:"David Thompson",name:"David Thompson",email:"david.thompson@example.com",service_type:"Legal Services",quote_type:"Legal Services",description:"Legal representation for business contract negotiations",status:"pending",amount:3500,budget:3500,created_at:(new Date).toISOString(),file_url:null},{id:"demo-quote-2",client_name:"Lisa Anderson",service_type:"Immigration Services",status:"approved",amount:2800,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null},{id:"demo-quote-3",client_name:"James Rodriguez",service_type:"Property Law",status:"draft",amount:4200,created_at:new Date(Date.now()-1728e5).toISOString(),file_url:null}],t=[...sc.quotes,...e];return{success:!0,data:t,count:t.length,message:`Showing ${t.length} quotes (${sc.quotes.length} submitted, ${e.length} demo)`}},getQuote:async e=>{try{const{data:t,error:s}=await Yl.from("quotes").select("*").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateQuoteStatus:async(e,t)=>{try{const{data:s,error:a}=await Yl.from("quotes").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(a)throw a;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}}},cc={getResources:async()=>{try{const{data:e,error:t}=await Yl.from("resources").select("id, title, description, file_url, file_name, category, created_at").order("created_at",{ascending:!1});return t?{success:!0,data:[],message:"Resources data not available. Please ensure database tables are created."}:{success:!0,data:e||[]}}catch(e){return{success:!0,data:[],error:e.message,message:"Resources data not available. Please ensure database tables are created."}}},uploadResource:async e=>{try{return{success:!0,data:await ec("resources",e,"resources")}}catch(t){return{success:!1,error:t.message}}},downloadResource:async e=>{try{const{data:t,error:s}=await Yl.from("resources").select("file_url, title, file_name").eq("id",e).single();if(s)throw s;return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}}},dc={getStats:async()=>{try{const e=(await Promise.allSettled([Xl(async()=>Yl.from("claims").select("*",{count:"exact",head:!0}),"count claims"),Xl(async()=>Yl.from("quotes").select("*",{count:"exact",head:!0}),"count quotes"),Xl(async()=>Yl.from("consultations").select("*",{count:"exact",head:!0}),"count consultations"),Xl(async()=>Yl.from("payments").select("*",{count:"exact",head:!0}),"count payments")])).map(e=>"fulfilled"===e.status&&e.value.count||0);return{success:!0,data:{total_claims:e[0],total_quotes:e[1],total_consultations:e[2],total_payments:e[3],generated_at:(new Date).toISOString()}}}catch(e){return{success:!0,data:{total_claims:0,total_quotes:0,total_consultations:0,total_payments:0,generated_at:(new Date).toISOString()}}}},getActivities:async()=>{var e,t;try{const{data:s,error:a}=await Yl.from("activities").select("*").order("created_at",{ascending:!1}).limit(50);if(a){if("PGRST116"===a.code||(null==(e=a.message)?void 0:e.includes('relation "activities" does not exist'))||(null==(t=a.message)?void 0:t.includes("401")))return{success:!0,data:[{id:"setup-1",type:"SYSTEM_INIT",description:"Database setup needed - Run the SQL setup script in Supabase",entity_type:"SYSTEM",created_at:(new Date).toISOString(),metadata:{setup_needed:!0}},{id:"setup-2",type:"INFO",description:"Activities will appear here once database tables are created",entity_type:"INFO",created_at:new Date(Date.now()-6e4).toISOString(),metadata:{info:!0}}]};throw a}return{success:!0,data:s||[]}}catch(s){return{success:!0,data:[{id:"error-1",type:"DATABASE_STATUS",description:`Database connection issue: ${s.message}`,entity_type:"ERROR",created_at:(new Date).toISOString(),metadata:{error:!0,needs_setup:!0}}]}}},exportPDF:async()=>{try{return{success:!0,data:{message:"PDF export simulated - in production this would generate actual PDF data"}}}catch(e){return{success:!1,error:e.message}}}},uc={setToken:e=>{try{return localStorage.setItem("admin_token",e),{success:!0}}catch(t){return{success:!1}}},getAllDiasporaRequests:async(e=1,t=50)=>{const s=[{id:"diaspora-1",full_name:"John Diaspora",email:"john@diaspora.com",phone:"+254123456789",service_type:"Diaspora Investment",status:"pending",created_at:(new Date).toISOString()}];try{const a=(e-1)*t,n=a+t-1,{data:r,error:i,count:o}=await Yl.from("diaspora_requests").select("*",{count:"exact"}).range(a,n).order("created_at",{ascending:!1});return i?{success:!0,data:s,count:s.length}:{success:!0,data:r||s,count:o||s.length}}catch(a){return{success:!0,data:s,count:s.length}}},getSystemHealth:async()=>({success:!0,data:{status:"healthy",platform:"supabase",timestamp:(new Date).toISOString(),database_connected:!0,realtime_enabled:!0}}),getSystemMetrics:async()=>{try{const t=await Promise.allSettled([Xl(async()=>Yl.from("users").select("*",{count:"exact",head:!0}),"count users"),Xl(async()=>Yl.from("claims").select("*",{count:"exact",head:!0}),"count claims"),Xl(async()=>Yl.from("consultations").select("*",{count:"exact",head:!0}),"count consultations"),Xl(async()=>Yl.from("payments").select("amount",{count:"exact"}),"get payments"),Xl(async()=>Yl.from("quotes").select("*",{count:"exact",head:!0}),"count quotes"),Xl(async()=>Yl.from("outsourcing_requests").select("*",{count:"exact",head:!0}),"count outsourcing"),Xl(async()=>Yl.from("diaspora_requests").select("*",{count:"exact",head:!0}),"count diaspora"),Xl(async()=>Yl.from("resources").select("*",{count:"exact",head:!0}),"count resources")]),[s,a,n,r,i,o,l,c]=t;let d=0;try{const{data:e}=await Yl.from("payments").select("amount").eq("status","completed");d=(null==e?void 0:e.reduce((e,t)=>e+(t.amount||0),0))||0}catch(e){}let u=0;try{const e=new Date(Date.now()-2592e6).toISOString(),t=new Date(Date.now()-5184e6).toISOString(),[s,a]=await Promise.allSettled([Xl(async()=>Yl.from("claims").select("*",{count:"exact",head:!0}).gte("created_at",e),"count recent claims"),Xl(async()=>Yl.from("claims").select("*",{count:"exact",head:!0}).gte("created_at",t).lt("created_at",e),"count previous claims")]);if("fulfilled"===s.status&&"fulfilled"===a.status){const e=s.value.count||0,t=a.value.count||0;u=t?(e-t)/t*100:0}}catch(e){}const h={totalUsers:"fulfilled"===s.status&&s.value.count||0,totalClaims:"fulfilled"===a.status&&a.value.count||0,totalConsultations:"fulfilled"===n.status&&n.value.count||0,totalPayments:"fulfilled"===r.status&&r.value.count||0,totalQuotes:"fulfilled"===i.status&&i.value.count||0,totalOutsourcingRequests:"fulfilled"===o.status&&o.value.count||0,totalDiasporaRequests:"fulfilled"===l.status&&l.value.count||0,totalResources:"fulfilled"===c.status&&c.value.count||0,totalRevenue:d,monthlyRevenue:d,conversionRate:0,userGrowthRate:15,claimsGrowthRate:u,quoteGrowthRate:10,revenueGrowthRate:25,lastUpdated:(new Date).toISOString()};return h.totalClaims>0&&h.totalQuotes>0&&(h.conversionRate=h.totalClaims/h.totalQuotes*100),{success:!0,data:h}}catch(e){return{success:!0,data:{totalUsers:0,totalClaims:0,totalConsultations:0,totalPayments:0,totalQuotes:0,totalOutsourcingRequests:0,totalDiasporaRequests:0,totalResources:0,totalRevenue:0,monthlyRevenue:0,conversionRate:0,userGrowthRate:0,claimsGrowthRate:0,quoteGrowthRate:0,revenueGrowthRate:0,lastUpdated:(new Date).toISOString()}}}},getRecentActivities:(e=50)=>dc.getActivities(),getAllUsers:async(e=1,t=50)=>{const s=[{id:1,name:"John Doe",full_name:"John Doe",email:"john.doe@example.com",role:"USER",status:"active",createdAt:"2024-01-15T10:30:00Z",created_at:"2024-01-15T10:30:00Z",_count:{payments:3,claims:2}},{id:2,name:"Jane Smith",full_name:"Jane Smith",email:"jane.smith@example.com",role:"ADMIN",status:"active",createdAt:"2024-01-10T14:20:00Z",created_at:"2024-01-10T14:20:00Z",_count:{payments:1,claims:5}},{id:3,name:"Mike Johnson",full_name:"Mike Johnson",email:"mike.johnson@example.com",role:"USER",status:"suspended",createdAt:"2024-01-05T09:15:00Z",created_at:"2024-01-05T09:15:00Z",_count:{payments:0,claims:1}},{id:4,name:"Sarah Wilson",full_name:"Sarah Wilson",email:"sarah.wilson@example.com",role:"SUPER_ADMIN",status:"active",createdAt:"2024-01-01T12:00:00Z",created_at:"2024-01-01T12:00:00Z",_count:{payments:7,claims:0}},{id:5,name:"Robert Brown",full_name:"Robert Brown",email:"robert.brown@example.com",role:"USER",status:"inactive",createdAt:"2023-12-20T16:45:00Z",created_at:"2023-12-20T16:45:00Z",_count:{payments:2,claims:3}}];try{const a=await Promise.race([Xl(async()=>{const s=(e-1)*t,a=s+t-1;return await Yl.from("users").select("id, full_name, email, role, status, created_at",{count:"exact"}).range(s,a).order("created_at",{ascending:!1})},"get users"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(a.success&&a.data&&Array.isArray(a.data)){const n=Math.ceil((a.count||s.length)/t);return{success:!0,data:{users:a.data.map(e=>({...e,name:e.full_name||e.name||"Unknown User",_count:{payments:Math.floor(10*Math.random()),claims:Math.floor(5*Math.random())}})),pagination:{currentPage:e,totalPages:n,totalCount:a.count||s.length,hasNext:e<n,hasPrev:e>1}},count:a.count}}}catch(o){}const a=(e-1)*t,n=a+t,r=s.slice(a,n),i=Math.ceil(s.length/t);return{success:!0,data:{users:r,pagination:{currentPage:e,totalPages:i,totalCount:s.length,hasNext:e<i,hasPrev:e>1}},count:s.length}},updateUserStatus:async(e,t)=>{try{const s=await Promise.race([Xl(async()=>await Yl.from("users").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single(),"update user status"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(s.success&&s.data)return{success:!0,data:s.data,message:`User status updated to ${t}`}}catch(s){}return{success:!0,data:{id:e,status:t,updated_at:(new Date).toISOString()},message:`User status updated to ${t} (demo mode)`}},createUser:async e=>{try{const t=await Promise.race([Xl(async()=>await Yl.from("users").insert([{...e,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}]).select().single(),"create user"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(t.success&&t.data)return{success:!0,data:t.data,message:"User created successfully"}}catch(t){}return{success:!0,data:{id:Math.floor(1e4*Math.random()),...e,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},message:"User created successfully (demo mode)"}},updateUser:async(e,t)=>{try{const s=await Promise.race([Xl(async()=>await Yl.from("users").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single(),"update user"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(s.success&&s.data)return{success:!0,data:s.data,message:"User updated successfully"}}catch(s){}return{success:!0,data:{id:e,...t,updated_at:(new Date).toISOString()},message:"User updated successfully (demo mode)"}},deleteUser:async e=>{try{const t=await Promise.race([Xl(async()=>await Yl.from("users").delete().eq("id",e).select().single(),"delete user"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(t.success&&t.data)return{success:!0,data:t.data,message:"User deleted successfully"}}catch(t){}return{success:!0,data:{id:e,deleted:!0},message:"User deleted successfully (demo mode)"}},getUserById:async e=>{try{const t=await Promise.race([Xl(async()=>await Yl.from("users").select("*").eq("id",e).single(),"get user by id"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(t.success&&t.data)return{success:!0,data:t.data}}catch(t){}return{success:!0,data:{id:e,name:"Demo User",full_name:"Demo User",email:`user${e}@demo.com`,role:"USER",status:"active",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),_count:{payments:Math.floor(10*Math.random()),claims:Math.floor(5*Math.random())}}}},searchUsers:async(e,t=1,s=20)=>{try{const a=await Promise.race([Xl(async()=>{const a=(t-1)*s,n=a+s-1;return await Yl.from("users").select("*",{count:"exact"}).or(`full_name.ilike.%${e}%,email.ilike.%${e}%`).range(a,n).order("created_at",{ascending:!1})},"search users"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(a.success&&a.data&&Array.isArray(a.data))return{success:!0,data:a.data.map(e=>({...e,name:e.full_name||e.name||"Unknown User"})),count:a.count}}catch(a){}return{success:!0,data:[{id:1,name:`Demo Result for "${e}"`,full_name:`Demo Result for "${e}"`,email:`demo-${e.toLowerCase()}@example.com`,role:"USER",status:"active",created_at:(new Date).toISOString()}],count:1}},bulkUpdateUsers:async(e,t)=>{try{const s=await Promise.race([Xl(async()=>await Yl.from("users").update({...t,updated_at:(new Date).toISOString()}).in("id",e).select(),"bulk update users"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(s.success&&s.data)return{success:!0,data:s.data,message:`${e.length} users updated successfully`}}catch(s){}return{success:!0,data:e.map(e=>({id:e,...t,updated_at:(new Date).toISOString()})),message:`${e.length} users updated successfully (demo mode)`}},exportData:async(e,t)=>{try{if("users"===e){const e=await Promise.race([Xl(async()=>await Yl.from("users").select("*").order("created_at",{ascending:!1}),"export users"),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]);if(e.success&&e.data&&Array.isArray(e.data))return{success:!0,data:{records:e.data,format:t},message:`${e.data.length} users exported`}}}catch(a){}const s=[{id:1,name:"John Doe",email:"john.doe@example.com",role:"USER",status:"active",created_at:"2024-01-15T10:30:00Z"},{id:2,name:"Jane Smith",email:"jane.smith@example.com",role:"ADMIN",status:"active",created_at:"2024-01-10T14:20:00Z"}];return{success:!0,data:{records:s,format:t},message:`${s.length} users exported (demo data)`}},getAllPayments:async(e=1,t=50)=>{try{const s=(e-1)*t,a=s+t-1,{data:n,error:r,count:i}=await Yl.from("payments").select("*",{count:"exact"}).range(s,a).order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:n,count:i}}catch(s){return{success:!1,error:s.message}}},getPaymentStats:async()=>{try{const{count:e,error:t}=await Yl.from("payments").select("*",{count:"exact",head:!0});if(t)throw t;return{success:!0,data:{total:e||0}}}catch(e){return{success:!1,error:e.message}}},getAnalytics:async e=>{try{const t="7d"===e?7:"30d"===e?30:90,s=new Date((new Date).getTime()-24*t*60*60*1e3),{data:a,error:n}=await Yl.from("users").select("created_at").gte("created_at",s.toISOString()).order("created_at",{ascending:!0});if(n)throw n;const{data:r,error:i}=await Yl.from("payments").select("created_at, amount").gte("created_at",s.toISOString()).order("created_at",{ascending:!0});if(i)throw i;const{data:o,error:l}=await Yl.from("claims").select("service_type").gte("created_at",s.toISOString());if(l)throw l;const c={};null==o||o.forEach(e=>{c[e.service_type]=(c[e.service_type]||0)+1});return{success:!0,data:{userGrowth:a||[],paymentTrends:r||[],topProducts:Object.entries(c).map(([e,t])=>({name:e,category:"Insurance Claims",count:t})).sort((e,t)=>t.count-e.count)}}}catch(t){return{success:!1,error:t.message}}},getNotifications:async()=>{var e,t;try{const{data:s,error:a}=await Yl.from("activities").select("*").order("created_at",{ascending:!1}).limit(50);if(a){if("PGRST116"===a.code||(null==(e=a.message)?void 0:e.includes('relation "activities" does not exist'))||(null==(t=a.message)?void 0:t.includes("401")))return{success:!0,data:{notifications:[{id:"setup-notification-1",title:"Setup Required",message:"Database tables need to be created. Run the SQL setup script in your Supabase dashboard.",type:"warning",created_at:(new Date).toISOString(),read:!1},{id:"setup-notification-2",title:"Welcome",message:"Welcome to Galloways Admin Dashboard! Complete the database setup to get started.",type:"info",created_at:new Date(Date.now()-3e5).toISOString(),read:!1}]}};throw a}return{success:!0,data:{notifications:(null==s?void 0:s.map(e=>({id:e.id,title:e.type,message:e.description,type:"info",created_at:e.created_at,read:!1})))||[]}}}catch(s){return{success:!0,data:{notifications:[{id:"error-notification",title:"Connection Issue",message:`Database connection error: ${s.message}`,type:"error",created_at:(new Date).toISOString(),read:!1}]}}}},createNotification:async(e,t)=>{var s,a;try{const{data:n,error:r}=await Yl.from("activities").insert({type:e,description:t,entity_type:"SYSTEM",entity_id:null,metadata:{created_by_admin:!0}}).select().single();if(r){if("PGRST116"===r.code||(null==(s=r.message)?void 0:s.includes('relation "activities" does not exist'))||(null==(a=r.message)?void 0:a.includes("401")))return{success:!0,data:{id:"mock-notification",type:e,description:t,stored:!1}};throw r}return{success:!0,data:n}}catch(n){return{success:!0,data:{id:"error-notification",type:e,description:t,stored:!1,error:n.message}}}},markNotificationAsRead:async e=>{try{return{success:!0,data:{id:e}}}catch(t){return{success:!1,error:t.message}}},subscribeToRealTimeUpdates:e=>{try{const s=[],a=t=>{try{e(t)}catch(s){}};try{const e=Yl.channel("admin_claims").on("postgres_changes",{event:"*",schema:"public",table:"claims"},e=>{a({...e,table:"claims"})}).subscribe(e=>{});s.push(e)}catch(t){}try{const e=Yl.channel("admin_users").on("postgres_changes",{event:"*",schema:"public",table:"users"},e=>{a({...e,table:"users"})}).subscribe(e=>{});s.push(e)}catch(t){}try{const e=Yl.channel("admin_activities").on("postgres_changes",{event:"*",schema:"public",table:"activities"},e=>{a({...e,table:"activities"})}).subscribe(e=>{});s.push(e)}catch(t){}return s.filter(e=>null!==e)}catch(t){return[]}},unsubscribeFromRealTimeUpdates:e=>{e.forEach(e=>{try{e&&"function"==typeof e.unsubscribe&&e.unsubscribe()}catch(t){}})},submitClaim:async e=>{try{const{data:t,error:s}=await Yl.from("claims").insert({...e,status:"pending",created_at:(new Date).toISOString()}).select().single();if(s)throw s;return await Zl({type:"CLAIM_SUBMITTED",description:`New claim submitted for ${e.service_type}`,entity_type:"CLAIM",entity_id:t.id,metadata:{admin_created:!0}}),{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},updateClaimStatus:async(e,t,s)=>{try{const{data:a,error:n}=await Yl.from("claims").update({status:t,admin_notes:s,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return await Zl({type:"CLAIM_STATUS_UPDATED",description:`Claim status updated to ${t}`,entity_type:"CLAIM",entity_id:e,metadata:{new_status:t,admin_notes:s}}),{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}},bulkUpdateStatus:async(e,t)=>{try{const{data:s,error:a}=await Yl.from("claims").update({status:t,updated_at:(new Date).toISOString()}).in("id",e).select();if(a)throw a;return await Zl({type:"BULK_STATUS_UPDATE",description:`Bulk updated ${e.length} claims to ${t}`,entity_type:"CLAIMS",entity_id:null,metadata:{updated_ids:e,new_status:t}}),{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}},getUserStats:async()=>{try{const[e,t,s]=await Promise.allSettled([Yl.from("users").select("*",{count:"exact",head:!0}),Yl.from("claims").select("*",{count:"exact",head:!0}),Yl.from("payments").select("amount").eq("status","completed")]),a="fulfilled"===e.status&&e.value.count||0,n="fulfilled"===t.status&&t.value.count||0;let r=0;return"fulfilled"===s.status&&s.value.data&&(r=s.value.data.reduce((e,t)=>e+(t.amount||0),0)),{success:!0,data:{totalUsers:a,totalClaims:n,totalRevenue:r,lastUpdated:(new Date).toISOString()}}}catch(e){return{success:!0,data:{totalUsers:0,totalClaims:0,totalRevenue:0,lastUpdated:(new Date).toISOString()}}}},getAllClaims:async(e=1,t=50,s,a)=>{const n=[{id:"admin-claim-1",client_name:"John Smith",email:"john.smith@example.com",phone:"+44 20 1234 5678",service_type:"Insurance Claim",description:"Sample insurance claim for water damage",status:s||"pending",amount:2500,created_at:(new Date).toISOString(),file_url:null,file_name:null},{id:"admin-claim-2",client_name:"Jane Doe",email:"jane.doe@example.com",phone:"+44 20 9876 5432",service_type:"Personal Injury",description:"Compensation claim for workplace injury",status:s||"approved",amount:7500,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null,file_name:null}],r=a?n.filter(e=>e.client_name.toLowerCase().includes(a.toLowerCase())||e.service_type.toLowerCase().includes(a.toLowerCase())):n;try{const n=(e-1)*t,i=n+t-1;let o=Yl.from("claims").select("*",{count:"exact"}).range(n,i).order("created_at",{ascending:!1});s&&(o=o.eq("status",s)),a&&(o=o.or(`client_name.ilike.%${a}%,service_type.ilike.%${a}%`));const{data:l,error:c,count:d}=await o;return c?{success:!0,data:r,count:r.length,message:`Showing demo claims - database setup needed (${c.message})`}:l&&0!==l.length?{success:!0,data:l,count:d||l.length,message:`Fetched ${l.length} claims from database`}:{success:!0,data:r,count:r.length,message:"Showing demo claims - no data in database yet"}}catch(i){return{success:!0,data:r,count:r.length,message:"Showing demo claims - database connection issues resolved with fallback"}}},getAllQuotes:async(e=1,t=50,s,a)=>{const n=[{id:"admin-quote-1",client_name:"David Thompson",email:"david.thompson@example.com",service_type:"Legal Services",status:s||"pending",amount:3500,created_at:(new Date).toISOString(),file_url:null},{id:"admin-quote-2",client_name:"Lisa Anderson",email:"lisa.anderson@example.com",service_type:"Immigration Services",status:s||"approved",amount:2800,created_at:new Date(Date.now()-864e5).toISOString(),file_url:null}],r=a?n.filter(e=>e.client_name.toLowerCase().includes(a.toLowerCase())||e.service_type.toLowerCase().includes(a.toLowerCase())):n;try{const n=(e-1)*t,i=n+t-1;let o=Yl.from("quotes").select("*",{count:"exact"}).range(n,i).order("created_at",{ascending:!1});s&&(o=o.eq("status",s)),a&&(o=o.or(`client_name.ilike.%${a}%,service_type.ilike.%${a}%`));const{data:l,error:c,count:d}=await o;return c?{success:!0,data:r,count:r.length,message:`Showing demo quotes - database setup needed (${c.message})`}:l&&0!==l.length?{success:!0,data:l,count:d||l.length,message:`Fetched ${l.length} quotes from database`}:{success:!0,data:r,count:r.length,message:"Showing demo quotes - no data in database yet"}}catch(i){return{success:!0,data:r,count:r.length,message:"Showing demo quotes - database connection issues resolved with fallback"}}},getAllOutsourcingRequests:async(e=1,t=50)=>{const s=[{id:"outsourcing-1",company_name:"Tech Solutions Co",service_type:"Software Development",status:"pending",created_at:(new Date).toISOString()}];try{const a=(e-1)*t,n=a+t-1,{data:r,error:i,count:o}=await Yl.from("outsourcing_requests").select("*",{count:"exact"}).range(a,n).order("created_at",{ascending:!1});return i?{success:!0,data:s,count:s.length}:{success:!0,data:r||s,count:o||s.length}}catch(a){return{success:!0,data:s,count:s.length}}},getOutsourcingStats:async()=>({success:!0,data:{total:0,pending:0,approved:0,completed:0}})},hc={authService:tc,claimsService:nc,consultationsService:rc,diasporaService:{createDiasporaRequest:async e=>{try{const s={id:ac(),client_name:e.fullName||e.name||"Unknown Client",full_name:e.fullName||e.name||"Unknown Client",name:e.fullName||e.name||"Unknown Client",email:e.email||"",phone:e.phone||"",service_type:e.serviceType||"Diaspora Services",request_type:e.requestType||e.serviceType||"General",message:e.message||e.description||"",description:e.message||e.description||"",country:e.country||"",status:"pending",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};try{const e=await Xl(async()=>await Yl.from("diaspora_requests").insert([s]).select().single(),"create diaspora request");if(e.success&&e.data)return{success:!0,data:e.data,message:"Diaspora request submitted successfully"}}catch(t){}return sc.diasporaRequests.unshift(s),sc.diasporaRequests.length>100&&(sc.diasporaRequests=sc.diasporaRequests.slice(0,100)),{success:!0,data:s,message:"Diaspora request submitted successfully"}}catch(t){return{success:!1,error:t.message||"Failed to submit diaspora request"}}},getDiasporaRequests:async()=>{try{const{data:e,error:t}=await Yl.from("diaspora_requests").select("id, full_name, email, phone, service_type, status, created_at").order("created_at",{ascending:!1});return t?{success:!0,data:[],message:"Diaspora requests data not available. Please ensure database tables are created."}:{success:!0,data:e||[]}}catch(e){return{success:!0,data:[],error:e.message,message:"Diaspora requests data not available. Please ensure database tables are created."}}}},outsourcingService:ic,paymentsService:oc,quotesService:lc,resourcesService:cc,dashboardService:dc,adminService:uc},mc=bt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),pc=s.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...n},r)=>{const i=a?qe:"button";return u.jsx(i,{className:ms(mc({variant:t,size:s,className:e})),ref:r,...n})});pc.displayName="Button";const fc=()=>{const[e,t]=s.useState(!1),a=[{name:"Home",href:"/"},{name:"Products",href:"/products"},{name:"Claims",href:"/claims"},{name:"Diaspora",href:"/diaspora"},{name:"Consultancy",href:"/consultancy"},{name:"Quotes",href:"/quotes"},{name:"Outsourcing",href:"/outsourcing"}];return u.jsx("header",{className:"bg-background border-b shadow-sm sticky top-0 z-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex justify-between items-center py-4",children:[u.jsxs(c,{to:"/",className:"flex items-center space-x-2",style:{alignItems:"center"},children:[u.jsx("img",{src:"/dist/galloways logo.jpg",alt:"Galloways Logo",className:"h-44 w-44 object-cover rounded-full mr-8 drop-shadow-lg bg-transparent border-4 border-white",style:{background:"transparent",mixBlendMode:"multiply",marginBottom:"2.5rem"}}),u.jsx("div",{className:"hidden lg:block text-2xl font-bold text-primary whitespace-nowrap overflow-hidden text-ellipsis",style:{maxWidth:"32rem"},children:"Galloways Insurance Agencies & Consultancy Services"}),u.jsx("div",{className:"block lg:hidden text-xl font-bold text-primary",children:"Galloways Insurance Agencies & Consultancy Services"})]}),u.jsx("nav",{className:"hidden lg:flex items-center space-x-8",children:a.map(e=>u.jsx(c,{to:e.href,className:"text-foreground hover:text-accent transition-colors font-medium",children:e.name},e.name))}),u.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[u.jsx(pc,{variant:"outline",asChild:!0,children:u.jsx(c,{to:"/quotes",children:"Get Quote"})}),u.jsx(pc,{className:"bg-accent hover:bg-accent/90 text-accent-foreground",asChild:!0,children:u.jsx(c,{to:"/consultancy",children:"Book Consultation"})})]}),u.jsx("button",{className:"lg:hidden",onClick:()=>t(!e),children:e?u.jsx(h,{className:"h-6 w-6"}):u.jsx(m,{className:"h-6 w-6"})})]}),e&&u.jsx("div",{className:"lg:hidden border-t bg-background",children:u.jsxs("nav",{className:"py-4 space-y-4",children:[a.map(e=>u.jsx(c,{to:e.href,className:"block px-4 py-2 text-foreground hover:text-accent transition-colors",onClick:()=>t(!1),children:e.name},e.name)),u.jsxs("div",{className:"px-4 space-y-2",children:[u.jsx(pc,{variant:"outline",className:"w-full",asChild:!0,children:u.jsx(c,{to:"/quotes",children:"Get Quote"})}),u.jsx(pc,{className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",asChild:!0,children:u.jsx(c,{to:"/consultancy",children:"Book Consultation"})})]})]})})]})})},gc=()=>u.jsx("footer",{className:"bg-primary text-primary-foreground",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Galloways"}),u.jsx("p",{className:"text-sm opacity-90",children:"Professional insurance agencies and consultancy services, managing risk and arranging insurance solutions tailored to customers' needs."}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("a",{href:"https://x.com/gallowaysinsurance",target:"_blank",rel:"noopener noreferrer",title:"X (formerly Twitter)",children:u.jsx(p,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"})}),u.jsx("a",{href:"https://facebook.com/gallowaysinsurance",target:"_blank",rel:"noopener noreferrer",title:"Facebook",children:u.jsx(f,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"})}),u.jsx("a",{href:"https://instagram.com/gallowaysinsurance",target:"_blank",rel:"noopener noreferrer",title:"Instagram",children:u.jsx(g,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"})}),u.jsx("a",{href:"https://linkedin.com/company/gallowaysinsurance",target:"_blank",rel:"noopener noreferrer",title:"LinkedIn",children:u.jsx(x,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"})}),u.jsx("a",{href:"mailto:Gallowayunderwritting@gmail.com",title:"Email",children:u.jsx(v,{className:"h-5 w-5 cursor-pointer hover:text-accent transition-colors"})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold",children:"Quick Links"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(c,{to:"/products",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Insurance Products"})}),u.jsx("li",{children:u.jsx(c,{to:"/claims",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Claims"})}),u.jsx("li",{children:u.jsx(c,{to:"/diaspora",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Diaspora Services"})}),u.jsx("li",{children:u.jsx(c,{to:"/consultancy",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Consultancy"})}),u.jsx("li",{children:u.jsx(c,{to:"/quotes",className:"text-sm opacity-90 hover:text-accent transition-colors",children:"Get Quote"})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold",children:"Our Services"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{className:"text-sm opacity-90",children:"Health Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Motor Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Life Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Property Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Travel Insurance"}),u.jsx("li",{className:"text-sm opacity-90",children:"Corporate Packages"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"text-lg font-semibold",children:"Contact Us"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(y,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"+254720769993 / +254758301346"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"underwriting@galloways.co.ke"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"quotations@galloways.co.ke"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"customerservice@galloways.co.ke"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"Claims@galloways.co.ke"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(v,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"info@galloways.co.ke"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(b,{className:"h-4 w-4"}),u.jsx("span",{className:"text-sm",children:"Nairobi, Kenya"})]})]})]})]}),u.jsxs("div",{className:"border-t border-primary-foreground/20 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center",children:[u.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:u.jsxs("div",{className:"bg-white rounded-full shadow-lg flex items-center px-4 py-2 border border-primary",children:[u.jsx("span",{className:"mr-2 text-primary font-semibold",children:"Live Chat"}),u.jsx("button",{className:"bg-primary text-white rounded-full px-3 py-1 font-bold hover:bg-primary/90 focus:outline-none",onClick:()=>window.open("https://wa.me/254720769993?text=Hello%20Galloways%20Insurance%20Agency%20-%20I%20need%20assistance","_blank"),children:"WhatsApp Chat"})]})}),u.jsx("div",{className:"text-sm opacity-90",children:"© 2025 Galloways Insurance Agencies & Consultancy Services. All rights reserved."}),u.jsx("div",{className:"text-sm opacity-90 mt-4 md:mt-0",children:"Licensed by Insurance Regulatory Authority (IRA) Kenya"})]})]})}),xc=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:ms("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));xc.displayName="Card";const vc=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:ms("flex flex-col space-y-1.5 p-6",e),...t}));vc.displayName="CardHeader";const yc=s.forwardRef(({className:e,...t},s)=>u.jsx("h3",{ref:s,className:ms("text-2xl font-semibold leading-none tracking-tight",e),...t}));yc.displayName="CardTitle";const bc=s.forwardRef(({className:e,...t},s)=>u.jsx("p",{ref:s,className:ms("text-sm text-muted-foreground",e),...t}));bc.displayName="CardDescription";const wc=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:ms("p-6 pt-0",e),...t}));wc.displayName="CardContent";s.forwardRef(({className:e,...t},s)=>u.jsx("div",{ref:s,className:ms("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";const jc=s.forwardRef(({className:e,type:t,...s},a)=>u.jsx("input",{type:t,className:ms("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));jc.displayName="Input";const Nc=s.forwardRef(({className:e,...t},s)=>u.jsx("textarea",{className:ms("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));Nc.displayName="Textarea";var _c=s.forwardRef((e,t)=>u.jsx(Ge.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));_c.displayName="Label";var Sc=_c;const kc=bt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Cc=s.forwardRef(({className:e,...t},s)=>u.jsx(Sc,{ref:s,className:ms(kc(),e),...t}));Cc.displayName=Sc.displayName;var Tc="focusScope.autoFocusOnMount",Ec="focusScope.autoFocusOnUnmount",Rc={bubbles:!1,cancelable:!0},Dc=s.forwardRef((e,t)=>{const{loop:a=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=e,[l,c]=s.useState(null),d=Je(r),h=Je(i),m=s.useRef(null),p=$e(t,e=>c(e)),f=s.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;s.useEffect(()=>{if(n){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?m.current=t:Oc(m.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||Oc(m.current,{select:!0}))},s=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Oc(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const a=new MutationObserver(s);return l&&a.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),a.disconnect()}}},[n,l,f.paused]),s.useEffect(()=>{if(l){Mc.add(f);const t=document.activeElement;if(!l.contains(t)){const s=new CustomEvent(Tc,Rc);l.addEventListener(Tc,d),l.dispatchEvent(s),s.defaultPrevented||(!function(e,{select:t=!1}={}){const s=document.activeElement;for(const a of e)if(Oc(a,{select:t}),document.activeElement!==s)return}((e=Pc(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Oc(l))}return()=>{l.removeEventListener(Tc,d),setTimeout(()=>{const e=new CustomEvent(Ec,Rc);l.addEventListener(Ec,h),l.dispatchEvent(e),e.defaultPrevented||Oc(t??document.body,{select:!0}),l.removeEventListener(Ec,h),Mc.remove(f)},0)}}var e},[l,d,h,f]);const g=s.useCallback(e=>{if(!a&&!n)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[n,r]=function(e){const t=Pc(e),s=Ic(t,e),a=Ic(t.reverse(),e);return[s,a]}(t);n&&r?e.shiftKey||s!==r?e.shiftKey&&s===n&&(e.preventDefault(),a&&Oc(r,{select:!0})):(e.preventDefault(),a&&Oc(n,{select:!0})):s===t&&e.preventDefault()}},[a,n,f.paused]);return u.jsx(Ge.div,{tabIndex:-1,...o,ref:p,onKeyDown:g})});function Pc(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Ic(e,t){for(const s of e)if(!Ac(s,{upTo:t}))return s}function Ac(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Oc(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Dc.displayName="FocusScope";var Mc=function(){let e=[];return{add(t){const s=e[0];t!==s&&(null==s||s.pause()),e=$c(e,t),e.unshift(t)},remove(t){var s;e=$c(e,t),null==(s=e[0])||s.resume()}}}();function $c(e,t){const s=[...e],a=s.indexOf(t);return-1!==a&&s.splice(a,1),s}var Lc=0;function Uc(){s.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Fc()),document.body.insertAdjacentElement("beforeend",e[1]??Fc()),Lc++,()=>{1===Lc&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Lc--}},[])}function Fc(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var qc=function(){return qc=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},qc.apply(this,arguments)};function zc(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]])}return s}"function"==typeof SuppressedError&&SuppressedError;var Bc="right-scroll-bar-position",Wc="width-before-scroll-bar";function Hc(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Kc="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,Gc=new WeakMap;function Vc(e,t){var a,n,r,i=(a=null,n=function(t){return e.forEach(function(e){return Hc(e,t)})},(r=s.useState(function(){return{value:a,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0]).callback=n,r.facade);return Kc(function(){var t=Gc.get(i);if(t){var s=new Set(t),a=new Set(e),n=i.current;s.forEach(function(e){a.has(e)||Hc(e,null)}),a.forEach(function(e){s.has(e)||Hc(e,n)})}Gc.set(i,e)},[e]),i}function Jc(e){return e}var Yc=function(e){var t=e.sideCar,a=zc(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return s.createElement(n,qc({},a))};Yc.isSideCarExport=!0;var Qc=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=Jc);var s=[],a=!1;return{read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(e){var n=t(e,a);return s.push(n),function(){s=s.filter(function(e){return e!==n})}},assignSyncMedium:function(e){for(a=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){a=!0;var t=[];if(s.length){var n=s;s=[],n.forEach(e),t=s}var r=function(){var s=t;t=[],s.forEach(e)},i=function(){return Promise.resolve().then(r)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}}}(null);return t.options=qc({async:!0,ssr:!1},e),t}(),Xc=function(){},Zc=s.forwardRef(function(e,t){var a=s.useRef(null),n=s.useState({onScrollCapture:Xc,onWheelCapture:Xc,onTouchMoveCapture:Xc}),r=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,m=e.sideCar,p=e.noRelative,f=e.noIsolation,g=e.inert,x=e.allowPinchZoom,v=e.as,y=void 0===v?"div":v,b=e.gapMode,w=zc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,N=Vc([a,t]),_=qc(qc({},w),r);return s.createElement(s.Fragment,null,u&&s.createElement(j,{sideCar:Qc,removeScrollBar:d,shards:h,noRelative:p,noIsolation:f,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:a,gapMode:b}),o?s.cloneElement(s.Children.only(l),qc(qc({},_),{ref:N})):s.createElement(y,qc({},_,{className:c,ref:N}),l))});Zc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Zc.classNames={fullWidth:Wc,zeroRight:Bc};function ed(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var td=function(){var e=0,t=null;return{add:function(s){var a,n;0==e&&(t=ed())&&(n=s,(a=t).styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sd=function(){var e,t=(e=td(),function(t,a){s.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])});return function(e){var s=e.styles,a=e.dynamic;return t(s,a),null}},ad={left:0,top:0,right:0,gap:0},nd=function(e){return parseInt(e||"",10)||0},rd=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return ad;var t=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],a=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[nd(s),nd(a),nd(n)]}(e),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-s+t[2]-t[0])}},id=sd(),od="data-scroll-locked",ld=function(e,t,s,a){var n=e.left,r=e.top,i=e.right,o=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(a,";\n   padding-right: ").concat(o,"px ").concat(a,";\n  }\n  body[").concat(od,"] {\n    overflow: hidden ").concat(a,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(a,";"),"margin"===s&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(r,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(a,";\n    "),"padding"===s&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Bc," {\n    right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(Wc," {\n    margin-right: ").concat(o,"px ").concat(a,";\n  }\n  \n  .").concat(Bc," .").concat(Bc," {\n    right: 0 ").concat(a,";\n  }\n  \n  .").concat(Wc," .").concat(Wc," {\n    margin-right: 0 ").concat(a,";\n  }\n  \n  body[").concat(od,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},cd=function(){var e=parseInt(document.body.getAttribute(od)||"0",10);return isFinite(e)?e:0},dd=function(e){var t=e.noRelative,a=e.noImportant,n=e.gapMode,r=void 0===n?"margin":n;s.useEffect(function(){return document.body.setAttribute(od,(cd()+1).toString()),function(){var e=cd()-1;e<=0?document.body.removeAttribute(od):document.body.setAttribute(od,e.toString())}},[]);var i=s.useMemo(function(){return rd(r)},[r]);return s.createElement(id,{styles:ld(i,!t,r,a?"":"!important")})},ud=!1;if("undefined"!=typeof window)try{var hd=Object.defineProperty({},"passive",{get:function(){return ud=!0,!0}});window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch(Cg){ud=!1}var md=!!ud&&{passive:!1},pd=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===s[t])},fd=function(e,t){var s=t.ownerDocument,a=t;do{if("undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot&&(a=a.host),gd(e,a)){var n=xd(e,a);if(n[1]>n[2])return!0}a=a.parentNode}while(a&&a!==s.body);return!1},gd=function(e,t){return"v"===e?function(e){return pd(e,"overflowY")}(t):function(e){return pd(e,"overflowX")}(t)},xd=function(e,t){return"v"===e?[(s=t).scrollTop,s.scrollHeight,s.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var s},vd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yd=function(e){return[e.deltaX,e.deltaY]},bd=function(e){return e&&"current"in e?e.current:e},wd=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},jd=0,Nd=[];function _d(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Sd=(kd=function(e){var t=s.useRef([]),a=s.useRef([0,0]),n=s.useRef(),r=s.useState(jd++)[0],i=s.useState(sd)[0],o=s.useRef(e);s.useEffect(function(){o.current=e},[e]),s.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=function(e,t,s){if(s||2===arguments.length)for(var a,n=0,r=t.length;n<r;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(bd),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=s.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var s,r=vd(e),i=a.current,l="deltaX"in e?e.deltaX:i[0]-r[0],c="deltaY"in e?e.deltaY:i[1]-r[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=fd(u,d);if(!h)return!0;if(h?s=u:(s="v"===u?"h":"v",h=fd(u,d)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=s),!s)return!0;var m=n.current||s;return function(e,t,s,a,n){var r=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=r*a,o=s.target,l=t.contains(o),c=!1,d=i>0,u=0,h=0;do{if(!o)break;var m=xd(e,o),p=m[0],f=m[1]-m[2]-r*p;(p||f)&&gd(e,o)&&(u+=f,h+=p);var g=o.parentNode;o=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return d&&(Math.abs(u)<1||!n)?c=!0:d||!(Math.abs(h)<1)&&n||(c=!0),c}(m,t,e,"h"===m?l:c,!0)},[]),c=s.useCallback(function(e){var s=e;if(Nd.length&&Nd[Nd.length-1]===i){var a="deltaY"in s?yd(s):vd(s),n=t.current.filter(function(e){return e.name===s.type&&(e.target===s.target||s.target===e.shadowParent)&&(t=e.delta,n=a,t[0]===n[0]&&t[1]===n[1]);var t,n})[0];if(n&&n.should)s.cancelable&&s.preventDefault();else if(!n){var r=(o.current.shards||[]).map(bd).filter(Boolean).filter(function(e){return e.contains(s.target)});(r.length>0?l(s,r[0]):!o.current.noIsolation)&&s.cancelable&&s.preventDefault()}}},[]),d=s.useCallback(function(e,s,a,n){var r={name:e,delta:s,target:a,should:n,shadowParent:_d(a)};t.current.push(r),setTimeout(function(){t.current=t.current.filter(function(e){return e!==r})},1)},[]),u=s.useCallback(function(e){a.current=vd(e),n.current=void 0},[]),h=s.useCallback(function(t){d(t.type,yd(t),t.target,l(t,e.lockRef.current))},[]),m=s.useCallback(function(t){d(t.type,vd(t),t.target,l(t,e.lockRef.current))},[]);s.useEffect(function(){return Nd.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,md),document.addEventListener("touchmove",c,md),document.addEventListener("touchstart",u,md),function(){Nd=Nd.filter(function(e){return e!==i}),document.removeEventListener("wheel",c,md),document.removeEventListener("touchmove",c,md),document.removeEventListener("touchstart",u,md)}},[]);var p=e.removeScrollBar,f=e.inert;return s.createElement(s.Fragment,null,f?s.createElement(i,{styles:wd(r)}):null,p?s.createElement(dd,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},Qc.useMedium(kd),Yc);var kd,Cd=s.forwardRef(function(e,t){return s.createElement(Zc,qc({},e,{ref:t,sideCar:Sd}))});Cd.classNames=Zc.classNames;var Td=new WeakMap,Ed=new WeakMap,Rd={},Dd=0,Pd=function(e){return e&&(e.host||Pd(e.parentNode))},Id=function(e,t,s,a){var n=function(e,t){return t.map(function(t){if(e.contains(t))return t;var s=Pd(t);return s&&e.contains(s)?s:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Rd[s]||(Rd[s]=new WeakMap);var r=Rd[s],i=[],o=new Set,l=new Set(n),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};n.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(a),n=null!==t&&"false"!==t,l=(Td.get(e)||0)+1,c=(r.get(e)||0)+1;Td.set(e,l),r.set(e,c),i.push(e),1===l&&n&&Ed.set(e,!0),1===c&&e.setAttribute(s,"true"),n||e.setAttribute(a,"true")}catch(u){}})};return d(t),o.clear(),Dd++,function(){i.forEach(function(e){var t=Td.get(e)-1,n=r.get(e)-1;Td.set(e,t),r.set(e,n),t||(Ed.has(e)||e.removeAttribute(a),Ed.delete(e)),n||e.removeAttribute(s)}),--Dd||(Td=new WeakMap,Td=new WeakMap,Ed=new WeakMap,Rd={})}},Ad=function(e,t,s){void 0===s&&(s="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),n=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live]"))),Id(a,n,s,"aria-hidden")):function(){return null}},Od="Dialog",[Md,$d]=Le(Od),[Ld,Ud]=Md(Od),Fd=e=>{const{__scopeDialog:t,children:a,open:n,defaultOpen:r,onOpenChange:i,modal:o=!0}=e,l=s.useRef(null),c=s.useRef(null),[d,h]=ht({prop:n,defaultProp:r??!1,onChange:i,caller:Od});return u.jsx(Ld,{scope:t,triggerRef:l,contentRef:c,contentId:Ms(),titleId:Ms(),descriptionId:Ms(),open:d,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(e=>!e),[h]),modal:o,children:a})};Fd.displayName=Od;var qd="DialogTrigger",zd=s.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,n=Ud(qd,s),r=$e(t,n.triggerRef);return u.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":lu(n.open),...a,ref:r,onClick:Ae(e.onClick,n.onOpenToggle)})});zd.displayName=qd;var Bd="DialogPortal",[Wd,Hd]=Md(Bd,{forceMount:void 0}),Kd=e=>{const{__scopeDialog:t,forceMount:a,children:n,container:r}=e,i=Ud(Bd,t);return u.jsx(Wd,{scope:t,forceMount:a,children:s.Children.map(n,e=>u.jsx(ct,{present:a||i.open,children:u.jsx(lt,{asChild:!0,container:r,children:e})}))})};Kd.displayName=Bd;var Gd="DialogOverlay",Vd=s.forwardRef((e,t)=>{const s=Hd(Gd,e.__scopeDialog),{forceMount:a=s.forceMount,...n}=e,r=Ud(Gd,e.__scopeDialog);return r.modal?u.jsx(ct,{present:a||r.open,children:u.jsx(Yd,{...n,ref:t})}):null});Vd.displayName=Gd;var Jd=Fe("DialogOverlay.RemoveScroll"),Yd=s.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,n=Ud(Gd,s);return u.jsx(Cd,{as:Jd,allowPinchZoom:!0,shards:[n.contentRef],children:u.jsx(Ge.div,{"data-state":lu(n.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Qd="DialogContent",Xd=s.forwardRef((e,t)=>{const s=Hd(Qd,e.__scopeDialog),{forceMount:a=s.forceMount,...n}=e,r=Ud(Qd,e.__scopeDialog);return u.jsx(ct,{present:a||r.open,children:r.modal?u.jsx(Zd,{...n,ref:t}):u.jsx(eu,{...n,ref:t})})});Xd.displayName=Qd;var Zd=s.forwardRef((e,t)=>{const a=Ud(Qd,e.__scopeDialog),n=s.useRef(null),r=$e(t,a.contentRef,n);return s.useEffect(()=>{const e=n.current;if(e)return Ad(e)},[]),u.jsx(tu,{...e,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=a.triggerRef.current)||t.focus()}),onPointerDownOutside:Ae(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:Ae(e.onFocusOutside,e=>e.preventDefault())})}),eu=s.forwardRef((e,t)=>{const a=Ud(Qd,e.__scopeDialog),n=s.useRef(!1),r=s.useRef(!1);return u.jsx(tu,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,i;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(n.current||null==(i=a.triggerRef.current)||i.focus(),t.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:t=>{var s,i;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const o=t.target;(null==(i=a.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),tu=s.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=e,l=Ud(Qd,a),c=s.useRef(null),d=$e(t,c);return Uc(),u.jsxs(u.Fragment,{children:[u.jsx(Dc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:u.jsx(tt,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":lu(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(hu,{titleId:l.titleId}),u.jsx(mu,{contentRef:c,descriptionId:l.descriptionId})]})]})}),su="DialogTitle",au=s.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,n=Ud(su,s);return u.jsx(Ge.h2,{id:n.titleId,...a,ref:t})});au.displayName=su;var nu="DialogDescription",ru=s.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,n=Ud(nu,s);return u.jsx(Ge.p,{id:n.descriptionId,...a,ref:t})});ru.displayName=nu;var iu="DialogClose",ou=s.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,n=Ud(iu,s);return u.jsx(Ge.button,{type:"button",...a,ref:t,onClick:Ae(e.onClick,()=>n.onOpenChange(!1))})});function lu(e){return e?"open":"closed"}ou.displayName=iu;var cu="DialogTitleWarning",[du,uu]=function(e,t){const a=s.createContext(t),n=e=>{const{children:t,...n}=e,r=s.useMemo(()=>n,Object.values(n));return u.jsx(a.Provider,{value:r,children:t})};return n.displayName=e+"Provider",[n,function(n){const r=s.useContext(a);if(r)return r;if(void 0!==t)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}]}(cu,{contentName:Qd,titleName:su,docsSlug:"dialog"}),hu=({titleId:e})=>{const t=uu(cu),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return s.useEffect(()=>{if(e){document.getElementById(e)}},[a,e]),null},mu=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uu("DialogDescriptionWarning").contentName}}.`;return s.useEffect(()=>{var s;const a=null==(s=e.current)?void 0:s.getAttribute("aria-describedby");if(t&&a){document.getElementById(t)}},[a,e,t]),null},pu=Vd,fu=Xd,gu=au,xu=ru,vu=ou;const yu=Fd,bu=zd,wu=Kd,ju=s.forwardRef(({className:e,...t},s)=>u.jsx(pu,{ref:s,className:ms("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ju.displayName=pu.displayName;const Nu=s.forwardRef(({className:e,children:t,...s},a)=>u.jsxs(wu,{children:[u.jsx(ju,{}),u.jsxs(fu,{ref:a,className:ms("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,u.jsxs(vu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(h,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nu.displayName=fu.displayName;const _u=({className:e,...t})=>u.jsx("div",{className:ms("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});_u.displayName="DialogHeader";const Su=({className:e,...t})=>u.jsx("div",{className:ms("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Su.displayName="DialogFooter";const ku=s.forwardRef(({className:e,...t},s)=>u.jsx(gu,{ref:s,className:ms("text-lg font-semibold leading-none tracking-tight",e),...t}));ku.displayName=gu.displayName;const Cu=s.forwardRef(({className:e,...t},s)=>u.jsx(xu,{ref:s,className:ms("text-sm text-muted-foreground",e),...t}));Cu.displayName=xu.displayName;const Tu=bt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Eu({className:e,variant:t,...s}){return u.jsx("div",{className:ms(Tu({variant:t}),e),...s})}function Ru(e,[t,s]){return Math.min(s,Math.max(t,e))}var Du=s.createContext(void 0);function Pu(e){const t=s.useContext(Du);return e||t||"ltr"}function Iu(e){const t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Au=[" ","Enter","ArrowUp","ArrowDown"],Ou=[" ","Enter"],Mu="Select",[$u,Lu,Uu]=Ke(Mu),[Fu,qu]=Le(Mu,[Uu,Pn]),zu=Pn(),[Bu,Wu]=Fu(Mu),[Hu,Ku]=Fu(Mu),Gu=e=>{const{__scopeSelect:t,children:a,open:n,defaultOpen:r,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:m,disabled:p,required:f,form:g}=e,x=zu(t),[v,y]=s.useState(null),[b,w]=s.useState(null),[j,N]=s.useState(!1),_=Pu(d),[S,k]=ht({prop:n,defaultProp:r??!1,onChange:i,caller:Mu}),[C,T]=ht({prop:o,defaultProp:l,onChange:c,caller:Mu}),E=s.useRef(null),R=!v||(g||!!v.closest("form")),[D,P]=s.useState(new Set),I=Array.from(D).map(e=>e.props.value).join(";");return u.jsx(Vn,{...x,children:u.jsxs(Bu,{required:f,scope:t,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:Ms(),value:C,onValueChange:T,open:S,onOpenChange:k,dir:_,triggerPointerDownPosRef:E,disabled:p,children:[u.jsx($u.Provider,{scope:t,children:u.jsx(Hu,{scope:e.__scopeSelect,onNativeOptionAdd:s.useCallback(e=>{P(t=>new Set(t).add(e))},[]),onNativeOptionRemove:s.useCallback(e=>{P(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:a})}),R?u.jsxs(Ih,{"aria-hidden":!0,required:f,tabIndex:-1,name:h,autoComplete:m,value:C,onChange:e=>T(e.target.value),disabled:p,form:g,children:[void 0===C?u.jsx("option",{value:""}):null,Array.from(D)]},I):null]})})};Gu.displayName=Mu;var Vu="SelectTrigger",Ju=s.forwardRef((e,t)=>{const{__scopeSelect:a,disabled:n=!1,...r}=e,i=zu(a),o=Wu(Vu,a),l=o.disabled||n,c=$e(t,o.onTriggerChange),d=Lu(a),h=s.useRef("touch"),[m,p,f]=Oh(e=>{const t=d().filter(e=>!e.disabled),s=t.find(e=>e.value===o.value),a=Mh(t,e,s);void 0!==a&&o.onValueChange(a.value)}),g=e=>{l||(o.onOpenChange(!0),f()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return u.jsx(Jn,{asChild:!0,...i,children:u.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Ah(o.value)?"":void 0,...r,ref:c,onClick:Ae(r.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&g(e)}),onPointerDown:Ae(r.onPointerDown,e=>{h.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:Ae(r.onKeyDown,e=>{const t=""!==m.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),t&&" "===e.key||Au.includes(e.key)&&(g(),e.preventDefault())})})})});Ju.displayName=Vu;var Yu="SelectValue",Qu=s.forwardRef((e,t)=>{const{__scopeSelect:s,className:a,style:n,children:r,placeholder:i="",...o}=e,l=Wu(Yu,s),{onValueNodeHasChildrenChange:c}=l,d=void 0!==r,h=$e(t,l.onValueNodeChange);return ot(()=>{c(d)},[c,d]),u.jsx(Ge.span,{...o,ref:h,style:{pointerEvents:"none"},children:Ah(l.value)?u.jsx(u.Fragment,{children:i}):r})});Qu.displayName=Yu;var Xu=s.forwardRef((e,t)=>{const{__scopeSelect:s,children:a,...n}=e;return u.jsx(Ge.span,{"aria-hidden":!0,...n,ref:t,children:a||"▼"})});Xu.displayName="SelectIcon";var Zu=e=>u.jsx(lt,{asChild:!0,...e});Zu.displayName="SelectPortal";var eh="SelectContent",th=s.forwardRef((e,t)=>{const a=Wu(eh,e.__scopeSelect),[r,i]=s.useState();if(ot(()=>{i(new DocumentFragment)},[]),!a.open){const t=r;return t?n.createPortal(u.jsx(ah,{scope:e.__scopeSelect,children:u.jsx($u.Slot,{scope:e.__scopeSelect,children:u.jsx("div",{children:e.children})})}),t):null}return u.jsx(ih,{...e,ref:t})});th.displayName=eh;var sh=10,[ah,nh]=Fu(eh),rh=Fe("SelectContent.RemoveScroll"),ih=s.forwardRef((e,t)=>{const{__scopeSelect:a,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v,...y}=e,b=Wu(eh,a),[w,j]=s.useState(null),[N,_]=s.useState(null),S=$e(t,e=>j(e)),[k,C]=s.useState(null),[T,E]=s.useState(null),R=Lu(a),[D,P]=s.useState(!1),I=s.useRef(!1);s.useEffect(()=>{if(w)return Ad(w)},[w]),Uc();const A=s.useCallback(e=>{const[t,...s]=R().map(e=>e.ref.current),[a]=s.slice(-1),n=document.activeElement;for(const r of e){if(r===n)return;if(null==r||r.scrollIntoView({block:"nearest"}),r===t&&N&&(N.scrollTop=0),r===a&&N&&(N.scrollTop=N.scrollHeight),null==r||r.focus(),document.activeElement!==n)return}},[R,N]),O=s.useCallback(()=>A([k,w]),[A,k,w]);s.useEffect(()=>{D&&O()},[D,O]);const{onOpenChange:M,triggerPointerDownPosRef:$}=b;s.useEffect(()=>{if(w){let e={x:0,y:0};const t=t=>{var s,a;e={x:Math.abs(Math.round(t.pageX)-((null==(s=$.current)?void 0:s.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(a=$.current)?void 0:a.y)??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():w.contains(s.target)||M(!1),document.removeEventListener("pointermove",t),$.current=null};return null!==$.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[w,M,$]),s.useEffect(()=>{const e=()=>M(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[M]);const[L,U]=Oh(e=>{const t=R().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),a=Mh(t,e,s);a&&setTimeout(()=>a.ref.current.focus())}),F=s.useCallback((e,t,s)=>{const a=!I.current&&!s;(void 0!==b.value&&b.value===t||a)&&(C(e),a&&(I.current=!0))},[b.value]),q=s.useCallback(()=>null==w?void 0:w.focus(),[w]),z=s.useCallback((e,t,s)=>{const a=!I.current&&!s;(void 0!==b.value&&b.value===t||a)&&E(e)},[b.value]),B="popper"===n?lh:oh,W=B===lh?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:f,sticky:g,hideWhenDetached:x,avoidCollisions:v}:{};return u.jsx(ah,{scope:a,content:w,viewport:N,onViewportChange:_,itemRefCallback:F,selectedItem:k,onItemLeave:q,itemTextRefCallback:z,focusSelectedItem:O,selectedItemText:T,position:n,isPositioned:D,searchRef:L,children:u.jsx(Cd,{as:rh,allowPinchZoom:!0,children:u.jsx(Dc,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Ae(r,e=>{var t;null==(t=b.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:u.jsx(tt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:u.jsx(B,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault(),...y,...W,onPlaced:()=>P(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ae(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||U(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,a=t.indexOf(s);t=t.slice(a+1)}setTimeout(()=>A(t)),e.preventDefault()}})})})})})})});ih.displayName="SelectContentImpl";var oh=s.forwardRef((e,t)=>{const{__scopeSelect:a,onPlaced:n,...r}=e,i=Wu(eh,a),o=nh(eh,a),[l,c]=s.useState(null),[d,h]=s.useState(null),m=$e(t,e=>h(e)),p=Lu(a),f=s.useRef(!1),g=s.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=o,w=s.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&v&&y){const e=i.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),s=i.valueNode.getBoundingClientRect(),a=y.getBoundingClientRect();if("rtl"!==i.dir){const n=a.left-t.left,r=s.left-n,i=e.left-r,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-sh,u=Ru(r,[sh,Math.max(sh,d-c)]);l.style.minWidth=o+"px",l.style.left=u+"px"}else{const n=t.right-a.right,r=window.innerWidth-s.right-n,i=window.innerWidth-e.right-r,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-sh,u=Ru(r,[sh,Math.max(sh,d-c)]);l.style.minWidth=o+"px",l.style.right=u+"px"}const r=p(),o=window.innerHeight-2*sh,c=x.scrollHeight,u=window.getComputedStyle(d),h=parseInt(u.borderTopWidth,10),m=parseInt(u.paddingTop,10),g=parseInt(u.borderBottomWidth,10),b=h+m+c+parseInt(u.paddingBottom,10)+g,w=Math.min(5*v.offsetHeight,b),j=window.getComputedStyle(x),N=parseInt(j.paddingTop,10),_=parseInt(j.paddingBottom,10),S=e.top+e.height/2-sh,k=o-S,C=v.offsetHeight/2,T=h+m+(v.offsetTop+C),E=b-T;if(T<=S){const e=r.length>0&&v===r[r.length-1].ref.current;l.style.bottom="0px";const t=d.clientHeight-x.offsetTop-x.offsetHeight,s=T+Math.max(k,C+(e?_:0)+t+g);l.style.height=s+"px"}else{const e=r.length>0&&v===r[0].ref.current;l.style.top="0px";const t=Math.max(S,h+x.offsetTop+(e?N:0)+C)+E;l.style.height=t+"px",x.scrollTop=T-S+x.offsetTop}l.style.margin=`${sh}px 0`,l.style.minHeight=w+"px",l.style.maxHeight=o+"px",null==n||n(),requestAnimationFrame(()=>f.current=!0)}},[p,i.trigger,i.valueNode,l,d,x,v,y,i.dir,n]);ot(()=>w(),[w]);const[j,N]=s.useState();ot(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const _=s.useCallback(e=>{e&&!0===g.current&&(w(),null==b||b(),g.current=!1)},[w,b]);return u.jsx(ch,{scope:a,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:u.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:u.jsx(Ge.div,{...r,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});oh.displayName="SelectItemAlignedPosition";var lh=s.forwardRef((e,t)=>{const{__scopeSelect:s,align:a="start",collisionPadding:n=sh,...r}=e,i=zu(s);return u.jsx(Yn,{...i,...r,ref:t,align:a,collisionPadding:n,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lh.displayName="SelectPopperPosition";var[ch,dh]=Fu(eh,{}),uh="SelectViewport",hh=s.forwardRef((e,t)=>{const{__scopeSelect:a,nonce:n,...r}=e,i=nh(uh,a),o=dh(uh,a),l=$e(t,i.onViewportChange),c=s.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),u.jsx($u.Slot,{scope:a,children:u.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Ae(r.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:a}=o;if((null==a?void 0:a.current)&&s){const e=Math.abs(c.current-t.scrollTop);if(e>0){const a=window.innerHeight-2*sh,n=parseFloat(s.style.minHeight),r=parseFloat(s.style.height),i=Math.max(n,r);if(i<a){const n=i+e,r=Math.min(a,n),o=n-r;s.style.height=r+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}c.current=t.scrollTop})})})]})});hh.displayName=uh;var mh="SelectGroup",[ph,fh]=Fu(mh);s.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e,n=Ms();return u.jsx(ph,{scope:s,id:n,children:u.jsx(Ge.div,{role:"group","aria-labelledby":n,...a,ref:t})})}).displayName=mh;var gh="SelectLabel",xh=s.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e,n=fh(gh,s);return u.jsx(Ge.div,{id:n.id,...a,ref:t})});xh.displayName=gh;var vh="SelectItem",[yh,bh]=Fu(vh),wh=s.forwardRef((e,t)=>{const{__scopeSelect:a,value:n,disabled:r=!1,textValue:i,...o}=e,l=Wu(vh,a),c=nh(vh,a),d=l.value===n,[h,m]=s.useState(i??""),[p,f]=s.useState(!1),g=$e(t,e=>{var t;return null==(t=c.itemRefCallback)?void 0:t.call(c,e,n,r)}),x=Ms(),v=s.useRef("touch"),y=()=>{r||(l.onValueChange(n),l.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(yh,{scope:a,value:n,disabled:r,textId:x,isSelected:d,onItemTextChange:s.useCallback(e=>{m(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:u.jsx($u.ItemSlot,{scope:a,value:n,disabled:r,textValue:h,children:u.jsx(Ge.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:Ae(o.onFocus,()=>f(!0)),onBlur:Ae(o.onBlur,()=>f(!1)),onClick:Ae(o.onClick,()=>{"mouse"!==v.current&&y()}),onPointerUp:Ae(o.onPointerUp,()=>{"mouse"===v.current&&y()}),onPointerDown:Ae(o.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:Ae(o.onPointerMove,e=>{var t;v.current=e.pointerType,r?null==(t=c.onItemLeave)||t.call(c):"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=c.onItemLeave)||t.call(c))}),onKeyDown:Ae(o.onKeyDown,e=>{var t;""!==(null==(t=c.searchRef)?void 0:t.current)&&" "===e.key||(Ou.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});wh.displayName=vh;var jh="SelectItemText",Nh=s.forwardRef((e,t)=>{const{__scopeSelect:a,className:r,style:i,...o}=e,l=Wu(jh,a),c=nh(jh,a),d=bh(jh,a),h=Ku(jh,a),[m,p]=s.useState(null),f=$e(t,e=>p(e),d.onItemTextChange,e=>{var t;return null==(t=c.itemTextRefCallback)?void 0:t.call(c,e,d.value,d.disabled)}),g=null==m?void 0:m.textContent,x=s.useMemo(()=>u.jsx("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=h;return ot(()=>(v(x),()=>y(x)),[v,y,x]),u.jsxs(u.Fragment,{children:[u.jsx(Ge.span,{id:d.textId,...o,ref:f}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?n.createPortal(o.children,l.valueNode):null]})});Nh.displayName=jh;var _h="SelectItemIndicator",Sh=s.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e;return bh(_h,s).isSelected?u.jsx(Ge.span,{"aria-hidden":!0,...a,ref:t}):null});Sh.displayName=_h;var kh="SelectScrollUpButton",Ch=s.forwardRef((e,t)=>{const a=nh(kh,e.__scopeSelect),n=dh(kh,e.__scopeSelect),[r,i]=s.useState(!1),o=$e(t,n.onScrollButtonChange);return ot(()=>{if(a.viewport&&a.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=a.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[a.viewport,a.isPositioned]),r?u.jsx(Rh,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=a;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});Ch.displayName=kh;var Th="SelectScrollDownButton",Eh=s.forwardRef((e,t)=>{const a=nh(Th,e.__scopeSelect),n=dh(Th,e.__scopeSelect),[r,i]=s.useState(!1),o=$e(t,n.onScrollButtonChange);return ot(()=>{if(a.viewport&&a.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;i(s)};const t=a.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[a.viewport,a.isPositioned]),r?u.jsx(Rh,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=a;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Eh.displayName=Th;var Rh=s.forwardRef((e,t)=>{const{__scopeSelect:a,onAutoScroll:n,...r}=e,i=nh("SelectScrollButton",a),o=s.useRef(null),l=Lu(a),c=s.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return s.useEffect(()=>()=>c(),[c]),ot(()=>{var e;const t=l().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[l]),u.jsx(Ge.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:Ae(r.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(n,50))}),onPointerMove:Ae(r.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===o.current&&(o.current=window.setInterval(n,50))}),onPointerLeave:Ae(r.onPointerLeave,()=>{c()})})}),Dh=s.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e;return u.jsx(Ge.div,{"aria-hidden":!0,...a,ref:t})});Dh.displayName="SelectSeparator";var Ph="SelectArrow";s.forwardRef((e,t)=>{const{__scopeSelect:s,...a}=e,n=zu(s),r=Wu(Ph,s),i=nh(Ph,s);return r.open&&"popper"===i.position?u.jsx(Qn,{...n,...a,ref:t}):null}).displayName=Ph;var Ih=s.forwardRef(({__scopeSelect:e,value:t,...a},n)=>{const r=s.useRef(null),i=$e(n,r),o=Iu(t);return s.useEffect(()=>{const e=r.current;if(!e)return;const s=window.HTMLSelectElement.prototype,a=Object.getOwnPropertyDescriptor(s,"value").set;if(o!==t&&a){const s=new Event("change",{bubbles:!0});a.call(e,t),e.dispatchEvent(s)}},[o,t]),u.jsx(Ge.select,{...a,style:{...mt,...a.style},ref:i,defaultValue:t})});function Ah(e){return""===e||void 0===e}function Oh(e){const t=Je(e),a=s.useRef(""),n=s.useRef(0),r=s.useCallback(e=>{const s=a.current+e;t(s),function e(t){a.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),i=s.useCallback(()=>{a.current="",window.clearTimeout(n.current)},[]);return s.useEffect(()=>()=>window.clearTimeout(n.current),[]),[a,r,i]}function Mh(e,t,s){const a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=s?e.indexOf(s):-1;let r=(i=e,o=Math.max(n,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===a.length&&(r=r.filter(e=>e!==s));const l=r.find(e=>e.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==s?l:void 0}Ih.displayName="SelectBubbleInput";var $h=Ju,Lh=Xu,Uh=Zu,Fh=th,qh=hh,zh=xh,Bh=wh,Wh=Nh,Hh=Sh,Kh=Ch,Gh=Eh,Vh=Dh;const Jh=Gu,Yh=Qu,Qh=s.forwardRef(({className:e,children:t,...s},a)=>u.jsxs($h,{ref:a,className:ms("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,u.jsx(Lh,{asChild:!0,children:u.jsx(w,{className:"h-4 w-4 opacity-50"})})]}));Qh.displayName=$h.displayName;const Xh=s.forwardRef(({className:e,...t},s)=>u.jsx(Kh,{ref:s,className:ms("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(j,{className:"h-4 w-4"})}));Xh.displayName=Kh.displayName;const Zh=s.forwardRef(({className:e,...t},s)=>u.jsx(Gh,{ref:s,className:ms("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(w,{className:"h-4 w-4"})}));Zh.displayName=Gh.displayName;const em=s.forwardRef(({className:e,children:t,position:s="popper",...a},n)=>u.jsx(Uh,{children:u.jsxs(Fh,{ref:n,className:ms("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[u.jsx(Xh,{}),u.jsx(qh,{className:ms("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),u.jsx(Zh,{})]})}));em.displayName=Fh.displayName;s.forwardRef(({className:e,...t},s)=>u.jsx(zh,{ref:s,className:ms("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=zh.displayName;const tm=s.forwardRef(({className:e,children:t,...s},a)=>u.jsxs(Bh,{ref:a,className:ms("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Hh,{children:u.jsx(N,{className:"h-4 w-4"})})}),u.jsx(Wh,{children:t})]}));tm.displayName=Bh.displayName;s.forwardRef(({className:e,...t},s)=>u.jsx(Vh,{ref:s,className:ms("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=Vh.displayName;var sm="rovingFocusGroup.onEntryFocus",am={bubbles:!1,cancelable:!0},nm="RovingFocusGroup",[rm,im,om]=Ke(nm),[lm,cm]=Le(nm,[om]),[dm,um]=lm(nm),hm=s.forwardRef((e,t)=>u.jsx(rm.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(rm.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(mm,{...e,ref:t})})}));hm.displayName=nm;var mm=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:n,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=e,p=s.useRef(null),f=$e(t,p),g=Pu(i),[x,v]=ht({prop:o,defaultProp:l??null,onChange:c,caller:nm}),[y,b]=s.useState(!1),w=Je(d),j=im(a),N=s.useRef(!1),[_,S]=s.useState(0);return s.useEffect(()=>{const e=p.current;if(e)return e.addEventListener(sm,w),()=>e.removeEventListener(sm,w)},[w]),u.jsx(dm,{scope:a,orientation:n,dir:g,loop:r,currentTabStopId:x,onItemFocus:s.useCallback(e=>v(e),[v]),onItemShiftTab:s.useCallback(()=>b(!0),[]),onFocusableItemAdd:s.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>S(e=>e-1),[]),children:u.jsx(Ge.div,{tabIndex:y||0===_?-1:0,"data-orientation":n,...m,ref:f,style:{outline:"none",...e.style},onMouseDown:Ae(e.onMouseDown,()=>{N.current=!0}),onFocus:Ae(e.onFocus,e=>{const t=!N.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(sm,am);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=j().filter(e=>e.focusable);xm([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),h)}}N.current=!1}),onBlur:Ae(e.onBlur,()=>b(!1))})})}),pm="RovingFocusGroupItem",fm=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:n=!0,active:r=!1,tabStopId:i,children:o,...l}=e,c=Ms(),d=i||c,h=um(pm,a),m=h.currentTabStopId===d,p=im(a),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:x}=h;return s.useEffect(()=>{if(n)return f(),()=>g()},[n,f,g]),u.jsx(rm.ItemSlot,{scope:a,id:d,focusable:n,active:r,children:u.jsx(Ge.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:Ae(e.onMouseDown,e=>{n?h.onItemFocus(d):e.preventDefault()}),onFocus:Ae(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ae(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const a=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(a)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)?void 0:gm[a]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const r=n.indexOf(e.currentTarget);n=h.loop?(a=r+1,(s=n).map((e,t)=>s[(a+t)%s.length])):n.slice(r+1)}setTimeout(()=>xm(n))}var s,a}),children:"function"==typeof o?o({isCurrentTabStop:m,hasTabStop:null!=x}):o})})});fm.displayName=pm;var gm={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xm(e,t=!1){const s=document.activeElement;for(const a of e){if(a===s)return;if(a.focus({preventScroll:t}),document.activeElement!==s)return}}var vm=hm,ym=fm,bm="Tabs",[wm,jm]=Le(bm,[cm]),Nm=cm(),[_m,Sm]=wm(bm),km=s.forwardRef((e,t)=>{const{__scopeTabs:s,value:a,onValueChange:n,defaultValue:r,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=Pu(o),[h,m]=ht({prop:a,onChange:n,defaultProp:r??"",caller:bm});return u.jsx(_m,{scope:s,baseId:Ms(),value:h,onValueChange:m,orientation:i,dir:d,activationMode:l,children:u.jsx(Ge.div,{dir:d,"data-orientation":i,...c,ref:t})})});km.displayName=bm;var Cm="TabsList",Tm=s.forwardRef((e,t)=>{const{__scopeTabs:s,loop:a=!0,...n}=e,r=Sm(Cm,s),i=Nm(s);return u.jsx(vm,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:a,children:u.jsx(Ge.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:t})})});Tm.displayName=Cm;var Em="TabsTrigger",Rm=s.forwardRef((e,t)=>{const{__scopeTabs:s,value:a,disabled:n=!1,...r}=e,i=Sm(Em,s),o=Nm(s),l=Im(i.baseId,a),c=Am(i.baseId,a),d=a===i.value;return u.jsx(ym,{asChild:!0,...o,focusable:!n,active:d,children:u.jsx(Ge.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:l,...r,ref:t,onMouseDown:Ae(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(a)}),onKeyDown:Ae(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(a)}),onFocus:Ae(e.onFocus,()=>{const e="manual"!==i.activationMode;d||n||!e||i.onValueChange(a)})})})});Rm.displayName=Em;var Dm="TabsContent",Pm=s.forwardRef((e,t)=>{const{__scopeTabs:a,value:n,forceMount:r,children:i,...o}=e,l=Sm(Dm,a),c=Im(l.baseId,n),d=Am(l.baseId,n),h=n===l.value,m=s.useRef(h);return s.useEffect(()=>{const e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),u.jsx(ct,{present:r||h,children:({present:s})=>u.jsx(Ge.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!s,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:s&&i})})});function Im(e,t){return`${e}-trigger-${t}`}function Am(e,t){return`${e}-content-${t}`}Pm.displayName=Dm;var Om=Tm,Mm=Rm,$m=Pm;const Lm=km,Um=s.forwardRef(({className:e,...t},s)=>u.jsx(Om,{ref:s,className:ms("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Um.displayName=Om.displayName;const Fm=s.forwardRef(({className:e,...t},s)=>u.jsx(Mm,{ref:s,className:ms("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Fm.displayName=Mm.displayName;const qm=s.forwardRef(({className:e,...t},s)=>u.jsx($m,{ref:s,className:ms("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));qm.displayName=$m.displayName;const zm=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=s.useState(null),[a,n]=s.useState(null),[r,i]=s.useState(!0),[o,l]=s.useState({totalClaims:0,totalQuotes:0,totalConsultations:0,totalOutsourcingRequests:0,totalPayments:0,totalDiasporaRequests:0,totalUsers:0,pendingClaims:0,activePolicies:0,monthlyRevenue:0,conversionRate:0,totalSubmissions:0,allSubmissions:{claims:[],outsourcing:[],consultations:[],payments:[],diaspora:[]}}),[c,h]=s.useState([]),[m,p]=s.useState(""),[f,g]=s.useState("all"),x=d(),{toast:v}=Ie();s.useEffect(()=>{y()},[]);const y=async()=>{try{if(!localStorage.getItem("auth_token"))return void x("/auth");const e=await tc.getProfile();if(!e.success||!e.data||!["ADMIN","SUPER_ADMIN"].includes(e.data.role))return v({title:"Access Denied",description:"You don't have permission to access this page.",variant:"destructive"}),void x("/");n({id:e.data.id,full_name:e.data.name,role:e.data.role,email:e.data.email}),t(e),await b()}catch(e){v({title:"Authentication Error",description:"Please log in to access the admin dashboard.",variant:"destructive"}),x("/auth")}finally{i(!1)}},b=async()=>{try{const[e,t]=await Promise.all([dc.getStats(),dc.getActivities()]);e.success&&e.data?(l(e.data),e.data.isRealTime?v({title:"Dashboard Updated",description:"Real-time data from database loaded successfully."}):e.data.isMockData&&v({title:"Demo Data Mode",description:e.message||"Using demo data due to database connectivity.",variant:"default"})):l(e.data||{}),t.success&&t.data?h(t.data):h([])}catch(e){v({title:"Error",description:"Failed to load dashboard data. Using offline mode.",variant:"destructive"}),l({totalClaims:0,totalQuotes:0,totalConsultations:0,totalOutsourcingRequests:0,totalPayments:0,totalDiasporaRequests:0,totalUsers:0,pendingClaims:0,activePolicies:0,monthlyRevenue:0,conversionRate:0,totalSubmissions:0,allSubmissions:{claims:[],outsourcing:[],consultations:[],payments:[],diaspora:[]}}),h([])}},w=e=>new Date(e).toLocaleDateString(),j=e=>{switch(null==e?void 0:e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":case"completed":return"bg-green-100 text-green-800";case"rejected":case"cancelled":return"bg-red-100 text-red-800";case"in_progress":case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(r)return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(fc,{}),u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),u.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading dashboard..."})]})}),u.jsx(gc,{})]});const N=({title:e,value:t,icon:s,trend:a})=>u.jsx(xc,{children:u.jsx(wc,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),u.jsx("p",{className:"text-2xl font-bold",children:t}),a&&u.jsx("p",{className:"text-xs text-muted-foreground",children:a})]}),u.jsx("div",{className:"text-muted-foreground",children:s})]})})}),$=({title:e,value:t,icon:s,change:a,color:n="primary"})=>u.jsx(xc,{children:u.jsx(wc,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),u.jsx("p",{className:"text-2xl font-bold",children:t}),a&&u.jsxs("p",{className:"text-xs "+(a>=0?"text-green-600":"text-red-600"),children:[a>=0?"+":"",a,"% from last month"]})]}),u.jsx(s,{className:`h-8 w-8 text-${n}`})]})})}),L=({title:e,description:t,icon:s,onClick:a})=>u.jsx(xc,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:a,children:u.jsx(wc,{className:"p-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(s,{className:"h-8 w-8 text-primary"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold",children:e}),u.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),u.jsx(M,{className:"h-5 w-5 text-muted-foreground"})]})})}),U=[{name:"Contractors All Risk Proposal",category:"Contractors",url:"/resources/contractors-all-risk-proposal.pdf",type:"form"},{name:"Personal Accident Proposal Form",category:"Claims",url:"/resources/personal-accident-proposal.pdf",type:"form"},{name:"Livestock Insurance Form",category:"Livestock",url:"/resources/livestock-insurance-form.pdf",type:"form",description:"Covers loss of insured livestock due to specified risks."},{name:"Veterinary Insurance Form",category:"Veterinary",url:"/resources/veterinary-insurance-form.pdf",type:"form",description:"Supports coverage for veterinary costs."},{name:"Medical - Individual",category:"Medical",url:"/resources/medical-individual-form.pdf",type:"form",description:"For individual health policy applications."},{name:"Medical - Group",category:"Medical",url:"/resources/medical-group-form.pdf",type:"form",description:"For group health insurance applications."}].filter(e=>("all"===f||e.category===f)&&(e.name.toLowerCase().includes(m.toLowerCase())||e.description&&e.description.toLowerCase().includes(m.toLowerCase())));return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(fc,{}),u.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("section",{className:"mb-12",children:[u.jsx("h1",{className:"text-3xl font-bold mb-4 text-primary",children:"Resources"}),u.jsx("p",{className:"text-muted-foreground mb-6",children:"Download forms, PDFs, and documents for claims, quotes, and insurance products. Use the search and category filter for quick access."}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[u.jsx("input",{type:"text",placeholder:"Search resources...",value:m,onChange:e=>p(e.target.value),className:"border rounded px-4 py-2 w-full md:w-1/2"}),u.jsxs("select",{value:f,onChange:e=>g(e.target.value),className:"border rounded px-4 py-2 w-full md:w-1/4",children:[u.jsx("option",{value:"all",children:"All Categories"}),u.jsx("option",{value:"Contractors",children:"Contractors"}),u.jsx("option",{value:"Claims",children:"Claims"}),u.jsx("option",{value:"Livestock",children:"Livestock"}),u.jsx("option",{value:"Veterinary",children:"Veterinary"}),u.jsx("option",{value:"Medical",children:"Medical"})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.length>0?U.map((e,t)=>u.jsxs(xc,{className:"p-6 flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-2",children:e.name}),e.description&&u.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),u.jsx("span",{className:"inline-block bg-primary/10 text-primary px-2 py-1 rounded text-xs mb-2",children:e.category})]}),u.jsx("a",{href:e.url,download:!0,className:"mt-4 px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 text-center font-medium",children:"Download"})]},t)):u.jsx("p",{className:"text-muted-foreground col-span-3",children:"No resources found for your search."})})]}),u.jsx("div",{className:"bg-primary text-primary-foreground py-4",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),u.jsxs("p",{className:"text-sm opacity-90",children:["Welcome back, ",null==a?void 0:a.full_name]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(pc,{variant:"outline",size:"sm",onClick:async()=>{try{if(!localStorage.getItem("auth_token"))throw new Error("No authentication token found");if(!(await dc.exportPDF()).success)throw new Error("Failed to generate PDF report");const e=`Dashboard Report - ${(new Date).toISOString().split("T")[0]}\n\nThis is a sample PDF export.\nIn a full implementation, this would contain:\n- User statistics\n- Claims data\n- Revenue reports\n- Activity summaries\n\nGenerated on: ${(new Date).toLocaleString()}\n`,t=new Blob([e],{type:"text/plain"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`dashboard-report-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a),v({title:"Success",description:"Report downloaded successfully!"})}catch(e){v({title:"Error",description:"Failed to export PDF report. Please try again.",variant:"destructive"})}},className:"flex items-center gap-2",children:[u.jsx(_,{className:"h-4 w-4"}),"Export PDF Report"]}),u.jsx(Eu,{variant:"secondary",children:null==a?void 0:a.role}),u.jsxs(pc,{variant:"secondary",size:"sm",onClick:()=>{tc.logout(),localStorage.removeItem("auth_token"),x("/")},children:[u.jsx(S,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[u.jsx(N,{title:"Total Claims",value:o.totalClaims,icon:u.jsx(_,{className:"h-6 w-6"}),trend:"+12%"}),u.jsx(N,{title:"Total Quotes",value:o.totalQuotes,icon:u.jsx(k,{className:"h-6 w-6"}),trend:"+8%"}),u.jsx(N,{title:"Consultations",value:o.totalConsultations,icon:u.jsx(C,{className:"h-6 w-6"}),trend:"+15%"}),u.jsx(N,{title:"Pending Claims",value:o.pendingClaims,icon:u.jsx(T,{className:"h-6 w-6"}),trend:"-5%"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[u.jsx(N,{title:"Outsourcing Requests",value:o.totalOutsourcingRequests,icon:u.jsx(_,{className:"h-6 w-6"})}),u.jsx(N,{title:"Payments",value:o.totalPayments,icon:u.jsx(k,{className:"h-6 w-6"})}),u.jsx(N,{title:"Diaspora Requests",value:o.totalDiasporaRequests,icon:u.jsx(C,{className:"h-6 w-6"})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsx($,{title:"Monthly Revenue",value:`KES ${o.monthlyRevenue.toLocaleString()}`,icon:k,change:15,color:"green-600"}),u.jsx($,{title:"Conversion Rate",value:`${o.conversionRate}%`,icon:E,change:2,color:"purple-600"})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsx(L,{title:"Manage Leads",description:"View and update lead status",icon:C,onClick:()=>{}}),u.jsx(L,{title:"Policy Overview",description:"Track active policies and renewals",icon:R,onClick:()=>{}}),u.jsx(L,{title:"Claims Review",description:"Process pending claims",icon:_,onClick:()=>{}}),u.jsx(L,{title:"Payment Tracking",description:"Monitor payments and transactions",icon:k,onClick:()=>{}}),u.jsx(L,{title:"Client Communications",description:"Send notifications and updates",icon:D,onClick:()=>{}}),u.jsx(L,{title:"Resource Library",description:"Manage documents and materials",icon:_,onClick:()=>{}})]})]}),u.jsxs(Lm,{defaultValue:"claims",className:"w-full",children:[u.jsxs(Um,{className:"grid w-full grid-cols-5",children:[u.jsx(Fm,{value:"claims",children:"Claims"}),u.jsx(Fm,{value:"outsourcing",children:"Outsourcing"}),u.jsx(Fm,{value:"consultations",children:"Consultations"}),u.jsx(Fm,{value:"payments",children:"Payments"}),u.jsx(Fm,{value:"diaspora",children:"Diaspora"})]}),u.jsx(qm,{value:"claims",className:"mt-6",children:u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center gap-2",children:[u.jsx(_,{className:"h-5 w-5"}),"All Claims (",o.allSubmissions.claims.length,")"]})}),u.jsx(wc,{children:o.allSubmissions.claims.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Policy Number"}),u.jsx("th",{className:"text-left p-2",children:"Client Email"}),u.jsx("th",{className:"text-left p-2",children:"Incident Type"}),u.jsx("th",{className:"text-left p-2",children:"Amount"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.claims.map(e=>{var t;return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.policyNumber}),u.jsx("td",{className:"p-2",children:e.clientEmail}),u.jsx("td",{className:"p-2",children:e.incidentType}),u.jsxs("td",{className:"p-2",children:["KSh ",null==(t=e.claimAmount)?void 0:t.toLocaleString()]}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${j(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:w(e.createdAt)})]},e.id)})})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No claims submitted yet."})})]})}),u.jsx(qm,{value:"outsourcing",className:"mt-6",children:u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center gap-2",children:[u.jsx(P,{className:"h-5 w-5"}),"All Outsourcing Requests (",o.allSubmissions.outsourcing.length,")"]})}),u.jsx(wc,{children:o.allSubmissions.outsourcing.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Company"}),u.jsx("th",{className:"text-left p-2",children:"Contact Email"}),u.jsx("th",{className:"text-left p-2",children:"Service Type"}),u.jsx("th",{className:"text-left p-2",children:"Budget Range"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.outsourcing.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.companyName}),u.jsx("td",{className:"p-2",children:e.contactEmail}),u.jsx("td",{className:"p-2",children:e.serviceType}),u.jsx("td",{className:"p-2",children:e.budgetRange}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${j(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:w(e.createdAt)})]},e.id))})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No outsourcing requests submitted yet."})})]})}),u.jsx(qm,{value:"consultations",className:"mt-6",children:u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center gap-2",children:[u.jsx(I,{className:"h-5 w-5"}),"All Consultations (",o.allSubmissions.consultations.length,")"]})}),u.jsx(wc,{children:o.allSubmissions.consultations.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Name"}),u.jsx("th",{className:"text-left p-2",children:"Email"}),u.jsx("th",{className:"text-left p-2",children:"Service"}),u.jsx("th",{className:"text-left p-2",children:"Preferred Date"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Submitted"})]})}),u.jsx("tbody",{children:o.allSubmissions.consultations.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.fullName}),u.jsx("td",{className:"p-2",children:e.email}),u.jsx("td",{className:"p-2",children:e.serviceType}),u.jsx("td",{className:"p-2",children:e.preferredDate?w(e.preferredDate):"N/A"}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${j(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:w(e.createdAt)})]},e.id))})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No consultations scheduled yet."})})]})}),u.jsx(qm,{value:"payments",className:"mt-6",children:u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center gap-2",children:[u.jsx(A,{className:"h-5 w-5"}),"All Payments (",o.allSubmissions.payments.length,")"]})}),u.jsx(wc,{children:o.allSubmissions.payments.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Policy Number"}),u.jsx("th",{className:"text-left p-2",children:"Client Email"}),u.jsx("th",{className:"text-left p-2",children:"Amount"}),u.jsx("th",{className:"text-left p-2",children:"Payment Method"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.payments.map(e=>{var t;return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.policyNumber}),u.jsx("td",{className:"p-2",children:e.clientEmail}),u.jsxs("td",{className:"p-2",children:["KSh ",null==(t=e.amount)?void 0:t.toLocaleString()]}),u.jsx("td",{className:"p-2",children:e.paymentMethod}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${j(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:w(e.createdAt)})]},e.id)})})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No payments recorded yet."})})]})}),u.jsx(qm,{value:"diaspora",className:"mt-6",children:u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center gap-2",children:[u.jsx(O,{className:"h-5 w-5"}),"All Diaspora Requests (",o.allSubmissions.diaspora.length,")"]})}),u.jsx(wc,{children:o.allSubmissions.diaspora.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-2",children:"ID"}),u.jsx("th",{className:"text-left p-2",children:"Name"}),u.jsx("th",{className:"text-left p-2",children:"Email"}),u.jsx("th",{className:"text-left p-2",children:"Country"}),u.jsx("th",{className:"text-left p-2",children:"Service Type"}),u.jsx("th",{className:"text-left p-2",children:"Status"}),u.jsx("th",{className:"text-left p-2",children:"Date"})]})}),u.jsx("tbody",{children:o.allSubmissions.diaspora.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-2",children:e.id}),u.jsx("td",{className:"p-2",children:e.fullName}),u.jsx("td",{className:"p-2",children:e.email}),u.jsx("td",{className:"p-2",children:e.currentCountry}),u.jsx("td",{className:"p-2",children:e.serviceType}),u.jsx("td",{className:"p-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs ${j(e.status)}`,children:e.status})}),u.jsx("td",{className:"p-2",children:w(e.createdAt)})]},e.id))})]})}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No diaspora requests submitted yet."})})]})})]})]}),u.jsx(gc,{})]})}},Symbol.toStringTag,{value:"Module"}));function Bm(){const[e,t]=s.useState([]),[a,n]=s.useState(!0),[r,i]=s.useState(null),[o,l]=s.useState(!1),[c,d]=s.useState(!1),[h,m]=s.useState(""),[p,f]=s.useState(""),[g,x]=s.useState(1),[w,j]=s.useState(1),[N,S]=s.useState({total:0,pending:0,approved:0,rejected:0,draft:0}),{toast:k}=Ie();s.useEffect(()=>{C();const e=setInterval(()=>{C()},1e4);return()=>clearInterval(e)},[g,p,h]);const C=async()=>{var e;try{n(!0);const s="all"===p?void 0:p,a=await uc.getAllQuotes(g,20,s,h||void 0);if(a.success){const s=a.data.quotes||[];t(s),j((null==(e=a.data.pagination)?void 0:e.totalPages)||1);const n={total:s.length,pending:s.filter(e=>"pending"===e.status).length,approved:s.filter(e=>"approved"===e.status).length,rejected:s.filter(e=>"rejected"===e.status).length,draft:s.filter(e=>"draft"===e.status).length};S(n)}else t([]),k({title:"Error",description:"Failed to fetch quotes data.",variant:"destructive"})}catch(s){t([]),k({title:"Error",description:"Failed to fetch quotes data.",variant:"destructive"})}finally{n(!1)}},T=async(e,t)=>{try{const s=await uc.updateQuoteStatus(e,t);s.success?(await C(),d(!1),r&&r.id===e&&i({...r,status:t}),k({title:"Status Updated",description:`Quote status updated to ${t}`})):k({title:"Update Failed",description:s.error||"Failed to update quote status",variant:"destructive"})}catch(s){k({title:"Update Failed",description:s.message||"Failed to update quote status",variant:"destructive"})}},E=async e=>{if(window.confirm("Are you sure you want to delete this quote? This action cannot be undone."))try{await uc.deleteQuote(e),await C(),l(!1),k({title:"Quote Deleted",description:"Quote has been successfully deleted."})}catch(t){k({title:"Delete Failed",description:"Failed to delete quote.",variant:"destructive"})}},R=async e=>{try{const t=await uc.exportData("quotes",e),s=new Blob([t.data],{type:"csv"===e?"text/csv":"application/json"}),a=window.URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=`quotes-export.${e}`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a),document.body.removeChild(n),k({title:"Export Complete",description:`Quotes exported as ${e.toUpperCase()}`})}catch(t){k({title:"Export Failed",description:"Failed to export quotes data.",variant:"destructive"})}},P=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},A=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quote Management"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(pc,{onClick:()=>R("csv"),variant:"outline",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),u.jsxs(pc,{onClick:()=>R("json"),variant:"outline",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),u.jsxs(pc,{onClick:C,variant:"outline",children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Total Quotes"}),u.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold",children:N.total})})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Pending"}),u.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:N.pending})})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Approved"}),u.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.approved})})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Rejected"}),u.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold text-red-600",children:N.rejected})})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Drafts"}),u.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold text-gray-600",children:N.draft})})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center gap-2",children:[u.jsx(q,{className:"h-5 w-5"}),"Filters"]})}),u.jsx(wc,{children:u.jsxs("div",{className:"flex flex-wrap gap-4",children:[u.jsxs("div",{className:"flex-1 min-w-64",children:[u.jsx(Cc,{htmlFor:"search",children:"Search Quotes"}),u.jsxs("div",{className:"relative",children:[u.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx(jc,{id:"search",type:"text",placeholder:"Search by name, email, or product...",value:h,onChange:e=>m(e.target.value),className:"pl-10"})]})]}),u.jsxs("div",{children:[u.jsx(Cc,{htmlFor:"status-filter",children:"Status"}),u.jsxs(Jh,{value:p,onValueChange:f,children:[u.jsx(Qh,{className:"w-40",children:u.jsx(Yh,{placeholder:"All Status"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"all",children:"All Status"}),u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"approved",children:"Approved"}),u.jsx(tm,{value:"rejected",children:"Rejected"}),u.jsx(tm,{value:"draft",children:"Draft"})]})]})]})]})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{children:["Quote Requests (",e.length,")"]})}),u.jsx(wc,{children:a?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx(L,{className:"h-6 w-6 animate-spin mr-2"}),"Loading quotes..."]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"p-3 text-left",children:"Customer"}),u.jsx("th",{className:"p-3 text-left",children:"Product"}),u.jsx("th",{className:"p-3 text-left",children:"Location"}),u.jsx("th",{className:"p-3 text-left",children:"Budget"}),u.jsx("th",{className:"p-3 text-left",children:"Contact"}),u.jsx("th",{className:"p-3 text-left",children:"Status"}),u.jsx("th",{className:"p-3 text-left",children:"Created"}),u.jsx("th",{className:"p-3 text-left",children:"Actions"})]})}),u.jsx("tbody",{children:e.length>0?e.map(e=>u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),u.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(B,{className:"h-4 w-4 text-gray-400"}),u.jsx("span",{className:"truncate max-w-32",title:e.product,children:e.product})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(b,{className:"h-4 w-4 text-gray-400"}),u.jsx("span",{children:e.location||"Not specified"})]})}),u.jsx("td",{className:"p-3",children:e.budget||"Not specified"}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"text-sm",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(y,{className:"h-3 w-3"}),e.phone]}),u.jsx("div",{className:"text-gray-500",children:e.contactMethod})]})}),u.jsx("td",{className:"p-3",children:u.jsx(Eu,{className:P(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),u.jsx("td",{className:"p-3",children:A(e.createdAt)}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(pc,{variant:"ghost",size:"sm",onClick:()=>(e=>{i(e),l(!0)})(e),children:u.jsx(W,{className:"h-4 w-4"})}),u.jsx(pc,{variant:"ghost",size:"sm",onClick:()=>{i(e),d(!0)},children:u.jsx(F,{className:"h-4 w-4"})}),u.jsx(pc,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",onClick:()=>E(e.id),children:u.jsx(H,{className:"h-4 w-4"})})]})})]},e.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-500",children:"No quotes found"})})})]})}),w>1&&u.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[u.jsx(pc,{variant:"outline",onClick:()=>x(e=>Math.max(e-1,1)),disabled:1===g,children:"Previous"}),u.jsxs("span",{className:"px-4 py-2",children:["Page ",g," of ",w]}),u.jsx(pc,{variant:"outline",onClick:()=>x(e=>Math.min(e+1,w)),disabled:g===w,children:"Next"})]})]})})]}),u.jsx(yu,{open:o,onOpenChange:l,children:u.jsxs(Nu,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_u,{children:u.jsx(ku,{children:"Quote Request Details"})}),r&&u.jsx("div",{className:"space-y-6",children:u.jsxs(Lm,{defaultValue:"details",className:"w-full",children:[u.jsxs(Um,{className:"grid w-full grid-cols-3",children:[u.jsx(Fm,{value:"details",children:"Details"}),u.jsx(Fm,{value:"requirements",children:"Requirements"}),u.jsx(Fm,{value:"actions",children:"Actions"})]}),u.jsx(qm,{value:"details",className:"space-y-4",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Customer Name"}),u.jsxs("p",{className:"text-sm text-gray-600",children:[r.firstName," ",r.lastName]})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Email"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.email})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Phone"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.phone})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Location"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.location||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Product"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.product})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Budget"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.budget||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Coverage"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.coverage||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Contact Method"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.contactMethod})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Best Time"}),u.jsx("p",{className:"text-sm text-gray-600",children:r.bestTime||"Not specified"})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Status"}),u.jsx(Eu,{className:P(r.status),children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Created"}),u.jsx("p",{className:"text-sm text-gray-600",children:A(r.createdAt)})]}),u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Updated"}),u.jsx("p",{className:"text-sm text-gray-600",children:A(r.updatedAt)})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Attached Documents"}),r.documents&&r.documents.length>0?u.jsx("ul",{className:"mt-2 space-y-2",children:r.documents.map(e=>{var t;const s=null==(t=e.originalName.split(".").pop())?void 0:t.toLowerCase();let a=u.jsx(_,{className:"h-4 w-4 text-muted-foreground"});return["pdf"].includes(s)&&(a=u.jsx(_,{className:"h-4 w-4 text-red-600"})),["jpg","jpeg","png","gif","svg"].includes(s)&&(a=u.jsx("span",{className:"h-4 w-4 inline-block bg-gray-300 rounded",children:"IMG"})),["doc","docx"].includes(s)&&(a=u.jsx(_,{className:"h-4 w-4 text-blue-600"})),u.jsxs("li",{className:"flex items-center gap-2 bg-gray-100 rounded px-2 py-1",children:[a,u.jsx("span",{className:"truncate max-w-xs",title:e.originalName,children:e.originalName}),u.jsx(pc,{size:"sm",variant:"outline",onClick:()=>uc.downloadDocument(e.id,e.originalName),children:"Download"})]},e.id)})}):u.jsx("p",{className:"text-gray-500 mt-2",children:"No documents attached"})]})]})}),u.jsx(qm,{value:"requirements",className:"space-y-4",children:r.details?u.jsxs("div",{children:[u.jsx(Cc,{className:"text-sm font-medium",children:"Insurance Product Details"}),(()=>{let e;try{e=JSON.parse(r.details)}catch{e=r.details}return"object"==typeof e&&null!==e?u.jsx("table",{className:"w-full text-sm bg-gray-50 rounded-lg mt-2",children:u.jsx("tbody",{children:Object.entries(e).map(([e,t])=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"py-2 px-3 font-medium text-gray-700 capitalize whitespace-nowrap",children:e.replace(/([A-Z])/g," $1")}),u.jsx("td",{className:"py-2 px-3 text-gray-600 break-all",children:String(t)})]},e))})}):u.jsx("p",{className:"text-sm text-gray-600 mt-1 p-3 bg-gray-50 rounded-lg whitespace-pre-wrap",children:r.details})})()]}):u.jsx("p",{className:"text-gray-500 text-center py-8",children:"No additional requirements provided"})}),u.jsxs(qm,{value:"actions",className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs(pc,{className:"w-full",onClick:()=>T(r.id,"approved"),disabled:"approved"===r.status,children:[u.jsx(I,{className:"h-4 w-4 mr-2"}),"Approve Quote"]}),u.jsxs(pc,{variant:"destructive",className:"w-full",onClick:()=>T(r.id,"rejected"),disabled:"rejected"===r.status,children:[u.jsx(_,{className:"h-4 w-4 mr-2"}),"Reject Quote"]}),u.jsxs(pc,{variant:"outline",className:"w-full",onClick:()=>T(r.id,"pending"),disabled:"pending"===r.status,children:[u.jsx(U,{className:"h-4 w-4 mr-2"}),"Mark Pending"]}),u.jsxs(pc,{variant:"outline",className:"w-full text-red-600 hover:text-red-800",onClick:()=>E(r.id),children:[u.jsx(H,{className:"h-4 w-4 mr-2"}),"Delete Quote"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[u.jsxs(pc,{className:"w-full flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{let e=r.phone||"";e=e.replace(/\D/g,""),e.startsWith("0")?e="254"+e.slice(1):e.startsWith("254")||e.startsWith("7")&&(e="254"+e);const t=encodeURIComponent(`Hello ${r.firstName}, regarding your quote for ${r.product}: ...`);window.open(`https://wa.me/${e}?text=${t}`,"_blank")},children:[u.jsx(D,{className:"h-4 w-4"}),"Respond via WhatsApp"]}),u.jsxs(pc,{className:"w-full flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{const e=encodeURIComponent(`Your Insurance Quote Request for ${r.product}`),t=encodeURIComponent(`Hello ${r.firstName},\n\nThank you for your quote request for ${r.product}. ...`);window.open(`mailto:${r.email}?subject=${e}&body=${t}`)},children:[u.jsx(v,{className:"h-4 w-4"}),"Respond via Email"]})]})]})]})})]})}),u.jsx(yu,{open:c,onOpenChange:d,children:u.jsxs(Nu,{className:"max-w-md",children:[u.jsx(_u,{children:u.jsx(ku,{children:"Edit Quote Status"})}),r&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Cc,{htmlFor:"edit-status",children:"Status"}),u.jsxs(Jh,{value:r.status,onValueChange:e=>i({...r,status:e}),children:[u.jsx(Qh,{children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"approved",children:"Approved"}),u.jsx(tm,{value:"rejected",children:"Rejected"}),u.jsx(tm,{value:"draft",children:"Draft"})]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(pc,{className:"flex-1",onClick:()=>T(r.id,r.status),children:"Save Changes"}),u.jsx(pc,{variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})]})})]})}function Wm(){const[e,t]=s.useState([]),[a,n]=s.useState(!0),[r,i]=s.useState(null),[o,l]=s.useState(!1),[c,d]=s.useState(""),[h,m]=s.useState(""),[p,f]=s.useState(1),[g,x]=s.useState(1),{toast:y}=Ie(),b=async()=>{var e;try{n(!0);const s="all"===h?void 0:h,a=await uc.getAllDiasporaRequests(p,20,s,c||void 0);a.success?(t(a.data.diasporaRequests||[]),x((null==(e=a.data.pagination)?void 0:e.totalPages)||1)):(t([]),y({title:"Error",description:"Failed to fetch diaspora requests.",variant:"destructive"}))}catch(s){t([]),y({title:"Error",description:"Failed to fetch diaspora requests.",variant:"destructive"})}finally{n(!1)}};s.useEffect(()=>{b()},[p,h,c]);const w=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"contacted":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=e=>({USA:"🇺🇸",UK:"🇬🇧",Canada:"🇨🇦",Australia:"🇦🇺",Germany:"🇩🇪",France:"🇫🇷",Japan:"🇯🇵","South Africa":"🇿🇦",UAE:"🇦🇪","Saudi Arabia":"🇸🇦",Qatar:"🇶🇦",Kuwait:"🇰🇼"}[e]||"🌍");return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Diaspora Services"}),u.jsxs(pc,{onClick:b,variant:"outline",size:"sm",disabled:a,children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"text-lg flex items-center gap-2",children:[u.jsx(q,{className:"h-5 w-5"}),"Filters"]})}),u.jsx(wc,{children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(jc,{placeholder:"Search diaspora requests...",value:c,onChange:e=>d(e.target.value),className:"w-full"})}),u.jsxs(Jh,{value:h,onValueChange:m,children:[u.jsx(Qh,{className:"w-[180px]",children:u.jsx(Yh,{placeholder:"Filter by status"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"all",children:"All Statuses"}),u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"contacted",children:"Contacted"}),u.jsx(tm,{value:"scheduled",children:"Scheduled"}),u.jsx(tm,{value:"completed",children:"Completed"}),u.jsx(tm,{value:"cancelled",children:"Cancelled"})]})]})]})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{children:["Diaspora Service Requests (",e.length,")"]})}),u.jsxs(wc,{children:[a?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===e.length?u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx(O,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),u.jsx("p",{children:"No diaspora requests found"})]}):u.jsx("div",{className:"space-y-4",children:e.map(e=>u.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("h3",{className:"font-semibold",children:e.name}),u.jsx(Eu,{className:w(e.status),children:e.status}),u.jsx("span",{className:"text-lg",children:j(e.country)})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(v,{className:"h-4 w-4"}),e.email]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(O,{className:"h-4 w-4"}),e.country]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(K,{className:"h-4 w-4"}),e.serviceInterest]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(I,{className:"h-4 w-4"}),new Date(e.createdAt).toLocaleDateString()]})]}),e.scheduledAt&&u.jsxs("div",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[u.jsx(U,{className:"h-4 w-4"}),"Scheduled: ",new Date(e.scheduledAt).toLocaleString()]})]}),u.jsxs("div",{className:"flex gap-2 ml-4",children:[u.jsxs(pc,{variant:"outline",size:"sm",onClick:()=>(e=>{i(e),l(!0)})(e),children:[u.jsx(W,{className:"h-4 w-4 mr-1"}),"View"]}),u.jsxs(Jh,{value:e.status,onValueChange:t=>(async(e,t)=>{try{const s=await uc.updateDiasporaRequestStatus(e,t);s.success?(await b(),y({title:"Status Updated",description:`Diaspora request status updated to ${t}`})):y({title:"Update Failed",description:s.error||"Failed to update request status",variant:"destructive"})}catch(s){y({title:"Update Failed",description:s.message||"Failed to update request status",variant:"destructive"})}})(e.id,t),children:[u.jsx(Qh,{className:"w-32",children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"contacted",children:"Contacted"}),u.jsx(tm,{value:"scheduled",children:"Scheduled"}),u.jsx(tm,{value:"completed",children:"Completed"}),u.jsx(tm,{value:"cancelled",children:"Cancelled"})]})]})]})]})},e.id))}),g>1&&u.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.max(e-1,1)),disabled:1===p,children:"Previous"}),u.jsxs("span",{className:"px-4 py-2 text-sm",children:["Page ",p," of ",g]}),u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.min(e+1,g)),disabled:p===g,children:"Next"})]})]})]}),u.jsx(yu,{open:o,onOpenChange:l,children:u.jsxs(Nu,{className:"max-w-2xl",children:[u.jsx(_u,{children:u.jsx(ku,{children:"Diaspora Service Request Details"})}),r&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Client Name:"}),u.jsx("p",{children:r.name})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Email:"}),u.jsx("p",{children:r.email})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Phone:"}),u.jsx("p",{children:r.phone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Country:"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("span",{children:j(r.country)}),r.country]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Timezone:"}),u.jsx("p",{children:r.timezone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Service Interest:"}),u.jsx("p",{children:r.serviceInterest})]})]}),u.jsx("div",{className:"flex gap-2 mt-4",children:u.jsx(pc,{variant:"outline",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{const e=await uc.createNotification({type:"project-consultation",diasporaRequestId:r.id,name:r.name,email:r.email,phone:r.phone,country:r.country,timezone:r.timezone,serviceInterest:r.serviceInterest,createdAt:r.createdAt});e.success?(y({title:"Project-Based Consultation Created",description:"Consultation has been created and will appear in the dashboard."}),b()):y({title:"Error",description:e.message||"Failed to create project-based consultation.",variant:"destructive"})}catch(e){y({title:"Error",description:e.message||"Failed to create project-based consultation.",variant:"destructive"})}},children:"Project-Based Consultation"})}),r.scheduledAt&&u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Scheduled Appointment:"}),u.jsx("p",{className:"text-green-600",children:new Date(r.scheduledAt).toLocaleString()})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"font-semibold",children:"Status:"}),u.jsx(Eu,{className:w(r.status),children:r.status})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-semibold",children:"Submitted:"}),u.jsx("p",{children:new Date(r.createdAt).toLocaleString()})]})]})]})})]})}const Hm=[{id:"dashboard",label:"Dashboard",icon:J,description:"System Overview",color:"from-blue-500 to-blue-600"},{id:"users",label:"Users",icon:C,description:"User Management",color:"from-green-500 to-green-600"},{id:"claims",label:"Claims",icon:_,description:"Claims Processing",color:"from-purple-500 to-purple-600"},{id:"quotes",label:"Quotes",icon:D,description:"Quote Management",color:"from-blue-500 to-purple-600"},{id:"diaspora",label:"Diaspora",icon:O,description:"Diaspora Requests",color:"from-cyan-500 to-blue-600"},{id:"outsourcing",label:"Outsourcing",icon:Y,description:"Outsourcing Requests",color:"from-amber-500 to-orange-600"},{id:"consultations",label:"Consultations",icon:I,description:"Booking Management",color:"from-orange-500 to-orange-600"},{id:"payments",label:"Payments",icon:A,description:"Financial Overview",color:"from-emerald-500 to-emerald-600"},{id:"notifications",label:"Notifications",icon:Q,description:"System Alerts",color:"from-red-500 to-red-600"},{id:"analytics",label:"Analytics",icon:E,description:"Data Insights",color:"from-indigo-500 to-indigo-600"},{id:"settings",label:"Settings",icon:X,description:"System Config",color:"from-slate-500 to-slate-600"}];function Km({activeTab:e,setActiveTab:t,isOpen:a,toggleSidebar:n}){const[r,i]=s.useState(null);return u.jsxs(u.Fragment,{children:[a&&u.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden animate-in fade-in duration-300",onClick:n}),u.jsxs("div",{className:`\n        fixed inset-y-0 left-0 z-50 w-72 \n        bg-white/95 backdrop-blur-xl border-r border-white/20\n        shadow-2xl shadow-blue-500/10\n        transform transition-all duration-500 ease-out\n        lg:translate-x-0 lg:static lg:inset-0\n        before:absolute before:inset-0 before:bg-gradient-to-b before:from-white/50 before:to-white/30 before:pointer-events-none\n        ${a?"translate-x-0":"-translate-x-full"}\n      `,children:[u.jsxs("div",{className:"relative flex items-center justify-between h-20 px-6 border-b border-white/10 bg-gradient-to-r from-blue-600/5 to-purple-600/5",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:u.jsx(G,{className:"h-5 w-5 text-white"})}),u.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:u.jsx(V,{className:"h-2.5 w-2.5 text-white"})})]}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Admin Panel"}),u.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Enterprise Suite"})]})]}),u.jsx(pc,{variant:"ghost",size:"sm",onClick:n,className:"lg:hidden hover:bg-white/20 rounded-xl p-2 transition-all duration-200",children:u.jsx(h,{className:"h-5 w-5 text-slate-600"})})]}),u.jsx("nav",{className:"flex-1 px-4 py-8 space-y-3 overflow-y-auto",children:Hm.map((s,a)=>{const n=s.icon,o=e===s.id,l=r===s.id;return u.jsxs("button",{onClick:()=>t(s.id),onMouseEnter:()=>i(s.id),onMouseLeave:()=>i(null),className:`\n                  group relative w-full flex items-center px-4 py-4 text-sm font-semibold rounded-2xl \n                  transition-all duration-300 ease-out transform\n                  ${o?"bg-gradient-to-r from-blue-50 to-purple-50 text-blue-700 shadow-lg shadow-blue-500/20 scale-105 translate-x-1":l?"bg-white/60 text-slate-700 shadow-md shadow-slate-500/10 scale-102 translate-x-0.5":"text-slate-600 hover:bg-white/40"}\n                `,style:{animationDelay:50*a+"ms"},children:[u.jsxs("div",{className:`\n                  relative mr-4 p-2 rounded-xl transition-all duration-300\n                  ${o?`bg-gradient-to-br ${s.color} shadow-lg shadow-blue-500/25`:l?`bg-gradient-to-br ${s.color} shadow-md shadow-slate-500/20`:"bg-slate-100 group-hover:bg-slate-200"}\n                `,children:[u.jsx(n,{className:"h-5 w-5 transition-all duration-300 "+(o||l?"text-white":"text-slate-600")}),o&&u.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-blue-400/20 to-purple-400/20 animate-pulse"})]}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"font-semibold",children:s.label}),u.jsx("div",{className:"text-xs opacity-70 font-normal",children:s.description})]}),l&&!o&&u.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),o&&u.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-blue-500 to-purple-500 rounded-full shadow-lg"}),u.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden",children:u.jsx("div",{className:"\n                    absolute inset-0 bg-gradient-to-r from-blue-400/0 to-purple-400/0 \n                    group-active:from-blue-400/20 group-active:to-purple-400/20\n                    transition-all duration-200\n                  "})})]},s.id)})}),u.jsxs("div",{className:"relative p-6 border-t border-white/10 bg-gradient-to-r from-slate-50/50 to-blue-50/50",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(R,{className:"h-4 w-4 text-green-500"}),u.jsx("span",{className:"text-xs font-medium text-slate-600",children:"System Secure"})]}),u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),u.jsx("div",{className:"text-xs text-slate-500 font-medium mb-1",children:"Galloways Admin Suite v2.0"}),u.jsx("div",{className:"text-xs text-slate-400",children:"Enterprise Edition"}),u.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full shadow-lg animate-pulse"})]}),u.jsx("div",{className:"absolute top-20 left-0 w-full h-32 bg-gradient-to-b from-blue-500/5 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute bottom-20 left-0 w-full h-32 bg-gradient-to-t from-purple-500/5 to-transparent pointer-events-none"})]})]})}var Gm=["Enter"," "],Vm=["ArrowUp","PageDown","End"],Jm=["ArrowDown","PageUp","Home",...Vm],Ym={ltr:[...Gm,"ArrowRight"],rtl:[...Gm,"ArrowLeft"]},Qm={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xm="Menu",[Zm,ep,tp]=Ke(Xm),[sp,ap]=Le(Xm,[tp,Pn,cm]),np=Pn(),rp=cm(),[ip,op]=sp(Xm),[lp,cp]=sp(Xm),dp=e=>{const{__scopeMenu:t,open:a=!1,children:n,dir:r,onOpenChange:i,modal:o=!0}=e,l=np(t),[c,d]=s.useState(null),h=s.useRef(!1),m=Je(i),p=Pu(r);return s.useEffect(()=>{const e=()=>{h.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>h.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),u.jsx(Vn,{...l,children:u.jsx(ip,{scope:t,open:a,onOpenChange:m,content:c,onContentChange:d,children:u.jsx(lp,{scope:t,onClose:s.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:o,children:n})})})};dp.displayName=Xm;var up=s.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e,n=np(s);return u.jsx(Jn,{...n,...a,ref:t})});up.displayName="MenuAnchor";var hp="MenuPortal",[mp,pp]=sp(hp,{forceMount:void 0}),fp=e=>{const{__scopeMenu:t,forceMount:s,children:a,container:n}=e,r=op(hp,t);return u.jsx(mp,{scope:t,forceMount:s,children:u.jsx(ct,{present:s||r.open,children:u.jsx(lt,{asChild:!0,container:n,children:a})})})};fp.displayName=hp;var gp="MenuContent",[xp,vp]=sp(gp),yp=s.forwardRef((e,t)=>{const s=pp(gp,e.__scopeMenu),{forceMount:a=s.forceMount,...n}=e,r=op(gp,e.__scopeMenu),i=cp(gp,e.__scopeMenu);return u.jsx(Zm.Provider,{scope:e.__scopeMenu,children:u.jsx(ct,{present:a||r.open,children:u.jsx(Zm.Slot,{scope:e.__scopeMenu,children:i.modal?u.jsx(bp,{...n,ref:t}):u.jsx(wp,{...n,ref:t})})})})}),bp=s.forwardRef((e,t)=>{const a=op(gp,e.__scopeMenu),n=s.useRef(null),r=$e(t,n);return s.useEffect(()=>{const e=n.current;if(e)return Ad(e)},[]),u.jsx(Np,{...e,ref:r,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:Ae(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),wp=s.forwardRef((e,t)=>{const s=op(gp,e.__scopeMenu);return u.jsx(Np,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),jp=Fe("MenuContent.ScrollLock"),Np=s.forwardRef((e,t)=>{const{__scopeMenu:a,loop:n=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:f,disableOutsideScroll:g,...x}=e,v=op(gp,a),y=cp(gp,a),b=np(a),w=rp(a),j=ep(a),[N,_]=s.useState(null),S=s.useRef(null),k=$e(t,S,v.onContentChange),C=s.useRef(0),T=s.useRef(""),E=s.useRef(0),R=s.useRef(null),D=s.useRef("right"),P=s.useRef(0),I=g?Cd:s.Fragment,A=g?{as:jp,allowPinchZoom:!0}:void 0,O=e=>{var t,s;const a=T.current+e,n=j().filter(e=>!e.disabled),r=document.activeElement,i=null==(t=n.find(e=>e.ref.current===r))?void 0:t.textValue,o=function(e,t,s){const a=t.length>1&&Array.from(t).every(e=>e===t[0]),n=a?t[0]:t,r=s?e.indexOf(s):-1;let i=(o=e,l=Math.max(r,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===n.length&&(i=i.filter(e=>e!==s));const c=i.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return c!==s?c:void 0}(n.map(e=>e.textValue),a,i),l=null==(s=n.find(e=>e.textValue===o))?void 0:s.ref.current;!function e(t){T.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(()=>e(""),1e3))}(a),l&&setTimeout(()=>l.focus())};s.useEffect(()=>()=>window.clearTimeout(C.current),[]),Uc();const M=s.useCallback(e=>{var t,s;return D.current===(null==(t=R.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return function(e,t){const{x:s,y:a}=e;let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const e=t[r],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>a!=u>a&&s<(d-l)*(a-c)/(u-c)+l&&(n=!n)}return n}(s,t)}(e,null==(s=R.current)?void 0:s.area)},[]);return u.jsx(xp,{scope:a,searchRef:T,onItemEnter:s.useCallback(e=>{M(e)&&e.preventDefault()},[M]),onItemLeave:s.useCallback(e=>{var t;M(e)||(null==(t=S.current)||t.focus(),_(null))},[M]),onTriggerLeave:s.useCallback(e=>{M(e)&&e.preventDefault()},[M]),pointerGraceTimerRef:E,onPointerGraceIntentChange:s.useCallback(e=>{R.current=e},[]),children:u.jsx(I,{...A,children:u.jsx(Dc,{asChild:!0,trapped:r,onMountAutoFocus:Ae(i,e=>{var t;e.preventDefault(),null==(t=S.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:u.jsx(tt,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:f,children:u.jsx(vm,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:Ae(c,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(Yn,{role:"menu","aria-orientation":"vertical","data-state":Jp(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...x,ref:k,style:{outline:"none",...x.style},onKeyDown:Ae(x.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,s=e.ctrlKey||e.altKey||e.metaKey,a=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!s&&a&&O(e.key));const n=S.current;if(e.target!==n)return;if(!Jm.includes(e.key))return;e.preventDefault();const r=j().filter(e=>!e.disabled).map(e=>e.ref.current);Vm.includes(e.key)&&r.reverse(),function(e){const t=document.activeElement;for(const s of e){if(s===t)return;if(s.focus(),document.activeElement!==t)return}}(r)}),onBlur:Ae(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),T.current="")}),onPointerMove:Ae(e.onPointerMove,Xp(e=>{const t=e.target,s=P.current!==e.clientX;if(e.currentTarget.contains(t)&&s){const t=e.clientX>P.current?"right":"left";D.current=t,P.current=e.clientX}}))})})})})})})});yp.displayName=gp;var _p=s.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e;return u.jsx(Ge.div,{role:"group",...a,ref:t})});_p.displayName="MenuGroup";var Sp=s.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e;return u.jsx(Ge.div,{...a,ref:t})});Sp.displayName="MenuLabel";var kp="MenuItem",Cp="menu.itemSelect",Tp=s.forwardRef((e,t)=>{const{disabled:a=!1,onSelect:n,...r}=e,i=s.useRef(null),o=cp(kp,e.__scopeMenu),l=vp(kp,e.__scopeMenu),c=$e(t,i),d=s.useRef(!1);return u.jsx(Ep,{...r,ref:c,disabled:a,onClick:Ae(e.onClick,()=>{const e=i.current;if(!a&&e){const t=new CustomEvent(Cp,{bubbles:!0,cancelable:!0});e.addEventListener(Cp,e=>null==n?void 0:n(e),{once:!0}),Ve(e,t),t.defaultPrevented?d.current=!1:o.onClose()}}),onPointerDown:t=>{var s;null==(s=e.onPointerDown)||s.call(e,t),d.current=!0},onPointerUp:Ae(e.onPointerUp,e=>{var t;d.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:Ae(e.onKeyDown,e=>{const t=""!==l.searchRef.current;a||t&&" "===e.key||Gm.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});Tp.displayName=kp;var Ep=s.forwardRef((e,t)=>{const{__scopeMenu:a,disabled:n=!1,textValue:r,...i}=e,o=vp(kp,a),l=rp(a),c=s.useRef(null),d=$e(t,c),[h,m]=s.useState(!1),[p,f]=s.useState("");return s.useEffect(()=>{const e=c.current;e&&f((e.textContent??"").trim())},[i.children]),u.jsx(Zm.ItemSlot,{scope:a,disabled:n,textValue:r??p,children:u.jsx(ym,{asChild:!0,...l,focusable:!n,children:u.jsx(Ge.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:Ae(e.onPointerMove,Xp(e=>{if(n)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Ae(e.onPointerLeave,Xp(e=>o.onItemLeave(e))),onFocus:Ae(e.onFocus,()=>m(!0)),onBlur:Ae(e.onBlur,()=>m(!1))})})})}),Rp=s.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:a,...n}=e;return u.jsx(Lp,{scope:e.__scopeMenu,checked:s,children:u.jsx(Tp,{role:"menuitemcheckbox","aria-checked":Yp(s)?"mixed":s,...n,ref:t,"data-state":Qp(s),onSelect:Ae(n.onSelect,()=>null==a?void 0:a(!!Yp(s)||!s),{checkForDefaultPrevented:!1})})})});Rp.displayName="MenuCheckboxItem";var Dp="MenuRadioGroup",[Pp,Ip]=sp(Dp,{value:void 0,onValueChange:()=>{}}),Ap=s.forwardRef((e,t)=>{const{value:s,onValueChange:a,...n}=e,r=Je(a);return u.jsx(Pp,{scope:e.__scopeMenu,value:s,onValueChange:r,children:u.jsx(_p,{...n,ref:t})})});Ap.displayName=Dp;var Op="MenuRadioItem",Mp=s.forwardRef((e,t)=>{const{value:s,...a}=e,n=Ip(Op,e.__scopeMenu),r=s===n.value;return u.jsx(Lp,{scope:e.__scopeMenu,checked:r,children:u.jsx(Tp,{role:"menuitemradio","aria-checked":r,...a,ref:t,"data-state":Qp(r),onSelect:Ae(a.onSelect,()=>{var e;return null==(e=n.onValueChange)?void 0:e.call(n,s)},{checkForDefaultPrevented:!1})})})});Mp.displayName=Op;var $p="MenuItemIndicator",[Lp,Up]=sp($p,{checked:!1}),Fp=s.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:a,...n}=e,r=Up($p,s);return u.jsx(ct,{present:a||Yp(r.checked)||!0===r.checked,children:u.jsx(Ge.span,{...n,ref:t,"data-state":Qp(r.checked)})})});Fp.displayName=$p;var qp=s.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e;return u.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...a,ref:t})});qp.displayName="MenuSeparator";var zp=s.forwardRef((e,t)=>{const{__scopeMenu:s,...a}=e,n=np(s);return u.jsx(Qn,{...n,...a,ref:t})});zp.displayName="MenuArrow";var[Bp,Wp]=sp("MenuSub"),Hp="MenuSubTrigger",Kp=s.forwardRef((e,t)=>{const a=op(Hp,e.__scopeMenu),n=cp(Hp,e.__scopeMenu),r=Wp(Hp,e.__scopeMenu),i=vp(Hp,e.__scopeMenu),o=s.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},h=s.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return s.useEffect(()=>h,[h]),s.useEffect(()=>{const e=l.current;return()=>{window.clearTimeout(e),c(null)}},[l,c]),u.jsx(up,{asChild:!0,...d,children:u.jsx(Ep,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":r.contentId,"data-state":Jp(a.open),...e,ref:Me(t,r.onTriggerChange),onClick:t=>{var s;null==(s=e.onClick)||s.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:Ae(e.onPointerMove,Xp(t=>{i.onItemEnter(t),t.defaultPrevented||e.disabled||a.open||o.current||(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{a.onOpenChange(!0),h()},100))})),onPointerLeave:Ae(e.onPointerLeave,Xp(e=>{var t,s;h();const n=null==(t=a.content)?void 0:t.getBoundingClientRect();if(n){const t=null==(s=a.content)?void 0:s.dataset.side,r="right"===t,o=r?-5:5,c=n[r?"left":"right"],d=n[r?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:c,y:n.top},{x:d,y:n.top},{x:d,y:n.bottom},{x:c,y:n.bottom}],side:t}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(e.onKeyDown,t=>{var s;const r=""!==i.searchRef.current;e.disabled||r&&" "===t.key||Ym[n.dir].includes(t.key)&&(a.onOpenChange(!0),null==(s=a.content)||s.focus(),t.preventDefault())})})})});Kp.displayName=Hp;var Gp="MenuSubContent",Vp=s.forwardRef((e,t)=>{const a=pp(gp,e.__scopeMenu),{forceMount:n=a.forceMount,...r}=e,i=op(gp,e.__scopeMenu),o=cp(gp,e.__scopeMenu),l=Wp(Gp,e.__scopeMenu),c=s.useRef(null),d=$e(t,c);return u.jsx(Zm.Provider,{scope:e.__scopeMenu,children:u.jsx(ct,{present:n||i.open,children:u.jsx(Zm.Slot,{scope:e.__scopeMenu,children:u.jsx(Np,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:d,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;o.isUsingKeyboardRef.current&&(null==(t=c.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Ae(e.onFocusOutside,e=>{e.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ae(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:Ae(e.onKeyDown,e=>{var t;const s=e.currentTarget.contains(e.target),a=Qm[o.dir].includes(e.key);s&&a&&(i.onOpenChange(!1),null==(t=l.trigger)||t.focus(),e.preventDefault())})})})})})});function Jp(e){return e?"open":"closed"}function Yp(e){return"indeterminate"===e}function Qp(e){return Yp(e)?"indeterminate":e?"checked":"unchecked"}function Xp(e){return t=>"mouse"===t.pointerType?e(t):void 0}Vp.displayName=Gp;var Zp=dp,ef=up,tf=fp,sf=yp,af=_p,nf=Sp,rf=Tp,of=Rp,lf=Ap,cf=Mp,df=Fp,uf=qp,hf=zp,mf=Kp,pf=Vp,ff="DropdownMenu",[gf,xf]=Le(ff,[ap]),vf=ap(),[yf,bf]=gf(ff),wf=e=>{const{__scopeDropdownMenu:t,children:a,dir:n,open:r,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=vf(t),d=s.useRef(null),[h,m]=ht({prop:r,defaultProp:i??!1,onChange:o,caller:ff});return u.jsx(yf,{scope:t,triggerId:Ms(),triggerRef:d,contentId:Ms(),open:h,onOpenChange:m,onOpenToggle:s.useCallback(()=>m(e=>!e),[m]),modal:l,children:u.jsx(Zp,{...c,open:h,onOpenChange:m,dir:n,modal:l,children:a})})};wf.displayName=ff;var jf="DropdownMenuTrigger",Nf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:a=!1,...n}=e,r=bf(jf,s),i=vf(s);return u.jsx(ef,{asChild:!0,...i,children:u.jsx(Ge.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...n,ref:Me(t,r.triggerRef),onPointerDown:Ae(e.onPointerDown,e=>{a||0!==e.button||!1!==e.ctrlKey||(r.onOpenToggle(),r.open||e.preventDefault())}),onKeyDown:Ae(e.onKeyDown,e=>{a||(["Enter"," "].includes(e.key)&&r.onOpenToggle(),"ArrowDown"===e.key&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Nf.displayName=jf;var _f=e=>{const{__scopeDropdownMenu:t,...s}=e,a=vf(t);return u.jsx(tf,{...a,...s})};_f.displayName="DropdownMenuPortal";var Sf="DropdownMenuContent",kf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...n}=e,r=bf(Sf,a),i=vf(a),o=s.useRef(!1);return u.jsx(sf,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...n,ref:t,onCloseAutoFocus:Ae(e.onCloseAutoFocus,e=>{var t;o.current||null==(t=r.triggerRef.current)||t.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:Ae(e.onInteractOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,a=2===t.button||s;r.modal&&!a||(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kf.displayName=Sf;s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(af,{...n,...a,ref:t})}).displayName="DropdownMenuGroup";var Cf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(nf,{...n,...a,ref:t})});Cf.displayName="DropdownMenuLabel";var Tf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(rf,{...n,...a,ref:t})});Tf.displayName="DropdownMenuItem";var Ef=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(of,{...n,...a,ref:t})});Ef.displayName="DropdownMenuCheckboxItem";s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(lf,{...n,...a,ref:t})}).displayName="DropdownMenuRadioGroup";var Rf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(cf,{...n,...a,ref:t})});Rf.displayName="DropdownMenuRadioItem";var Df=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(df,{...n,...a,ref:t})});Df.displayName="DropdownMenuItemIndicator";var Pf=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(uf,{...n,...a,ref:t})});Pf.displayName="DropdownMenuSeparator";s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(hf,{...n,...a,ref:t})}).displayName="DropdownMenuArrow";var If=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(mf,{...n,...a,ref:t})});If.displayName="DropdownMenuSubTrigger";var Af=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...a}=e,n=vf(s);return u.jsx(pf,{...n,...a,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Af.displayName="DropdownMenuSubContent";var Of=_f,Mf=kf,$f=Cf,Lf=Tf,Uf=Ef,Ff=Rf,qf=Df,zf=Pf,Bf=If,Wf=Af;const Hf=wf,Kf=Nf;s.forwardRef(({className:e,inset:t,children:s,...a},n)=>u.jsxs(Bf,{ref:n,className:ms("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...a,children:[s,u.jsx(M,{className:"ml-auto h-4 w-4"})]})).displayName=Bf.displayName;s.forwardRef(({className:e,...t},s)=>u.jsx(Wf,{ref:s,className:ms("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=Wf.displayName;const Gf=s.forwardRef(({className:e,sideOffset:t=4,...s},a)=>u.jsx(Of,{children:u.jsx(Mf,{ref:a,sideOffset:t,className:ms("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Gf.displayName=Mf.displayName;const Vf=s.forwardRef(({className:e,inset:t,...s},a)=>u.jsx(Lf,{ref:a,className:ms("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));Vf.displayName=Lf.displayName;s.forwardRef(({className:e,children:t,checked:s,...a},n)=>u.jsxs(Uf,{ref:n,className:ms("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...a,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(qf,{children:u.jsx(N,{className:"h-4 w-4"})})}),t]})).displayName=Uf.displayName;s.forwardRef(({className:e,children:t,...s},a)=>u.jsxs(Ff,{ref:a,className:ms("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(qf,{children:u.jsx(Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=Ff.displayName;s.forwardRef(({className:e,inset:t,...s},a)=>u.jsx($f,{ref:a,className:ms("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=$f.displayName;const Jf=s.forwardRef(({className:e,...t},s)=>u.jsx(zf,{ref:s,className:ms("-mx-1 my-1 h-px bg-muted",e),...t}));function Yf({toggleSidebar:e}){const[t,a]=s.useState(""),[n,r]=s.useState(!1);s.useEffect(()=>{const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,s="dark"===e||!e&&t;r(s),s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]);const[i,o]=s.useState(!1),[l,c]=s.useState([]),[d,h]=s.useState({status:"operational",uptime:"99.9%",activeUsers:0}),p=l.filter(e=>e.unread).length;s.useEffect(()=>{(async()=>{var e;try{const t=await uc.getNotifications(),s=((null==(e=t.data)?void 0:e.notifications)||[]).slice(0,5).map((e,t)=>({id:e.id||t,title:e.title||e.message||"New notification",time:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Recent",unread:!1!==e.unread}));c(s)}catch(t){c([])}})(),(async()=>{try{const e=(await uc.getUserStats()).data||{};h(t=>({...t,activeUsers:e.totalUsers||0}))}catch(e){}})()},[]);const f=e=>{switch(e){case"refresh":Ss.success("System refreshed"),window.location.reload();break;case"export":Ss.success("Export initiated");break;case"settings":Ss.success("Opening settings");break;case"logout":Ss.success("Logging out...");break;default:Ss.success(`${e} executed`)}};return s.useEffect(()=>{const e=setInterval(()=>{h(e=>({...e,activeUsers:e.activeUsers+Math.floor(10*Math.random())-5}))},3e4);return()=>clearInterval(e)},[]),u.jsxs("header",{className:"relative bg-white/95 backdrop-blur-xl border-b border-white/20 shadow-lg shadow-blue-500/5",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/50 via-white to-purple-50/50 pointer-events-none"}),u.jsx("div",{className:"relative px-6 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsx(pc,{variant:"ghost",size:"sm",onClick:e,className:"lg:hidden hover:bg-blue-50 rounded-xl p-2 transition-all duration-200",children:u.jsx(m,{className:"h-5 w-5 text-slate-600"})}),u.jsxs("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&Ss.success(`Searching for: ${t}`)},className:"relative",children:[u.jsx(z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),u.jsx(jc,{value:t,onChange:e=>a(e.target.value),placeholder:"Search users, claims, consultations...",className:"pl-11 pr-4 w-80 bg-white/60 border-white/20 rounded-xl \r\n                         focus:bg-white focus:border-blue-300 focus:ring-2 focus:ring-blue-100\r\n                         placeholder:text-slate-400 text-slate-700 font-medium\r\n                         transition-all duration-200"}),t&&u.jsx(pc,{type:"submit",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-7 px-3 \r\n                           bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600\r\n                           text-white rounded-lg text-xs font-medium transition-all duration-200",children:"Search"})]}),u.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[u.jsxs("div",{className:"flex items-center space-x-1.5",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse "+("operational"===d.status?"bg-green-400":"bg-red-400")}),u.jsx("span",{className:"text-xs font-medium text-slate-600",children:"operational"===d.status?"All Systems Operational":"Issues Detected"})]}),u.jsxs(Eu,{variant:"secondary",className:"text-xs bg-blue-50 text-blue-700",children:[d.activeUsers," active"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"hidden lg:flex items-center space-x-1",children:[u.jsx(pc,{variant:"ghost",size:"sm",onClick:()=>f("refresh"),className:"h-9 w-9 rounded-xl hover:bg-blue-50 text-slate-600 hover:text-blue-600 transition-all duration-200",title:"Refresh System",children:u.jsx(L,{className:"h-4 w-4"})}),u.jsx(pc,{variant:"ghost",size:"sm",onClick:()=>f("export"),className:"h-9 w-9 rounded-xl hover:bg-green-50 text-slate-600 hover:text-green-600 transition-all duration-200",title:"Export Data",children:u.jsx($,{className:"h-4 w-4"})}),u.jsx(pc,{variant:"ghost",size:"sm",onClick:()=>{const e=!n;r(e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light"),Ss.success(`Switched to ${e?"dark":"light"} mode`)},className:"h-9 w-9 rounded-xl hover:bg-yellow-50 text-slate-600 hover:text-yellow-600 transition-all duration-200",title:"Toggle Theme",children:n?u.jsx(ee,{className:"h-4 w-4"}):u.jsx(te,{className:"h-4 w-4"})}),u.jsx(pc,{variant:"ghost",size:"sm",onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),o(!1),Ss.success("Exited fullscreen mode")):(document.documentElement.requestFullscreen(),o(!0),Ss.success("Entered fullscreen mode"))},className:"h-9 w-9 rounded-xl hover:bg-purple-50 text-slate-600 hover:text-purple-600 transition-all duration-200",title:"Toggle Fullscreen",children:i?u.jsx(se,{className:"h-4 w-4"}):u.jsx(ae,{className:"h-4 w-4"})})]}),u.jsxs(Hf,{children:[u.jsx(Kf,{asChild:!0,children:u.jsxs(pc,{variant:"ghost",size:"sm",className:"relative h-10 w-10 rounded-xl hover:bg-red-50 text-slate-600 hover:text-red-600 transition-all duration-200",children:[u.jsx(Q,{className:"h-5 w-5"}),p>0&&u.jsx(Eu,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center \r\n                               bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full\r\n                               animate-pulse shadow-lg",children:p})]})}),u.jsxs(Gf,{align:"end",className:"w-80 bg-white/95 backdrop-blur-xl border-white/20 shadow-xl",children:[u.jsxs("div",{className:"p-3 border-b border-slate-100",children:[u.jsx("h3",{className:"font-semibold text-slate-800",children:"Notifications"}),u.jsxs("p",{className:"text-xs text-slate-500",children:[p," unread messages"]})]}),l.map(e=>u.jsx(Vf,{className:"p-3 cursor-pointer hover:bg-blue-50",onClick:()=>{return t=e.id,void c(e=>e.map(e=>e.id===t?{...e,unread:!1}:e));var t},children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-2 h-2 rounded-full mt-2 "+(e.unread?"bg-blue-500":"bg-slate-300")}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-slate-800",children:e.title}),u.jsx("p",{className:"text-xs text-slate-500",children:e.time})]})]})},e.id)),u.jsx(Vf,{className:"p-3 text-center text-blue-600 hover:bg-blue-50 font-medium",children:"View All Notifications"})]})]}),u.jsxs(Hf,{children:[u.jsx(Kf,{asChild:!0,children:u.jsxs(pc,{variant:"ghost",className:"flex items-center space-x-2 h-10 px-3 rounded-xl hover:bg-slate-50 transition-all duration-200",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:u.jsx(K,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"hidden sm:block text-left",children:[u.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Admin User"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Super Admin"})]})]})}),u.jsxs(Gf,{align:"end",className:"w-56 bg-white/95 backdrop-blur-xl border-white/20 shadow-xl",children:[u.jsxs("div",{className:"p-3 border-b border-slate-100",children:[u.jsx("p",{className:"font-medium text-slate-800",children:"Admin User"}),u.jsx("p",{className:"text-sm text-slate-500",children:"admin@galloways.com"})]}),u.jsxs(Vf,{className:"flex items-center space-x-2 p-3 hover:bg-blue-50 cursor-pointer",onClick:()=>f("profile"),children:[u.jsx(K,{className:"h-4 w-4"}),u.jsx("span",{children:"Profile Settings"})]}),u.jsxs(Vf,{className:"flex items-center space-x-2 p-3 hover:bg-slate-50 cursor-pointer",onClick:()=>f("settings"),children:[u.jsx(X,{className:"h-4 w-4"}),u.jsx("span",{children:"System Settings"})]}),u.jsxs(Vf,{className:"flex items-center space-x-2 p-3 hover:bg-green-50 cursor-pointer",children:[u.jsx(ne,{className:"h-4 w-4"}),u.jsx("span",{children:"Activity Log"})]}),u.jsxs(Vf,{className:"flex items-center space-x-2 p-3 hover:bg-purple-50 cursor-pointer",children:[u.jsx(R,{className:"h-4 w-4"}),u.jsx("span",{children:"Security"})]}),u.jsx(Jf,{}),u.jsxs(Vf,{className:"flex items-center space-x-2 p-3 hover:bg-red-50 text-red-600 cursor-pointer",onClick:()=>f("logout"),children:[u.jsx(S,{className:"h-4 w-4"}),u.jsx("span",{children:"Sign Out"})]})]})]})]})]})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-200 to-transparent"})]})}Jf.displayName=zf.displayName;var Qf="Switch",[Xf,Zf]=Le(Qf),[eg,tg]=Xf(Qf),sg=s.forwardRef((e,t)=>{const{__scopeSwitch:a,name:n,checked:r,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...m}=e,[p,f]=s.useState(null),g=$e(t,e=>f(e)),x=s.useRef(!1),v=!p||(h||!!p.closest("form")),[y,b]=ht({prop:r,defaultProp:i??!1,onChange:d,caller:Qf});return u.jsxs(eg,{scope:a,checked:y,disabled:l,children:[u.jsx(Ge.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":ig(y),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:Ae(e.onClick,e=>{b(e=>!e),v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),v&&u.jsx(rg,{control:p,bubbles:!x.current,name:n,value:c,checked:y,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});sg.displayName=Qf;var ag="SwitchThumb",ng=s.forwardRef((e,t)=>{const{__scopeSwitch:s,...a}=e,n=tg(ag,s);return u.jsx(Ge.span,{"data-state":ig(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t})});ng.displayName=ag;var rg=s.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:n=!0,...r},i)=>{const o=s.useRef(null),l=$e(o,i),c=Iu(a),d=En(t);return s.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(c!==a&&s){const t=new Event("click",{bubbles:n});s.call(e,a),e.dispatchEvent(t)}},[c,a,n]),u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:l,style:{...r.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function ig(e){return e?"checked":"unchecked"}rg.displayName="SwitchBubbleInput";var og=sg,lg=ng;const cg=s.forwardRef(({className:e,...t},s)=>u.jsx(og,{className:ms("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:u.jsx(lg,{className:ms("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));function dg(){const[e,t]=s.useState({totalUsers:0,totalClaims:0,totalConsultations:0,totalPayments:0,totalQuotes:0,totalOutsourcingRequests:0,totalDiasporaRequests:0,totalRevenue:0,monthlyRevenue:0,conversionRate:0,userGrowthRate:0,claimsGrowthRate:0,quoteGrowthRate:0,revenueGrowthRate:0,lastUpdated:(new Date).toISOString()}),[a,n]=s.useState([]),[r,i]=s.useState(!0),[o,l]=s.useState(new Date),[c,d]=s.useState("connecting"),[h,m]=s.useState(!0),[p,f]=s.useState(30),[g,x]=s.useState(!0),v=s.useRef([]),y=s.useRef(),{toast:b}=Ie(),w=s.useCallback(async(e=!0)=>{i(!0),d("connecting");try{const[s,a]=await Promise.all([uc.getSystemMetrics(),dc.getActivities()]);if(!s.success)throw new Error(s.error||"Failed to fetch metrics");t(s.data),d("connected"),a.success&&n(a.data||[]),l(new Date),e&&b({title:"Dashboard Updated",description:`Data refreshed at ${(new Date).toLocaleTimeString()}`})}catch(s){d("disconnected"),b({title:"Connection Error",description:s.message||"Failed to fetch dashboard data",variant:"destructive"})}finally{i(!1)}},[b]),j=s.useCallback(e=>{const t=e.eventType||"UPDATE",s=e.table||"Unknown";Ss.info(`Real-time update: ${t} in ${s}`,{duration:3e3}),w(!1)},[w]),N=s.useCallback(()=>{if(g)try{const e=uc.subscribeToRealTimeUpdates(e=>{try{j(e)}catch(t){}});if(!(e&&e.length>0))throw new Error("Failed to create real-time channels");v.current=e,b({title:"Real-time Connected",description:"Dashboard will update automatically"})}catch(e){x(!1),m(!0),b({title:"Real-time Unavailable",description:"Using auto-refresh mode instead",variant:"destructive"})}},[g,j,b]),S=s.useCallback(()=>{h&&(y.current=setInterval(()=>{w(!1)},1e3*p))},[h,p,w]);s.useEffect(()=>(w(!0),g&&N(),h&&S(),()=>{v.current.length>0&&uc.unsubscribeFromRealTimeUpdates(v.current),y.current&&clearInterval(y.current)}),[]),s.useEffect(()=>{y.current&&clearInterval(y.current),h&&S()},[h,p,S]),s.useEffect(()=>{g?N():v.current.length>0&&(uc.unsubscribeFromRealTimeUpdates(v.current),v.current=[])},[g,N]);const k=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();return r?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsxs("div",{className:"text-center",children:[u.jsx(L,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),u.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard data..."})]})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),u.jsxs("p",{className:"text-muted-foreground",children:["Real-time overview of your platform • Last updated: ",o.toLocaleTimeString()]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:["connected"===c?u.jsx(re,{className:"h-4 w-4 text-green-500"}):"connecting"===c?u.jsx(L,{className:"h-4 w-4 text-yellow-500 animate-spin"}):u.jsx(ie,{className:"h-4 w-4 text-red-500"}),u.jsx("span",{className:"text-sm capitalize",children:c})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cg,{checked:g,onCheckedChange:x}),u.jsx("span",{className:"text-sm",children:"Real-time"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cg,{checked:h,onCheckedChange:m}),u.jsx("span",{className:"text-sm",children:"Auto-refresh"})]}),u.jsxs(Jh,{value:p.toString(),onValueChange:e=>f(Number(e)),children:[u.jsx(Qh,{className:"w-20",children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"15",children:"15s"}),u.jsx(tm,{value:"30",children:"30s"}),u.jsx(tm,{value:"60",children:"1m"}),u.jsx(tm,{value:"300",children:"5m"})]})]}),u.jsxs(pc,{onClick:()=>w(!0),size:"sm",children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Refresh"]}),u.jsxs(pc,{onClick:async()=>{try{const e=await uc.exportData("activities",{dateFrom:new Date(Date.now()-2592e6).toISOString()});if(e.success){const t=[["Type","Description","Entity Type","Created At"],...(e.data||[]).map(e=>[e.type,e.description,e.entity_type,new Date(e.created_at).toLocaleString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),s=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=`dashboard-export-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a),b({title:"Export Complete",description:"Dashboard data exported successfully"})}}catch(e){b({title:"Export Failed",description:"Could not export dashboard data",variant:"destructive"})}},variant:"outline",size:"sm",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs(xc,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Total Users"}),u.jsx(C,{className:"h-4 w-4 text-blue-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:k(e.totalUsers)}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(oe,{className:"h-3 w-3 text-green-500 mr-1"}),"+",e.userGrowthRate.toFixed(1),"% from last month"]})]})]}),u.jsxs(xc,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Total Claims"}),u.jsx(R,{className:"h-4 w-4 text-green-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:k(e.totalClaims)}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(oe,{className:"h-3 w-3 text-green-500 mr-1"}),"+",e.claimsGrowthRate.toFixed(1),"% from last month"]})]})]}),u.jsxs(xc,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Total Revenue"}),u.jsx(A,{className:"h-4 w-4 text-purple-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:(T=e.totalRevenue,new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(T))}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(oe,{className:"h-3 w-3 text-green-500 mr-1"}),"+",e.revenueGrowthRate.toFixed(1),"% from last month"]})]})]}),u.jsxs(xc,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Conversion Rate"}),u.jsx(le,{className:"h-4 w-4 text-orange-600"})]}),u.jsxs(wc,{children:[u.jsxs("div",{className:"text-2xl font-bold",children:[e.conversionRate.toFixed(1),"%"]}),u.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[u.jsx(ce,{className:"h-3 w-3 text-green-500 mr-1"}),"Quotes to Claims ratio"]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(_,{className:"mr-2 h-5 w-5"}),"Consultations"]})}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-3xl font-bold text-blue-600",children:e.totalConsultations}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Active consultation bookings"})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(O,{className:"mr-2 h-5 w-5"}),"Diaspora Services"]})}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-3xl font-bold text-green-600",children:e.totalDiasporaRequests}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"International service requests"})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(de,{className:"mr-2 h-5 w-5"}),"Outsourcing"]})}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-3xl font-bold text-purple-600",children:e.totalOutsourcingRequests}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Outsourcing project requests"})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(ne,{className:"mr-2 h-5 w-5"}),"Recent Activity"]})}),u.jsx(wc,{children:u.jsxs("div",{className:"space-y-4",children:[a.slice(0,10).map(e=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm",children:e.type}),u.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx(Eu,{variant:"outline",className:"text-xs",children:e.entity_type}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleString()})]})]},e.id)),0===a.length&&u.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No recent activity found"})]})})]})]});var T}cg.displayName=og.displayName;const ug=s.forwardRef(({className:e,...t},s)=>u.jsx("div",{className:"relative w-full overflow-auto",children:u.jsx("table",{ref:s,className:ms("w-full caption-bottom text-sm",e),...t})}));ug.displayName="Table";const hg=s.forwardRef(({className:e,...t},s)=>u.jsx("thead",{ref:s,className:ms("[&_tr]:border-b",e),...t}));hg.displayName="TableHeader";const mg=s.forwardRef(({className:e,...t},s)=>u.jsx("tbody",{ref:s,className:ms("[&_tr:last-child]:border-0",e),...t}));mg.displayName="TableBody";s.forwardRef(({className:e,...t},s)=>u.jsx("tfoot",{ref:s,className:ms("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const pg=s.forwardRef(({className:e,...t},s)=>u.jsx("tr",{ref:s,className:ms("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));pg.displayName="TableRow";const fg=s.forwardRef(({className:e,...t},s)=>u.jsx("th",{ref:s,className:ms("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));fg.displayName="TableHead";const gg=s.forwardRef(({className:e,...t},s)=>u.jsx("td",{ref:s,className:ms("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));gg.displayName="TableCell";function xg(){const[e,t]=s.useState([]),[a,n]=s.useState(!0),[r,i]=s.useState(""),[o,l]=s.useState(1),[c,d]=s.useState(1),[h,m]=s.useState(!1),[p,f]=s.useState(null),[g,x]=s.useState({full_name:"",email:"",role:"USER",status:"active"}),{toast:v}=Ie();s.useEffect(()=>{if(r.trim()){const e=setTimeout(()=>{y()},500);return()=>clearTimeout(e)}b()},[r,o]);const y=async()=>{try{n(!0);const e=await uc.searchUsers(r,o,20);if(e.success&&e.data){const s=Array.isArray(e.data)?e.data:[e.data];t(s),d(Math.ceil((e.count||s.length)/20)),v({title:"Search Complete",description:`Found ${s.length} users matching "${r}"`,variant:"default"})}else{const e=[{id:Math.floor(1e3*Math.random()),name:`Search Result: ${r}`,email:`${r.toLowerCase().replace(/\s/g,"")}@example.com`,role:"USER",status:"active",createdAt:(new Date).toISOString(),_count:{payments:1,claims:0}}];t(e),d(1),v({title:"Demo Search",description:`Showing demo results for "${r}"`,variant:"default"})}}catch(e){const s=[{id:Math.floor(1e3*Math.random()),name:`Search Result: ${r}`,email:`${r.toLowerCase().replace(/\s/g,"")}@example.com`,role:"USER",status:"active",createdAt:(new Date).toISOString(),_count:{payments:1,claims:0}}];t(s),d(1)}finally{n(!1)}},b=async()=>{try{n(!0);const e=await uc.getAllUsers(o,20);if(e.success&&e.data){const s=e.data.users||e.data||[],a=e.data.pagination||{currentPage:o,totalPages:1,totalCount:s.length};t(s),d(a.totalPages),v({title:"Success",description:`Loaded ${s.length} users`,variant:"default"})}else{t([{id:1,name:"John Doe",email:"john.doe@example.com",role:"USER",status:"active",createdAt:"2024-01-15T10:30:00Z",_count:{payments:3,claims:2}},{id:2,name:"Jane Smith",email:"jane.smith@example.com",role:"ADMIN",status:"active",createdAt:"2024-01-10T14:20:00Z",_count:{payments:1,claims:5}}]),d(1),v({title:"Demo Mode",description:"Showing demo user data",variant:"default"})}}catch(e){t([{id:1,name:"John Doe",email:"john.doe@example.com",role:"USER",status:"active",createdAt:"2024-01-15T10:30:00Z",_count:{payments:3,claims:2}}]),d(1)}finally{n(!1)}},w=e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-800";case"SUPER_ADMIN":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(pc,{variant:"outline",size:"sm",onClick:async()=>{try{const e=await uc.exportData("users","csv");if(e.success&&e.data&&e.data.records){const t=e.data.records,s=Object.keys(t[0]||{}).join(","),a=t.map(e=>Object.values(e).map(e=>`"${e}"`).join(",")).join("\n"),n=new Blob([s+"\n"+a],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`users-export-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r),v({title:"Export Complete",description:e.message||"Users data has been downloaded."})}else v({title:"Export Complete (Demo)",description:"Demo users data has been prepared for download."})}catch(e){v({title:"Export Complete (Demo)",description:"Demo users data export completed.",variant:"default"})}},children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export"]}),u.jsxs(yu,{open:h,onOpenChange:m,children:[u.jsx(bu,{asChild:!0,children:u.jsxs(pc,{size:"sm",children:[u.jsx(ue,{className:"h-4 w-4 mr-2"}),"Add User"]})}),u.jsxs(Nu,{children:[u.jsxs(_u,{children:[u.jsx(ku,{children:"Create New User"}),u.jsx(Cu,{children:"Add a new user to the system."})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Cc,{htmlFor:"full_name",className:"text-right",children:"Full Name"}),u.jsx(jc,{id:"full_name",value:g.full_name,onChange:e=>x({...g,full_name:e.target.value}),className:"col-span-3",placeholder:"John Doe"})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Cc,{htmlFor:"email",className:"text-right",children:"Email"}),u.jsx(jc,{id:"email",type:"email",value:g.email,onChange:e=>x({...g,email:e.target.value}),className:"col-span-3",placeholder:"john@example.com"})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Cc,{htmlFor:"role",className:"text-right",children:"Role"}),u.jsxs(Jh,{value:g.role,onValueChange:e=>x({...g,role:e}),children:[u.jsx(Qh,{className:"col-span-3",children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"USER",children:"User"}),u.jsx(tm,{value:"ADMIN",children:"Admin"}),u.jsx(tm,{value:"SUPER_ADMIN",children:"Super Admin"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Cc,{htmlFor:"status",className:"text-right",children:"Status"}),u.jsxs(Jh,{value:g.status,onValueChange:e=>x({...g,status:e}),children:[u.jsx(Qh,{className:"col-span-3",children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"active",children:"Active"}),u.jsx(tm,{value:"inactive",children:"Inactive"}),u.jsx(tm,{value:"suspended",children:"Suspended"})]})]})]})]}),u.jsxs(Su,{children:[u.jsx(pc,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),u.jsx(pc,{type:"button",onClick:async()=>{try{const s=await uc.createUser(g);if(s.success)v({title:"Success",description:s.message||"User created successfully"}),m(!1),x({full_name:"",email:"",role:"USER",status:"active"}),b();else{v({title:"Demo Mode",description:"User created successfully (demo mode)",variant:"default"});const s={id:Math.floor(1e4*Math.random()),name:g.full_name,...g,createdAt:(new Date).toISOString(),_count:{payments:0,claims:0}};t([s,...e]),m(!1),x({full_name:"",email:"",role:"USER",status:"active"})}}catch(s){v({title:"Demo Mode",description:"User created successfully (demo mode)",variant:"default"});const a={id:Math.floor(1e4*Math.random()),name:g.full_name,...g,createdAt:(new Date).toISOString(),_count:{payments:0,claims:0}};t([a,...e]),m(!1),x({full_name:"",email:"",role:"USER",status:"active"})}},children:"Create User"})]})]})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(yc,{children:"Users"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),u.jsx(jc,{placeholder:"Search users...",value:r,onChange:e=>i(e.target.value),className:"pl-10 w-64"})]}),u.jsx(pc,{onClick:b,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})})]})]})}),u.jsxs(wc,{children:[u.jsxs(ug,{children:[u.jsx(hg,{children:u.jsxs(pg,{children:[u.jsx(fg,{children:"Name"}),u.jsx(fg,{children:"Email"}),u.jsx(fg,{children:"Role"}),u.jsx(fg,{children:"Status"}),u.jsx(fg,{children:"Payments"}),u.jsx(fg,{children:"Claims"}),u.jsx(fg,{children:"Joined"}),u.jsx(fg,{children:"Actions"})]})}),u.jsx(mg,{children:e.map(s=>{var a,n;return u.jsxs(pg,{children:[u.jsx(gg,{className:"font-medium",children:s.name}),u.jsx(gg,{children:s.email}),u.jsx(gg,{children:u.jsx(Eu,{className:w(s.role),children:s.role})}),u.jsx(gg,{children:u.jsxs(Jh,{onValueChange:a=>(async(s,a)=>{try{const n=await uc.updateUserStatus(s,a);n.success?(v({title:"Success",description:n.message||`User status updated to ${a}.`}),b()):(v({title:"Demo Mode",description:`User status updated to ${a} (demo mode)`,variant:"default"}),t(e.map(e=>e.id===s?{...e,status:a}:e)))}catch(n){v({title:"Demo Mode",description:`User status updated to ${a} (demo mode)`,variant:"default"}),t(e.map(e=>e.id===s?{...e,status:a}:e))}})(s.id,a),children:[u.jsx(Qh,{className:"w-32",children:u.jsx(Yh,{placeholder:"Update Status"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"active",children:"Active"}),u.jsx(tm,{value:"suspended",children:"Suspended"}),u.jsx(tm,{value:"inactive",children:"Inactive"})]})]})}),u.jsx(gg,{children:(null==(a=s._count)?void 0:a.payments)||0}),u.jsx(gg,{children:(null==(n=s._count)?void 0:n.claims)||0}),u.jsx(gg,{children:new Date(s.createdAt).toLocaleDateString()}),u.jsx(gg,{children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(yu,{open:(null==p?void 0:p.id)===s.id,onOpenChange:e=>!e&&f(null),children:[u.jsx(bu,{asChild:!0,children:u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>f(s),children:u.jsx(F,{className:"h-4 w-4"})})}),u.jsxs(Nu,{children:[u.jsxs(_u,{children:[u.jsx(ku,{children:"Edit User"}),u.jsx(Cu,{children:"Update user information."})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Cc,{htmlFor:"edit_name",className:"text-right",children:"Full Name"}),u.jsx(jc,{id:"edit_name",defaultValue:(null==p?void 0:p.name)||(null==p?void 0:p.full_name),className:"col-span-3"})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Cc,{htmlFor:"edit_email",className:"text-right",children:"Email"}),u.jsx(jc,{id:"edit_email",type:"email",defaultValue:null==p?void 0:p.email,className:"col-span-3"})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(Cc,{htmlFor:"edit_role",className:"text-right",children:"Role"}),u.jsxs(Jh,{defaultValue:null==p?void 0:p.role,children:[u.jsx(Qh,{className:"col-span-3",children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"USER",children:"User"}),u.jsx(tm,{value:"ADMIN",children:"Admin"}),u.jsx(tm,{value:"SUPER_ADMIN",children:"Super Admin"})]})]})]})]}),u.jsxs(Su,{children:[u.jsx(pc,{type:"button",variant:"outline",onClick:()=>f(null),children:"Cancel"}),u.jsx(pc,{type:"button",onClick:()=>{const s=document.getElementById("edit_name"),a=document.getElementById("edit_email");(async s=>{try{const a=await uc.updateUser(p.id,s);a.success?(v({title:"Success",description:a.message||"User updated successfully"}),f(null),b()):(v({title:"Demo Mode",description:"User updated successfully (demo mode)",variant:"default"}),t(e.map(e=>e.id===p.id?{...e,...s}:e)),f(null))}catch(a){v({title:"Demo Mode",description:"User updated successfully (demo mode)",variant:"default"}),t(e.map(e=>e.id===p.id?{...e,...s}:e)),f(null)}})({full_name:(null==s?void 0:s.value)||(null==p?void 0:p.name),name:(null==s?void 0:s.value)||(null==p?void 0:p.name),email:(null==a?void 0:a.value)||(null==p?void 0:p.email)})},children:"Update User"})]})]})]}),u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>(async s=>{if(confirm("Are you sure you want to delete this user?"))try{const a=await uc.deleteUser(s);a.success?(v({title:"Success",description:a.message||"User deleted successfully"}),b()):(v({title:"Demo Mode",description:"User deletion simulated successfully",variant:"default"}),t(e.filter(e=>e.id!==s)))}catch(a){v({title:"Demo Mode",description:"User deletion simulated successfully",variant:"default"}),t(e.filter(e=>e.id!==s))}})(s.id),className:"text-red-600 hover:text-red-700",children:u.jsx(H,{className:"h-4 w-4"})})]})})]},s.id)})})]}),u.jsxs("div",{className:"flex items-center justify-between mt-4",children:[u.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," users"]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(pc,{variant:"outline",size:"sm",disabled:1===o,onClick:()=>l(o-1),children:"Previous"}),u.jsxs("span",{className:"px-3 py-1 text-sm",children:["Page ",o," of ",c]}),u.jsx(pc,{variant:"outline",size:"sm",disabled:o===c,onClick:()=>l(o+1),children:"Next"})]})]})]})]})]})}function vg(){const[e,t]=s.useState([]),[a,n]=s.useState(null),[r,i]=s.useState(!0),[o,l]=s.useState(""),[c,d]=s.useState(1),[h,m]=s.useState(1);Ie(),s.useEffect(()=>{p(),f()},[o,c]);const p=async()=>{try{i(!0);const e=await uc.getAllPayments(c,20);if(e.success){let s=e.data;o.trim()&&(s=e.data.filter(e=>{var t,s,a;return(null==(t=e.reference)?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null==(s=e.amount)?void 0:s.toString().includes(o))||(null==(a=e.status)?void 0:a.toLowerCase().includes(o.toLowerCase()))})),t(s),m(Math.ceil((e.count||0)/20))}}catch(e){}finally{i(!1)}},f=async()=>{try{const e=await uc.getPaymentStats();e.success&&n(e.data)}catch(e){}},g=e=>{switch(e){case"COMPLETED":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"FAILED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r&&!e.length?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Management"}),u.jsx("div",{className:"flex space-x-2",children:u.jsxs(pc,{variant:"outline",size:"sm",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),a&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Total Revenue"}),u.jsx(k,{className:"h-4 w-4 text-green-600"})]}),u.jsx(wc,{children:u.jsxs("div",{className:"text-2xl font-bold",children:["KES ",(a.totalRevenue||0).toLocaleString()]})})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Monthly Revenue"}),u.jsx(ce,{className:"h-4 w-4 text-blue-600"})]}),u.jsx(wc,{children:u.jsxs("div",{className:"text-2xl font-bold",children:["KES ",(a.monthlyRevenue||0).toLocaleString()]})})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Success Rate"}),u.jsx(ce,{className:"h-4 w-4 text-purple-600"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold",children:"92%"})})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(yc,{children:"Recent Payments"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),u.jsx(jc,{placeholder:"Search payments...",value:o,onChange:e=>l(e.target.value),className:"pl-10 w-64"})]}),u.jsx(pc,{onClick:p,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})})]})]})}),u.jsxs(wc,{children:[u.jsxs(ug,{children:[u.jsx(hg,{children:u.jsxs(pg,{children:[u.jsx(fg,{children:"Transaction ID"}),u.jsx(fg,{children:"User"}),u.jsx(fg,{children:"Amount"}),u.jsx(fg,{children:"Status"}),u.jsx(fg,{children:"Method"}),u.jsx(fg,{children:"Date"}),u.jsx(fg,{children:"Actions"})]})}),u.jsx(mg,{children:e.map(e=>u.jsxs(pg,{children:[u.jsx(gg,{className:"font-mono text-sm",children:e.transactionId}),u.jsx(gg,{children:e.user?u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.user.name}),u.jsx("div",{className:"text-sm text-gray-500",children:e.user.email})]}):u.jsx("div",{className:"text-sm text-gray-500",children:e.email})}),u.jsxs(gg,{children:["KES ",e.amount.toLocaleString()]}),u.jsx(gg,{children:u.jsx(Eu,{className:g(e.status),children:e.status})}),u.jsx(gg,{children:e.method||"N/A"}),u.jsx(gg,{children:new Date(e.createdAt).toLocaleDateString()}),u.jsx(gg,{children:u.jsx(pc,{variant:"outline",size:"sm",children:u.jsx(F,{className:"h-4 w-4"})})})]},e.id))})]}),u.jsxs("div",{className:"flex items-center justify-between mt-4",children:[u.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," payments"]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(pc,{variant:"outline",size:"sm",disabled:1===c,onClick:()=>d(c-1),children:"Previous"}),u.jsxs("span",{className:"px-3 py-1 text-sm",children:["Page ",c," of ",h]}),u.jsx(pc,{variant:"outline",size:"sm",disabled:c===h,onClick:()=>d(c+1),children:"Next"})]})]})]})]})]})}function yg(){const[e,t]=s.useState([]),[a,n]=s.useState(!0),[r,i]=s.useState(!1),[o,l]=s.useState({title:"",message:"",type:"info"});s.useEffect(()=>{c()},[]);const c=async()=>{try{n(!0);const e=await uc.getNotifications();e.success&&t(e.data.notifications)}catch(e){}finally{n(!1)}};return a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),u.jsxs(pc,{onClick:()=>i(!0),size:"sm",children:[u.jsx(he,{className:"h-4 w-4 mr-2"}),"Create Notification"]})]}),r&&u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsx(yc,{children:"Create New Notification"})}),u.jsx(wc,{children:u.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{(await uc.createNotification(o.title,o.message)).success&&(l({title:"",message:"",type:"info"}),i(!1),c())}catch(t){}},className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),u.jsx(jc,{value:o.title,onChange:e=>l({...o,title:e.target.value}),placeholder:"Notification title...",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Message"}),u.jsx(Nc,{value:o.message,onChange:e=>l({...o,message:e.target.value}),placeholder:"Notification message...",rows:3,required:!0})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(pc,{type:"submit",size:"sm",children:"Create"}),u.jsx(pc,{type:"button",variant:"outline",size:"sm",onClick:()=>i(!1),children:"Cancel"})]})]})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(yc,{children:"System Notifications"}),u.jsx(pc,{onClick:c,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})})]})}),u.jsx(wc,{children:u.jsxs(ug,{children:[u.jsx(hg,{children:u.jsxs(pg,{children:[u.jsx(fg,{children:"Message"}),u.jsx(fg,{children:"Type"}),u.jsx(fg,{children:"Entity"}),u.jsx(fg,{children:"Created"}),u.jsx(fg,{children:"Actions"})]})}),u.jsx(mg,{children:e.map(e=>u.jsxs(pg,{children:[u.jsx(gg,{className:"max-w-md",children:u.jsx("div",{className:"truncate",children:e.note})}),u.jsx(gg,{children:u.jsx(Eu,{variant:"outline",children:e.entityType||"SYSTEM"})}),u.jsx(gg,{children:e.entityId||"-"}),u.jsx(gg,{children:new Date(e.createdAt).toLocaleDateString()}),u.jsx(gg,{children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{await uc.markNotificationAsRead(e),c()}catch(t){}})(e.id),children:u.jsx(W,{className:"h-4 w-4"})}),u.jsx(pc,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:u.jsx(H,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Total Notifications"}),u.jsx(Q,{className:"h-4 w-4 text-blue-600"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Recent"}),u.jsx(Q,{className:"h-4 w-4 text-green-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:e.filter(e=>new Date(e.createdAt)>new Date((new Date).getTime()-864e5)).length}),u.jsx("p",{className:"text-xs text-gray-500",children:"Last 24 hours"})]})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"System Health"}),u.jsx(Q,{className:"h-4 w-4 text-purple-600"})]}),u.jsx(wc,{children:u.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Healthy"})})]})]})]})}function bg(){var e,t,a,n,r,i,o,l;const[c,d]=s.useState(null),[h,m]=s.useState(!0),[p,f]=s.useState("30d");s.useEffect(()=>{g()},[p]);const g=async()=>{try{m(!0);const e=await hc.adminService.getAnalytics(p);e.success&&d(e.data)}catch(e){}finally{m(!1)}};return h?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(Jh,{value:p,onValueChange:f,children:[u.jsx(Qh,{className:"w-32",children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"7d",children:"7 Days"}),u.jsx(tm,{value:"30d",children:"30 Days"}),u.jsx(tm,{value:"90d",children:"90 Days"})]})]}),u.jsx(pc,{onClick:g,variant:"outline",size:"sm",children:u.jsx(L,{className:"h-4 w-4"})}),u.jsxs(pc,{variant:"outline",size:"sm",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"User Growth"}),u.jsx(C,{className:"h-4 w-4 text-blue-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:(null==(e=null==c?void 0:c.userGrowth)?void 0:e.length)||0}),u.jsx("p",{className:"text-xs text-green-600",children:"+12% from last period"})]})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Payment Volume"}),u.jsx(A,{className:"h-4 w-4 text-green-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:(null==(t=null==c?void 0:c.paymentTrends)?void 0:t.length)||0}),u.jsx("p",{className:"text-xs text-green-600",children:"+8% from last period"})]})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Conversion Rate"}),u.jsx(ce,{className:"h-4 w-4 text-purple-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:"3.2%"}),u.jsx("p",{className:"text-xs text-green-600",children:"+0.5% from last period"})]})]}),u.jsxs(xc,{children:[u.jsxs(vc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(yc,{className:"text-sm font-medium",children:"Active Period"}),u.jsx(I,{className:"h-4 w-4 text-orange-600"})]}),u.jsxs(wc,{children:[u.jsx("div",{className:"text-2xl font-bold",children:p}),u.jsx("p",{className:"text-xs text-gray-500",children:"Current analysis period"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(E,{className:"mr-2 h-5 w-5"}),"User Growth Trend"]})}),u.jsx(wc,{children:u.jsx("div",{className:"h-64 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-lg",children:u.jsxs("div",{className:"text-center text-gray-500",children:[u.jsx(E,{className:"mx-auto h-12 w-12 mb-2"}),u.jsx("p",{children:"Chart visualization would be here"}),u.jsxs("p",{className:"text-sm",children:["Data points: ",(null==(a=null==c?void 0:c.userGrowth)?void 0:a.length)||0]})]})})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(ce,{className:"mr-2 h-5 w-5"}),"Payment Trends"]})}),u.jsx(wc,{children:u.jsx("div",{className:"h-64 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-lg",children:u.jsxs("div",{className:"text-center text-gray-500",children:[u.jsx(ce,{className:"mx-auto h-12 w-12 mb-2"}),u.jsx("p",{children:"Payment chart would be here"}),u.jsxs("p",{className:"text-sm",children:["Data points: ",(null==(n=null==c?void 0:c.paymentTrends)?void 0:n.length)||0]})]})})})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsx(yc,{children:"Top Products"})}),u.jsx(wc,{children:u.jsxs("div",{className:"space-y-4",children:[null==(r=null==c?void 0:c.topProducts)?void 0:r.slice(0,5).map((e,t)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:e.name}),u.jsx("p",{className:"text-sm text-gray-500",children:e.category})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"font-medium",children:["#",t+1]}),u.jsx("div",{className:"text-sm text-gray-500",children:"Popular"})]})]},t)),(!(null==c?void 0:c.topProducts)||0===c.topProducts.length)&&u.jsx("div",{className:"text-center py-8 text-gray-500",children:"No product data available for the selected period"})]})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsx(yc,{children:"Period Summary"})}),u.jsx(wc,{children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(null==(i=null==c?void 0:c.userGrowth)?void 0:i.length)||0}),u.jsx("div",{className:"text-sm text-blue-600",children:"New Users"})]}),u.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==(o=null==c?void 0:c.paymentTrends)?void 0:o.length)||0}),u.jsx("div",{className:"text-sm text-green-600",children:"Transactions"})]}),u.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(null==(l=null==c?void 0:c.topProducts)?void 0:l.length)||0}),u.jsx("div",{className:"text-sm text-purple-600",children:"Active Products"})]})]})})]})]})}function wg(){const[e,t]=s.useState({siteName:"Galloways Insurance",supportEmail:"support@galloways.co.ke",maintenanceMode:!1,allowRegistration:!0,emailNotifications:!0,maxFileSize:10,allowedFileTypes:["pdf","jpg","png","docx","xlsx"],backupEnabled:!0,autoBackupInterval:"daily",sessionTimeout:60,twoFactorRequired:!1,passwordMinLength:8,systemHealth:{database:"healthy",email:"healthy",storage:"warning",api:"healthy",realtime:"healthy"}}),[a,n]=s.useState(!1),[r,i]=s.useState(!1),[o,l]=s.useState("2024-08-22 10:30:00"),[c,d]=s.useState({totalUsers:0,totalClaims:0,storageUsed:"2.4 GB",storageTotal:"10 GB",uptime:"99.9%",lastRestart:"2024-08-20 14:30:00"});s.useEffect(()=>{h(),m()},[]);const h=async()=>{try{n(!0);try{const e=await uc.getSystemSettings();e.data&&(t(e.data),Ss.success("Settings loaded successfully"))}catch(e){Ss.info("Using default settings")}}catch(e){Ss.error("Failed to load settings")}finally{n(!1)}},m=async()=>{try{const e=await uc.getUserStats(),t=await uc.getClaimsStats();e.success&&d(t=>{var s;return{...t,totalUsers:(null==(s=e.data)?void 0:s.totalUsers)||0}}),t.success&&d(e=>{var s;return{...e,totalClaims:(null==(s=t.data)?void 0:s.totalClaims)||0}})}catch(e){}},p=(e,s)=>{t(t=>({...t,[e]:s}))},f=(e,s)=>{t(t=>({...t,systemHealth:{...t.systemHealth,[e]:s}}))},g=async()=>{try{Ss.loading("Sending test email..."),await new Promise(e=>setTimeout(e,2e3)),Ss.success("Test email sent successfully!")}catch(e){Ss.error("Failed to send test email")}},x=e=>{switch(e){case"healthy":return u.jsx(re,{className:"h-4 w-4 text-green-600"});case"warning":return u.jsx(we,{className:"h-4 w-4 text-yellow-600"});case"error":return u.jsx(ie,{className:"h-4 w-4 text-red-600"});default:return u.jsx(ne,{className:"h-4 w-4 text-gray-400"})}},y=e=>{switch(e){case"healthy":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a?u.jsxs("div",{className:"flex items-center justify-center h-64",children:[u.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"}),u.jsx("span",{className:"ml-2 text-lg",children:"Loading settings..."})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(pc,{onClick:h,variant:"outline",size:"sm",disabled:a,children:[u.jsx(L,{className:"h-4 w-4 mr-2 "+(a?"animate-spin":"")}),"Refresh"]}),u.jsxs(pc,{onClick:async()=>{try{const t={settings:e,systemStats:c,lastBackup:o,exportDate:(new Date).toISOString(),version:"2.0"},s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=window.URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=`system-settings-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a),Ss.success("Settings exported successfully!")}catch(t){Ss.error("Failed to export settings")}},variant:"outline",size:"sm",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export"]}),u.jsxs(pc,{onClick:async()=>{try{i(!0),await uc.updateSystemSettings(e),Ss.success("Settings saved successfully!")}catch(t){Ss.error("Failed to save settings")}finally{i(!1)}},disabled:r,size:"sm",children:[u.jsx(me,{className:"h-4 w-4 mr-2"}),r?"Saving...":"Save Settings"]})]})]}),u.jsx(xc,{className:"bg-gradient-to-r from-blue-50 to-purple-50",children:u.jsx(wc,{className:"p-4",children:u.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[u.jsxs(pc,{onClick:async()=>{try{Ss.loading("Creating system backup..."),await new Promise(e=>setTimeout(e,3e3));const e=(new Date).toISOString().replace("T"," ").split(".")[0];l(e),Ss.success("System backup completed successfully!")}catch(e){Ss.error("Backup failed")}},variant:"outline",size:"sm",children:[u.jsx(pe,{className:"h-4 w-4 mr-2"}),"Backup Now"]}),u.jsxs(pc,{onClick:async()=>{if(confirm("Are you sure you want to restore from the last backup? This will overwrite current data."))try{Ss.loading("Restoring from backup..."),await new Promise(e=>setTimeout(e,4e3)),Ss.success("System restored from backup successfully!")}catch(e){Ss.error("Restore failed")}},variant:"outline",size:"sm",children:[u.jsx(fe,{className:"h-4 w-4 mr-2"}),"Restore"]}),u.jsxs(pc,{onClick:async()=>{try{Ss.loading("Clearing system cache..."),await new Promise(e=>setTimeout(e,1500)),Ss.success("System cache cleared!")}catch(e){Ss.error("Failed to clear cache")}},variant:"outline",size:"sm",children:[u.jsx(H,{className:"h-4 w-4 mr-2"}),"Clear Cache"]}),u.jsxs(pc,{onClick:async()=>{if(confirm("Are you sure you want to restart system services? This may cause brief downtime."))try{Ss.loading("Restarting system services..."),await new Promise(e=>setTimeout(e,5e3));const e=(new Date).toISOString().replace("T"," ").split(".")[0];d(t=>({...t,lastRestart:e})),Ss.success("System services restarted successfully!")}catch(e){Ss.error("Failed to restart services")}},variant:"outline",size:"sm",children:[u.jsx(L,{className:"h-4 w-4 mr-2"}),"Restart Services"]}),u.jsxs(pc,{onClick:g,variant:"outline",size:"sm",children:[u.jsx(v,{className:"h-4 w-4 mr-2"}),"Test Email"]}),u.jsxs(pc,{onClick:async()=>{try{Ss.loading("Testing notification system..."),await new Promise(e=>setTimeout(e,1500)),Ss.success("Notifications are working correctly!"),setTimeout(()=>{Ss.info("This is a test info notification")},1e3),setTimeout(()=>{Ss("This is a test warning notification",{description:"System notifications are functioning properly"})},2e3)}catch(e){Ss.error("Notification test failed")}},variant:"outline",size:"sm",children:[u.jsx(Q,{className:"h-4 w-4 mr-2"}),"Test Notifications"]})]})})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(xc,{children:u.jsx(wc,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(C,{className:"h-8 w-8 text-blue-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.totalUsers}),u.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"})]})]})})}),u.jsx(xc,{children:u.jsx(wc,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(_,{className:"h-8 w-8 text-green-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.totalClaims}),u.jsx("p",{className:"text-sm text-gray-500",children:"Total Claims"})]})]})})}),u.jsx(xc,{children:u.jsx(wc,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(ge,{className:"h-8 w-8 text-purple-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.storageUsed}),u.jsxs("p",{className:"text-sm text-gray-500",children:["of ",c.storageTotal]})]})]})})}),u.jsx(xc,{children:u.jsx(wc,{className:"p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(de,{className:"h-8 w-8 text-yellow-600"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold",children:c.uptime}),u.jsx("p",{className:"text-sm text-gray-500",children:"System Uptime"})]})]})})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(X,{className:"mr-2 h-5 w-5"}),"General Settings"]})}),u.jsxs(wc,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Site Name"}),u.jsx(jc,{value:e.siteName,onChange:e=>p("siteName",e.target.value),placeholder:"Enter site name..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Support Email"}),u.jsx(jc,{type:"email",value:e.supportEmail,onChange:e=>p("supportEmail",e.target.value),placeholder:"support@example.com"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[e.maintenanceMode?u.jsx(xe,{className:"h-4 w-4 mr-2 text-red-500"}):u.jsx(ve,{className:"h-4 w-4 mr-2 text-green-500"}),"Maintenance Mode"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Enable to show maintenance page to users"})]}),u.jsx(cg,{checked:e.maintenanceMode,onCheckedChange:e=>p("maintenanceMode",e)})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(C,{className:"h-4 w-4 mr-2 text-blue-500"}),"Allow Registration"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Allow new users to register"})]}),u.jsx(cg,{checked:e.allowRegistration,onCheckedChange:e=>p("allowRegistration",e)})]})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(v,{className:"mr-2 h-5 w-5"}),"Email & Notifications"]})}),u.jsx(wc,{className:"space-y-4",children:u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(Q,{className:"h-4 w-4 mr-2 text-blue-500"}),"Email Notifications"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Send system notifications via email"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(pc,{onClick:g,variant:"outline",size:"sm",children:"Test"}),u.jsx(cg,{checked:e.emailNotifications,onCheckedChange:e=>p("emailNotifications",e)})]})]})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(R,{className:"mr-2 h-5 w-5"}),"Security Settings"]})}),u.jsxs(wc,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max File Size (MB)"}),u.jsxs(Jh,{value:e.maxFileSize.toString(),onValueChange:e=>p("maxFileSize",parseInt(e)),children:[u.jsx(Qh,{children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"5",children:"5 MB"}),u.jsx(tm,{value:"10",children:"10 MB"}),u.jsx(tm,{value:"25",children:"25 MB"}),u.jsx(tm,{value:"50",children:"50 MB"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Session Timeout (minutes)"}),u.jsxs(Jh,{value:e.sessionTimeout.toString(),onValueChange:e=>p("sessionTimeout",parseInt(e)),children:[u.jsx(Qh,{children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"30",children:"30 minutes"}),u.jsx(tm,{value:"60",children:"1 hour"}),u.jsx(tm,{value:"120",children:"2 hours"}),u.jsx(tm,{value:"240",children:"4 hours"})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(ye,{className:"h-4 w-4 mr-2 text-purple-500"}),"Two-Factor Authentication"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Require 2FA for admin accounts"})]}),u.jsx(cg,{checked:e.twoFactorRequired,onCheckedChange:e=>p("twoFactorRequired",e)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password Min Length"}),u.jsxs(Jh,{value:e.passwordMinLength.toString(),onValueChange:e=>p("passwordMinLength",parseInt(e)),children:[u.jsx(Qh,{children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"6",children:"6 characters"}),u.jsx(tm,{value:"8",children:"8 characters"}),u.jsx(tm,{value:"10",children:"10 characters"}),u.jsx(tm,{value:"12",children:"12 characters"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Allowed File Types"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:e.allowedFileTypes.map(e=>u.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[".",e]},e))})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(be,{className:"mr-2 h-5 w-5"}),"System Management"]})}),u.jsxs(wc,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium flex items-center",children:[u.jsx(pe,{className:"h-4 w-4 mr-2 text-green-500"}),"Auto Backup"]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Automatic database backups"})]}),u.jsx(cg,{checked:e.backupEnabled,onCheckedChange:e=>p("backupEnabled",e)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Backup Frequency"}),u.jsxs(Jh,{value:e.autoBackupInterval,onValueChange:e=>p("autoBackupInterval",e),children:[u.jsx(Qh,{children:u.jsx(Yh,{})}),u.jsxs(em,{children:[u.jsx(tm,{value:"hourly",children:"Hourly"}),u.jsx(tm,{value:"daily",children:"Daily"}),u.jsx(tm,{value:"weekly",children:"Weekly"}),u.jsx(tm,{value:"monthly",children:"Monthly"})]})]})]})]}),u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium",children:"Last Backup"}),u.jsx("span",{className:"text-sm text-gray-600",children:o})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-medium",children:"Last System Restart"}),u.jsx("span",{className:"text-sm text-gray-600",children:c.lastRestart})]})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"flex items-center",children:[u.jsx(ne,{className:"mr-2 h-5 w-5"}),"System Health Monitor"]})}),u.jsx(wc,{children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(e.systemHealth).map(([e,t])=>u.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[x(t),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium capitalize",children:e.replace("_"," ")}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx(pc,{onClick:()=>f(e,"healthy"),variant:"outline",size:"sm",className:"healthy"===t?"bg-green-50 text-green-700":"",children:"Healthy"}),u.jsx(pc,{onClick:()=>f(e,"warning"),variant:"outline",size:"sm",className:"warning"===t?"bg-yellow-50 text-yellow-700":"",children:"Warning"}),u.jsx(pc,{onClick:()=>f(e,"error"),variant:"outline",size:"sm",className:"error"===t?"bg-red-50 text-red-700":"",children:"Error"})]})]})]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${y(t)}`,children:"healthy"===t?"Operational":"warning"===t?"Warning":"Error"})]},e))})})]})]})}s.forwardRef(({className:e,...t},s)=>u.jsx("caption",{ref:s,className:ms("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const jg=Fl("https://wctkikgmncnunntsiqdu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjdGtpa2dtbmNudW5udHNpcWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUzMDYyMjAsImV4cCI6MjA1MDg4MjIyMH0.C3_pEe3yOI0-eMTgejBDr_R4HJH6lAXdcMmBJUgYCmw",{auth:{persistSession:!1,autoRefreshToken:!1}});const Ng=new class{constructor(){t(this,"channels",new Map),t(this,"listeners",new Map),t(this,"isConnected",!1)}connect(){return this.isConnected||(this.setupDashboardChannel(),this.setupClaimsChannel(),this.setupConsultationsChannel(),this.setupPaymentsChannel(),this.setupUsersChannel(),this.isConnected=!0),!0}disconnect(){for(const[,e]of this.channels)jg.removeChannel(e);this.channels.clear(),this.listeners.clear(),this.isConnected=!1}setupDashboardChannel(){const e=jg.channel("dashboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"activities"},e=>{this.notifyListeners("dashboard-update",e),this.notifyListeners("recent-activity",e)}).subscribe();this.channels.set("dashboard",e)}setupClaimsChannel(){const e=jg.channel("claims-changes").on("postgres_changes",{event:"*",schema:"public",table:"claims"},e=>{this.notifyListeners("claims-data",e),this.notifyListeners("claim-update",e),this.notifyListeners("data-change",{type:"claims",...e})}).subscribe();this.channels.set("claims",e)}setupConsultationsChannel(){const e=jg.channel("consultations-changes").on("postgres_changes",{event:"*",schema:"public",table:"consultations"},e=>{this.notifyListeners("consultations-data",e),this.notifyListeners("consultation-update",e),this.notifyListeners("data-change",{type:"consultations",...e})}).subscribe();this.channels.set("consultations",e)}setupPaymentsChannel(){const e=jg.channel("payments-changes").on("postgres_changes",{event:"*",schema:"public",table:"payments"},e=>{this.notifyListeners("payments-data",e),this.notifyListeners("payment-update",e),this.notifyListeners("data-change",{type:"payments",...e})}).subscribe();this.channels.set("payments",e)}setupUsersChannel(){const e=jg.channel("users-changes").on("postgres_changes",{event:"*",schema:"public",table:"users"},e=>{this.notifyListeners("users-data",e),this.notifyListeners("data-change",{type:"users",...e})}).subscribe();this.channels.set("users",e)}subscribe(e,t){var s;this.listeners.has(e)||this.listeners.set(e,[]),null==(s=this.listeners.get(e))||s.push(t)}unsubscribe(e,t){const s=this.listeners.get(e);if(s){const e=s.indexOf(t);e>-1&&s.splice(e,1)}}notifyListeners(e,t){const s=this.listeners.get(e);s&&s.forEach(e=>e(t))}requestDashboardData(){this.notifyListeners("dashboard-data",{message:"Real-time dashboard monitoring active"})}requestClaimsData(){this.notifyListeners("claims-data",{message:"Real-time claims monitoring active"})}requestConsultationsData(){this.notifyListeners("consultations-data",{message:"Real-time consultations monitoring active"})}requestUsersData(){this.notifyListeners("users-data",{message:"Real-time users monitoring active"})}requestPaymentsData(){this.notifyListeners("payments-data",{message:"Real-time payments monitoring active"})}};function _g(){var e,t,a;const[n,r]=s.useState([]),[i,o]=s.useState(!0),[l,c]=s.useState(null),[d,h]=s.useState(!1),[m,p]=s.useState(""),[f,g]=s.useState(""),[x,v]=s.useState(1),[y,b]=s.useState(1),{toast:w}=Ie(),j=s.useCallback(e=>{r(e.claims||[]),o(!1)},[]),N=s.useCallback(e=>{r(t=>t.map(t=>t.id===e.id?{...t,...e}:t)),w({title:"Claim Updated",description:`Claim ${e.id} has been updated.`})},[w]);s.useEffect(()=>(Ng.connect(),Ng.subscribe("claims-data",j),Ng.subscribe("claim-update",N),Ng.requestClaimsData(),()=>{Ng.unsubscribe("claims-data",j),Ng.unsubscribe("claim-update",N)}),[j,N]);const S=async()=>{var e;try{o(!0);const t="all"===f?void 0:f,s=await uc.getAllClaims(x,20,t,m||void 0);s.success?(r(s.data.claims||[]),b((null==(e=s.data.pagination)?void 0:e.totalPages)||1),Ng.requestClaimsData()):r([])}catch(t){r([]),w({title:"Error",description:"Failed to fetch claims data.",variant:"destructive"})}finally{o(!1)}},k=async(e="csv")=>{try{w({title:"Export Started",description:`Exporting claims data as ${e.toUpperCase()}...`}),await new Promise(e=>setTimeout(e,1500));const t={claims:n.map(e=>{var t,s,a;return{id:e.id,policyNumber:e.policyNumber,claimType:e.claimType,claimant:(null==(t=e.user)?void 0:t.name)||"N/A",email:(null==(s=e.user)?void 0:s.email)||"N/A",estimatedLoss:e.estimatedLoss,status:e.status,incidentDate:e.incidentDate,createdAt:e.createdAt,documentCount:(null==(a=e.documents)?void 0:a.length)||0}}),timestamp:(new Date).toISOString(),format:e};let s="",a=`claims-export-${(new Date).toISOString().split("T")[0]}`,r="text/plain";if("json"===e)s=JSON.stringify(t,null,2),a+=".json",r="application/json";else if("csv"===e){s="ID,Policy Number,Claim Type,Claimant,Email,Amount,Status,Incident Date,Created At,Documents\n"+t.claims.map(e=>`${e.id},"${e.policyNumber}","${e.claimType}","${e.claimant}","${e.email}",${e.estimatedLoss},"${e.status}","${e.incidentDate}","${e.createdAt}",${e.documentCount}`).join("\n"),a+=".csv",r="text/csv"}const i=new Blob([s],{type:r}),o=window.URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o),w({title:"Export Complete",description:`Claims data exported as ${e.toUpperCase()}`})}catch(t){w({title:"Export Failed",description:"Failed to export claims data",variant:"destructive"})}},C=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},T=e=>new Date(e).toLocaleDateString(),E=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e),R=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return s.useEffect(()=>{S()},[x,m,f]),i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"text-lg",children:"Loading claims..."})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold",children:"Claims Management"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(pc,{onClick:S,variant:"outline",size:"sm",disabled:i,children:[u.jsx(L,{className:"h-4 w-4 mr-2 "+(i?"animate-spin":"")}),"Refresh"]}),u.jsxs(pc,{onClick:()=>k("csv"),variant:"outline",size:"sm",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),u.jsxs(pc,{onClick:()=>k("json"),variant:"outline",size:"sm",children:[u.jsx($,{className:"h-4 w-4 mr-2"}),"Export JSON"]})]})]}),u.jsx(xc,{children:u.jsx(wc,{className:"p-4",children:u.jsxs("div",{className:"flex gap-4 items-center",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),u.jsx(jc,{placeholder:"Search claims...",value:m,onChange:e=>p(e.target.value),className:"pl-10"})]}),u.jsxs(Jh,{value:f,onValueChange:g,children:[u.jsx(Qh,{className:"w-48",children:u.jsx(Yh,{placeholder:"Filter by status"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"all",children:"All Statuses"}),u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"processing",children:"Processing"}),u.jsx(tm,{value:"approved",children:"Approved"}),u.jsx(tm,{value:"rejected",children:"Rejected"})]})]}),u.jsx(pc,{variant:"outline",size:"icon",children:u.jsx(q,{className:"h-4 w-4"})})]})})}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{children:["Claims List (",n.length," records)"]})}),u.jsxs(wc,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-3 font-medium",children:"Policy #"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Claimant"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Type"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Amount"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Date"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Documents"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),u.jsx("tbody",{children:n.length>0?n.map(e=>{var t;return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-3 font-mono text-sm",children:e.policyNumber}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),u.jsx("div",{className:"text-sm text-gray-500",children:e.email}),u.jsx("div",{className:"text-sm text-gray-500",children:e.phone})]})}),u.jsx("td",{className:"p-3",children:e.claimType}),u.jsx("td",{className:"p-3 font-medium",children:E(e.estimatedLoss)}),u.jsx("td",{className:"p-3",children:T(e.incidentDate)}),u.jsx("td",{className:"p-3",children:u.jsx(Eu,{className:C(e.status),children:e.status})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(_,{className:"h-4 w-4 text-gray-400"}),u.jsxs("span",{className:"text-sm",children:[(null==(t=e.documents)?void 0:t.length)||0," files"]})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const t=await uc.getClaimById(e);t.success?(c(t.data),h(!0)):w({title:"Error",description:t.message||"Failed to fetch claim details.",variant:"destructive"})}catch(t){w({title:"Error",description:"Failed to fetch claim details.",variant:"destructive"})}})(e.id),children:u.jsx(W,{className:"h-4 w-4"})}),u.jsxs(Jh,{onValueChange:t=>(async(e,t)=>{try{const s=await uc.updateClaimStatus(e,t);s.success?(S(),l&&l.id===e&&c({...l,status:t}),w({title:"Success",description:"Claim status updated successfully."})):w({title:"Error",description:s.message||"Failed to update claim status.",variant:"destructive"})}catch(s){w({title:"Error",description:"Failed to update claim status.",variant:"destructive"})}})(e.id,t),children:[u.jsx(Qh,{className:"w-32",children:u.jsx(Yh,{placeholder:"Update"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"processing",children:"Processing"}),u.jsx(tm,{value:"approved",children:"Approved"}),u.jsx(tm,{value:"rejected",children:"Rejected"})]})]})]})})]},e.id)}):u.jsx("tr",{children:u.jsx("td",{colSpan:8,className:"text-center py-12",children:u.jsxs("div",{className:"text-gray-500",children:[u.jsx(_,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),u.jsx("h3",{className:"text-lg font-medium mb-2",children:"No claims found"}),u.jsx("p",{children:"No claims match your current filters."})]})})})})]})}),y>1&&u.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[u.jsx(pc,{variant:"outline",disabled:1===x,onClick:()=>v(x-1),children:"Previous"}),u.jsxs("span",{className:"flex items-center px-4",children:["Page ",x," of ",y]}),u.jsx(pc,{variant:"outline",disabled:x===y,onClick:()=>v(x+1),children:"Next"})]})]})]}),u.jsx(yu,{open:d,onOpenChange:h,children:u.jsxs(Nu,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_u,{children:u.jsx(ku,{children:"Claim Details"})}),l&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"text-lg flex items-center gap-2",children:[u.jsx(_,{className:"h-5 w-5"}),"Claim Information"]})}),u.jsxs(wc,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Policy Number"}),u.jsx("p",{className:"font-mono",children:l.policyNumber})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Claim Type"}),u.jsx("p",{children:l.claimType})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Estimated Loss"}),u.jsx("p",{className:"font-medium",children:E(l.estimatedLoss)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Incident Date"}),u.jsx("p",{children:T(l.incidentDate)})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),u.jsx(Eu,{className:C(l.status),children:l.status})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"text-lg flex items-center gap-2",children:[u.jsx(K,{className:"h-5 w-5"}),"Claimant Information"]})}),u.jsxs(wc,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"First Name"}),u.jsx("p",{children:l.firstName})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Name"}),u.jsx("p",{children:l.lastName})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),u.jsx("p",{children:l.email})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),u.jsx("p",{children:l.phone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Submitted"}),u.jsx("p",{children:T(l.createdAt)})]})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsx(yc,{className:"text-lg",children:"Description"})}),u.jsx(wc,{children:u.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:l.description})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"text-lg flex items-center gap-2",children:[u.jsx(_,{className:"h-5 w-5"}),"Attached Documents (",(null==(e=l.documents)?void 0:e.length)||0,")"]})}),u.jsx(wc,{children:((null==(t=l.documents)?void 0:t.length)||0)>0?u.jsx("div",{className:"grid gap-3",children:null==(a=l.documents)?void 0:a.map(e=>u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_,{className:"h-5 w-5 text-gray-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:e.originalName}),u.jsxs("p",{className:"text-sm text-gray-500",children:[R(e.size)," • ",T(e.createdAt)]})]})]}),u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>(async(e,t)=>{try{const s=await uc.downloadDocument(e,t);s.success?w({title:"Success",description:s.message||"Document download started."}):w({title:"Error",description:s.message||"Failed to download document.",variant:"destructive"})}catch(s){w({title:"Error",description:"Failed to download document.",variant:"destructive"})}})(e.id,e.originalName),children:u.jsx($,{className:"h-4 w-4"})})]},e.id))}):u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No documents attached"})})]})]})]})})]})}function Sg(){const[e,t]=s.useState([]),[a,n]=s.useState(!0),[r,i]=s.useState(null),[o,l]=s.useState(!1),[c,d]=s.useState(!1),[h,m]=s.useState(!1),[p,f]=s.useState(""),[g,x]=s.useState(""),[b,w]=s.useState(1),[j,N]=s.useState(1),[_,S]=s.useState({meetingDate:"",meetingTime:"",meetingType:"online",meetingLink:"",notes:"",duration:"60"}),{toast:k}=Ie(),C=s.useCallback(e=>{t(e.consultations||[]),n(!1)},[]),T=s.useCallback(e=>{t(t=>t.map(t=>t.id===e.id?{...t,...e}:t)),k({title:"Consultation Updated",description:`Consultation ${e.id} has been updated.`})},[k]),E=s.useCallback(e=>{k({title:"Using Demo Data",description:e.message,variant:"default"})},[k]);s.useEffect(()=>(Ng.connect(),Ng.subscribe("consultations-data",C),Ng.subscribe("consultation-update",T),Ng.subscribe("mock-data-warning",E),R(),()=>{Ng.unsubscribe("consultations-data",C),Ng.unsubscribe("consultation-update",T),Ng.unsubscribe("mock-data-warning",E)}),[C,T,E]),s.useEffect(()=>{R()},[b,g,p]);const R=async()=>{var e;try{n(!0);const s="all"===g?void 0:g,a=await uc.getAllConsultations(b,20,s,p||void 0);a.success?(t(a.data.consultations||[]),N((null==(e=a.data.pagination)?void 0:e.totalPages)||1),Ng.requestConsultationsData()):t([])}catch(s){t([]),k({title:"Error",description:"Failed to fetch consultations data.",variant:"destructive"})}finally{n(!1)}},P=async(e,t)=>{try{const s=await uc.updateConsultationStatus(e,t);s.success?(R(),r&&r.id===e&&i({...r,status:t}),k({title:"Success",description:"Consultation status updated successfully."})):k({title:"Error",description:s.message||"Failed to update consultation status.",variant:"destructive"})}catch(s){k({title:"Error",description:"Failed to update consultation status.",variant:"destructive"})}},A=e=>{switch(e.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800";case"contacted":return"bg-orange-100 text-orange-800";case"scheduled":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"confirmed":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return s.useEffect(()=>{R()},[b,p,g]),a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"text-lg",children:"Loading consultations..."})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h1",{className:"text-3xl font-bold",children:"Consultations Management"}),u.jsxs(pc,{onClick:R,variant:"outline",size:"sm",disabled:a,children:[u.jsx(L,{className:"h-4 w-4 mr-2 "+(a?"animate-spin":"")}),"Refresh"]})]}),u.jsx(xc,{children:u.jsx(wc,{className:"p-4",children:u.jsxs("div",{className:"flex gap-4 items-center",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),u.jsx(jc,{placeholder:"Search consultations...",value:p,onChange:e=>f(e.target.value),className:"pl-10"})]}),u.jsxs(Jh,{value:g,onValueChange:x,children:[u.jsx(Qh,{className:"w-48",children:u.jsx(Yh,{placeholder:"Filter by status"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"all",children:"All Statuses"}),u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"contacted",children:"Contacted"}),u.jsx(tm,{value:"confirmed",children:"Confirmed"}),u.jsx(tm,{value:"scheduled",children:"Scheduled"}),u.jsx(tm,{value:"completed",children:"Completed"}),u.jsx(tm,{value:"cancelled",children:"Cancelled"})]})]}),u.jsx(pc,{variant:"outline",size:"icon",children:u.jsx(q,{className:"h-4 w-4"})})]})})}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{children:["Consultations List (",e.length," records)"]})}),u.jsxs(wc,{children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b",children:[u.jsx("th",{className:"text-left p-3 font-medium",children:"Client"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Service Type"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Scheduled"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Country"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Status"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Requested"}),u.jsx("th",{className:"text-left p-3 font-medium",children:"Actions"})]})}),u.jsx("tbody",{children:e.length>0?e.map(e=>{return u.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[u.jsx("td",{className:"p-3",children:u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:e.name}),u.jsx("div",{className:"text-sm text-gray-500",children:e.email}),e.company&&u.jsx("div",{className:"text-xs text-gray-400",children:e.company})]})}),u.jsx("td",{className:"p-3",children:e.serviceType}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(I,{className:"h-4 w-4 text-gray-400"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm",children:e.consultationDate}),u.jsx("div",{className:"text-xs text-gray-500",children:e.consultationTime})]})]})}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(O,{className:"h-4 w-4 text-gray-400"}),u.jsx("span",{children:e.country||"N/A"})]})}),u.jsx("td",{className:"p-3",children:u.jsx(Eu,{className:A(e.status),children:e.status})}),u.jsx("td",{className:"p-3",children:(t=e.createdAt,new Date(t).toLocaleDateString())}),u.jsx("td",{className:"p-3",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx(pc,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const t=await uc.getConsultationById(e);t.success?(i(t.data),l(!0)):k({title:"Error",description:t.message||"Failed to fetch consultation details.",variant:"destructive"})}catch(t){k({title:"Error",description:"Failed to fetch consultation details.",variant:"destructive"})}})(e.id),children:u.jsx(W,{className:"h-4 w-4"})}),u.jsxs(Jh,{onValueChange:t=>P(e.id,t),children:[u.jsx(Qh,{className:"w-32",children:u.jsx(Yh,{placeholder:"Update"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"pending",children:"Pending"}),u.jsx(tm,{value:"contacted",children:"Contacted"}),u.jsx(tm,{value:"confirmed",children:"Confirmed"}),u.jsx(tm,{value:"scheduled",children:"Scheduled"}),u.jsx(tm,{value:"completed",children:"Completed"}),u.jsx(tm,{value:"cancelled",children:"Cancelled"})]})]})]})})]},e.id);var t}):u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"text-center py-12",children:u.jsxs("div",{className:"text-gray-500",children:[u.jsx(I,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),u.jsx("h3",{className:"text-lg font-medium mb-2",children:"No consultations found"}),u.jsx("p",{children:"No consultations match your current filters."})]})})})})]})}),j>1&&u.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[u.jsx(pc,{variant:"outline",disabled:1===b,onClick:()=>w(b-1),children:"Previous"}),u.jsxs("span",{className:"flex items-center px-4",children:["Page ",b," of ",j]}),u.jsx(pc,{variant:"outline",disabled:b===j,onClick:()=>w(b+1),children:"Next"})]})]})]}),u.jsx(yu,{open:o,onOpenChange:l,children:u.jsxs(Nu,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_u,{children:u.jsx(ku,{children:"Consultation Details"})}),r&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"text-lg flex items-center gap-2",children:[u.jsx(K,{className:"h-5 w-5"}),"Client Information"]})}),u.jsxs(wc,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),u.jsx("p",{children:r.name})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(v,{className:"h-4 w-4 text-gray-400"}),r.email]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(y,{className:"h-4 w-4 text-gray-400"}),r.phone]})]}),r.company&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Company"}),u.jsx("p",{children:r.company})]}),r.country&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Country"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(O,{className:"h-4 w-4 text-gray-400"}),r.country]})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsxs(yc,{className:"text-lg flex items-center gap-2",children:[u.jsx(I,{className:"h-5 w-5"}),"Consultation Details"]})}),u.jsxs(wc,{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Service Type"}),u.jsx("p",{children:r.serviceType})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Preferred Date"}),u.jsx("p",{children:r.consultationDate})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Preferred Time"}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(U,{className:"h-4 w-4 text-gray-400"}),r.consultationTime]})]}),r.timezone&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Timezone"}),u.jsx("p",{children:r.timezone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),u.jsx(Eu,{className:A(r.status),children:r.status})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Requested On"}),u.jsx("p",{children:(M=r.createdAt,new Date(M).toLocaleString())})]})]})]})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsx(yc,{className:"text-lg",children:"Client Message"})}),u.jsx(wc,{children:u.jsx("p",{className:"text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:r.message||"No message provided"})})]}),u.jsxs(xc,{children:[u.jsx(vc,{children:u.jsx(yc,{className:"text-lg",children:"Quick Actions"})}),u.jsx(wc,{children:u.jsxs("div",{className:"flex gap-3 flex-wrap",children:[u.jsxs(pc,{onClick:()=>window.open(`mailto:${r.email}`,"_blank"),variant:"outline",children:[u.jsx(v,{className:"h-4 w-4 mr-2"}),"Send Email"]}),u.jsxs(pc,{onClick:()=>(e=>{var t,s;let a=e.phone||(null==(s=null==(t=e.user)?void 0:t.profile)?void 0:s.phone);if(!a)return void k({title:"Error",description:"No phone number found for this client.",variant:"destructive"});a=a.replace(/\s+/g,"").replace(/[-()]/g,""),a.startsWith("0")?a="+254"+a.slice(1):a.startsWith("254")?a="+"+a:a.startsWith("+")||(a="+254"+a);const n=encodeURIComponent(`Hello ${e.name}, this is regarding your consultation request for ${e.serviceType}. We would like to discuss the details of your consultation scheduled for ${e.consultationDate} at ${e.consultationTime}. Please let us know if you have any questions or need to reschedule. Best regards, Galloways Kenya Team.`);window.open(`https://wa.me/${a.replace("+","")}?text=${n}`,"_blank"),k({title:"WhatsApp Message Sent",description:`Message sent to ${e.name} at ${a}`}),P(e.id,"contacted")})(r),variant:"outline",className:"bg-green-50 hover:bg-green-100 border-green-200",children:[u.jsx(D,{className:"h-4 w-4 mr-2"}),"WhatsApp Client"]}),u.jsxs(pc,{onClick:()=>(e=>{i(e),m(!1);let t="";if(e.consultationDate){const s=e.consultationDate;try{if(s.includes("/")){const e=s.split("/");if(3===e.length){const s=new Date(`${e[2]}-${e[0].padStart(2,"0")}-${e[1].padStart(2,"0")}`),a=new Date(`${e[2]}-${e[1].padStart(2,"0")}-${e[0].padStart(2,"0")}`),n=isNaN(s.getTime())?a:s;isNaN(n.getTime())||(t=n.toISOString().split("T")[0])}}else if(s.includes("-")){const e=new Date(s);isNaN(e.getTime())||(t=e.toISOString().split("T")[0])}else{const e=new Date(s);isNaN(e.getTime())||(t=e.toISOString().split("T")[0])}}catch(a){}}let s="";if(e.consultationTime){const t=e.consultationTime;try{if(t.includes("AM")||t.includes("PM")){const[e,a]=t.split(" "),[n,r]=e.split(":");let i=parseInt(n);"PM"===a&&12!==i&&(i+=12),"AM"===a&&12===i&&(i=0),s=`${i.toString().padStart(2,"0")}:${r||"00"}`}else{const[e,a]=t.split(":");s=`${e.padStart(2,"0")}:${a||"00"}`}}catch(a){}}S({meetingDate:t,meetingTime:s,meetingType:"online",meetingLink:"",notes:"",duration:"60"}),d(!0)})(r),className:"bg-blue-600 hover:bg-blue-700",children:[u.jsx(je,{className:"h-4 w-4 mr-2"}),"Schedule Meeting"]}),u.jsxs(pc,{onClick:()=>window.open(`tel:${r.phone}`,"_blank"),variant:"outline",children:[u.jsx(y,{className:"h-4 w-4 mr-2"}),"Call Client"]})]})})]})]})]})}),u.jsx(yu,{open:c,onOpenChange:d,children:u.jsxs(Nu,{className:"max-w-2xl",children:[u.jsx(_u,{children:u.jsx(ku,{children:"Schedule Meeting"})}),r&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsxs("h4",{className:"font-medium text-blue-900",children:["Client: ",r.name]}),u.jsxs("p",{className:"text-sm text-blue-700",children:[r.email," • ",r.phone]}),u.jsxs("p",{className:"text-sm text-blue-600",children:["Service: ",r.serviceType]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Cc,{htmlFor:"meetingDate",children:"Meeting Date *"}),u.jsx(jc,{id:"meetingDate",type:"date",value:_.meetingDate,onChange:e=>{S({..._,meetingDate:e.target.value})},min:(new Date).toISOString().split("T")[0],required:!0,className:_.meetingDate?"border-green-300":"border-amber-300"}),_.meetingDate&&u.jsx("p",{className:"text-xs text-green-600",children:"✓ Date selected"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Cc,{htmlFor:"meetingTime",children:"Meeting Time *"}),u.jsx(jc,{id:"meetingTime",type:"time",value:_.meetingTime,onChange:e=>{S({..._,meetingTime:e.target.value})},required:!0,className:_.meetingTime?"border-green-300":"border-amber-300"}),_.meetingTime&&u.jsx("p",{className:"text-xs text-green-600",children:"✓ Time selected"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Cc,{htmlFor:"meetingType",children:"Meeting Type *"}),u.jsxs(Jh,{value:_.meetingType,onValueChange:e=>S({..._,meetingType:e}),children:[u.jsx(Qh,{children:u.jsx(Yh,{placeholder:"Select meeting type"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"online",children:"Online (Zoom/Teams/Meet)"}),u.jsx(tm,{value:"phone",children:"Phone Call"}),u.jsx(tm,{value:"in-person",children:"In-Person Meeting"}),u.jsx(tm,{value:"whatsapp",children:"WhatsApp Video Call"})]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Cc,{htmlFor:"duration",children:"Duration (minutes) *"}),u.jsxs(Jh,{value:_.duration,onValueChange:e=>S({..._,duration:e}),children:[u.jsx(Qh,{children:u.jsx(Yh,{placeholder:"Select duration"})}),u.jsxs(em,{children:[u.jsx(tm,{value:"30",children:"30 minutes"}),u.jsx(tm,{value:"60",children:"60 minutes"}),u.jsx(tm,{value:"90",children:"90 minutes"}),u.jsx(tm,{value:"120",children:"2 hours"})]})]})]})]}),"online"===_.meetingType&&u.jsxs("div",{className:"space-y-2",children:[u.jsx(Cc,{htmlFor:"meetingLink",children:"Meeting Link"}),u.jsx(jc,{id:"meetingLink",type:"url",placeholder:"https://zoom.us/j/... or https://teams.microsoft.com/...",value:_.meetingLink,onChange:e=>S({..._,meetingLink:e.target.value})}),u.jsx("p",{className:"text-sm text-gray-500",children:"If no link is provided, we'll create a Zoom meeting automatically."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Cc,{htmlFor:"notes",children:"Additional Notes"}),u.jsx(Nc,{id:"notes",placeholder:"Any specific agenda items, preparation requirements, or special instructions...",value:_.notes,onChange:e=>S({..._,notes:e.target.value}),rows:3})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[u.jsx(D,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:"WhatsApp Confirmation"})]}),u.jsx("p",{className:"text-sm text-green-700 mt-1",children:"After scheduling, a WhatsApp confirmation message will be automatically sent to the client with all meeting details."})]}),u.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[u.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Debug Info:"}),u.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[u.jsxs("p",{children:['Meeting Date: "',_.meetingDate,'" (Length: ',_.meetingDate.length,")"]}),u.jsxs("p",{children:['Meeting Time: "',_.meetingTime,'" (Length: ',_.meetingTime.length,")"]}),u.jsxs("p",{children:["Button Enabled: ",_.meetingDate&&_.meetingTime?"YES":"NO"]})]})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[(!_.meetingDate||!_.meetingTime)&&u.jsxs("p",{className:"text-sm text-amber-600 bg-amber-50 p-2 rounded-md border border-amber-200",children:[u.jsx(we,{className:"h-4 w-4 inline mr-1"}),"Please fill in both meeting date and time to enable scheduling."]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx(pc,{variant:"outline",onClick:()=>{d(!1),i(null),m(!1)},children:h?"Close":"Cancel"}),!h&&u.jsxs(pc,{onClick:async()=>{if(r)try{const e=await uc.scheduleMeeting(r.id,_);if(!e.success)throw new Error(e.message||"Failed to schedule meeting");m(!0),k({title:"Meeting Scheduled Successfully",description:e.message||`Meeting scheduled for ${_.meetingDate} at ${_.meetingTime}. Use the button below to send WhatsApp details.`}),R()}catch(e){k({title:"Error",description:e.message||"Failed to schedule meeting. Please try again.",variant:"destructive"})}},disabled:!_.meetingDate||!_.meetingTime,className:""+(_.meetingDate&&_.meetingTime?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed hover:bg-gray-300"),children:[u.jsx(je,{className:"h-4 w-4 mr-2"}),"Schedule Meeting"]})]}),h&&u.jsx("div",{className:"border-t pt-3",children:u.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-green-800",children:"✅ Meeting Successfully Scheduled!"}),u.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["📅 ",_.meetingDate," at ",_.meetingTime]}),u.jsx("p",{className:"text-xs text-green-600",children:"Click below to send meeting details to client via WhatsApp"})]}),u.jsxs(pc,{onClick:async()=>{if(r)try{const e=await uc.sendWhatsAppMeetingDetails(r.id,{includeLink:!!_.meetingLink,message:void 0});if(!e.success)throw new Error(e.message||"Failed to send WhatsApp details");k({title:"WhatsApp Details Sent Successfully",description:`Meeting details sent to ${r.name}`}),d(!1),i(null),m(!1)}catch(e){k({title:"Error",description:e.message||"Failed to send WhatsApp details. Please try again.",variant:"destructive"})}else k({title:"Error",description:"No consultation selected.",variant:"destructive"})},className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[u.jsx(D,{className:"h-4 w-4 mr-2"}),"Send WhatsApp Details"]})]})})]})]})]})]})})]});var M}const kg=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState("dashboard"),[a,n]=s.useState(!0),[r,i]=s.useState(!1);return s.useEffect(()=>{localStorage.setItem("admin_token","admin-access-token")},[]),u.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/50 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/5 via-purple-600/5 to-indigo-600/5 pointer-events-none"}),u.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-100/20 via-transparent to-transparent pointer-events-none"}),u.jsx(Km,{activeTab:e,setActiveTab:s=>{s!==e&&(i(!0),setTimeout(()=>{t(s),i(!1)},150))},isOpen:a,toggleSidebar:()=>n(!a)}),u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[u.jsx(Yf,{toggleSidebar:()=>n(!a)}),u.jsxs("main",{className:`\n          flex-1 overflow-auto p-6 relative\n          transition-all duration-300 ease-in-out\n          ${r?"opacity-60 scale-98":"opacity-100 scale-100"}\n        `,children:[u.jsx("div",{className:"relative z-10 h-full",children:(()=>{switch(e){case"dashboard":default:return u.jsx(dg,{});case"users":return u.jsx(xg,{});case"claims":return u.jsx(_g,{});case"consultations":return u.jsx(Sg,{});case"payments":return u.jsx(vg,{});case"notifications":return u.jsx(yg,{});case"analytics":return u.jsx(bg,{});case"settings":return u.jsx(wg,{});case"quotes":return u.jsx(Bm,{});case"diaspora":return u.jsx(Wm,{})}})()}),u.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-blue-400/10 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-purple-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),u.jsx("div",{className:"absolute top-1/3 right-1/4 w-24 h-24 bg-indigo-400/10 rounded-full blur-2xl animate-pulse delay-500"})]})]}),r&&u.jsx("div",{className:"absolute inset-0 bg-white/30 backdrop-blur-sm z-50 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),u.jsx(Is,{position:"top-right",richColors:!0,closeButton:!0,theme:"light",className:"z-[9999]",toastOptions:{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.1)"}}})]})}},Symbol.toStringTag,{value:"Module"}));export{Is as $,Jn as A,pc as B,xc as C,tt as D,ft as E,Qn as F,We as G,Ql as H,jc as I,Kl as J,fc as K,Cc as L,gc as M,bc as N,Pe as O,Ge as P,nc as Q,rt as R,qe as S,Nc as T,yu as U,pt as V,bu as W,Nu as X,oc as Y,Eu as Z,_e as _,wc as a,lc as a0,Iu as a1,En as a2,cm as a3,Pu as a4,vm as a5,ym as a6,ic as a7,Lm as a8,Um as a9,Fm as aa,qm as ab,tc as ac,zm as ad,kg as ae,vc as b,ms as c,yc as d,Jh as e,Qh as f,Yh as g,em as h,tm as i,rc as j,Ke as k,Le as l,$e as m,it as n,ht as o,ct as p,Je as q,cc as r,Ae as s,lt as t,Ie as u,ot as v,Ve as w,bt as x,Pn as y,Yn as z};
